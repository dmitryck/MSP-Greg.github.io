<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: Syslog &mdash; syslog</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../css/common.css' />

<script type='text/javascript'>
  var pathId = "Syslog",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
        <a href='../../index.html'>Home</a> &raquo; 
        <a href='../index.html'>Ruby-2.5.0</a> &raquo; 
        <a href='index.html'>syslog</a> &raquo; 
        <a href='_index.html#alpha_S'>Index (S)</a> &raquo; 
        <span class='title'><a id='t2_doc_top' href='#'>Syslog&nbsp;&#x25B2;</a></span>
      </div>

    <a id='list_href' href="class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='module'>
<h1>Module: Syslog</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Namespace Children</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Modules:</div>
      <div class='box_11'>
          <a href="Syslog/Constants.html" title="Syslog::Constants (module)">Constants</a>,
        <a href="Syslog/Facility.html" title="Syslog::Facility (module)">Facility</a>,
        <a href="Syslog/Level.html" title="Syslog::Level (module)">Level</a>,
        <a href="Syslog/Macros.html" title="Syslog::Macros (module)">Macros</a>,
        <a href="Syslog/Option.html" title="Syslog::Option (module)">Option</a>      </div>
    </td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Classes:</div>
      <div class='box_11'>
          <a href="Syslog/Logger.html" title="Syslog::Logger (class)">Logger</a>      </div>
    </td></tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby/ruby/blob/trunk/ext/syslog/syslog.c#L421'>ext/syslog/syslog.c</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>The syslog package provides a Ruby interface to the POSIX system logging
facility.</p>

<p><code>Syslog</code> messages are typically passed to a central logging
daemon. The daemon may filter them; route them into different files
(usually found under /var/log); place them in SQL databases; forward them
to centralized logging servers via TCP or UDP; or even alert the system
administrator via email, pager or text message.</p>

<p>Unlike application-level logging via <a href="Syslog/Logger.html" title="Syslog::Logger (class)">Logger</a> or Log4r, syslog is
designed to allow secure tamper-proof logging.</p>

<p>The syslog protocol is standardized in RFC 5424.</p>

  </div>
</div>
</div>        

<h2 class='h2_sum' id='class_Attribute_summary'>Class Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature ro'>
      <a href="#opened%3F-class_method" title="opened? (class method)">.<strong>opened?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns true if the syslog is open.</p></div>
    </div>
  </li>
</ul>
</div>
        

<h2 class='h2_sum' id='class_Method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#inspect-class_method" title=".inspect (class method)">.<strong>inspect</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns an inspect() string summarizing the object state.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature mf'>
      <a href="#close-class_method" title=".close (class method)">.<strong>close</strong>  </a>
    </span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>Closes the syslog facility.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature mf'>
      <a href="#facility-class_method" title=".facility (class method)">.<strong>facility</strong>  </a>
    </span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the facility number used in the last call to open().</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature mf'>
      <a href="#ident-class_method" title=".ident (class method)">.<strong>ident</strong>  </a>
    </span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the identity string used in the last call to open().</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature mf'>
      <a href="#instance-class_method" title=".instance (class method)">.<strong>instance</strong>  </a>
    </span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns self, for backward compatibility.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature mf'>
      <a href="#log-class_method" title="log (class method)">.<strong>log</strong>(priority, format_string, *format_args)  </a>
    </span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>Log a message with the specified priority.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature mf'>
      <a href="#mask-class_method" title=".mask (class method)">.<strong>mask</strong>  </a>
    </span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the log priority mask in effect.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature mf'>
      <a href="#mask=-class_method" title="mask= (class method)">.<strong>mask=</strong>(priority_mask)  </a>
    </span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>Sets the log priority mask.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature mf'>
      <a href="#open-class_method" title="open (class method)">.<strong>open</strong>(ident, options, facility)  &#x21d2; Syslog </a>
    </span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>:yields: syslog.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature mf'>
      <a href="#open!-class_method" title="open! (class method)">.<strong>open!</strong>(ident, options, facility)  &#x21d2; Syslog </a>
      (also: .reopen)
    </span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>:yields: syslog.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature mf'>
      <a href="#options-class_method" title=".options (class method)">.<strong>options</strong>  </a>
    </span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the options bitmask used in the last call to open().</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature mf'>
      <a href="#reopen-class_method" title="reopen (class method)">.<strong>reopen</strong>(ident, options, facility)  &#x21d2; Syslog </a>
    </span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#open!-class_method" title="Syslog.open! (method)">.open!</a>.</p></div>
    </div>
  </li>
</ul>
</div>
<h2 class='y_details'>Class Attribute Details</h2>
<section class='method_details first' id="opened?-class_method">
  <h3 class='signature ro  private first'>
    .<strong>opened?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>, <span class='mod_func'>mod_func</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns true if the syslog is open.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/ext/syslog/syslog.c#L213-L216'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


213
214
215
216</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/syslog/syslog.c', line 213</span></pre>
<pre class='code cpp'>

static VALUE mSyslog_isopen(VALUE self)
{
    return syslog_opened ? Qtrue : Qfalse;
}
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="close-class_method">
  <h3 class='signature private first'>
    .<strong>close</strong>   <span class="extras">(<span class='mod_func'>mod_func</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Closes the syslog facility. Raises a runtime exception if it is not open.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/ext/syslog/syslog.c#L56-L70'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


56
57
58
59
60
61
62
63
64
65
66
67
68
69
70</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/syslog/syslog.c', line 56</span></pre>
<pre class='code cpp'>

static VALUE mSyslog_close(VALUE self)
{
    if (!syslog_opened) {
        rb_raise(rb_eRuntimeError, &quot;syslog not opened&quot;);
    }

    closelog();

    xfree((void *)syslog_ident);
    syslog_ident = NULL;
    syslog_options = syslog_facility = syslog_mask = -1;
    syslog_opened = 0;

    return Qnil;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="facility-class_method">
  <h3 class='signature private'>
    .<strong>facility</strong>   <span class="extras">(<span class='mod_func'>mod_func</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the facility number used in the last call to open()</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/ext/syslog/syslog.c#L234-L237'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


234
235
236
237</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/syslog/syslog.c', line 234</span></pre>
<pre class='code cpp'>

static VALUE mSyslog_facility(VALUE self)
{
    return syslog_opened ? INT2NUM(syslog_facility) : Qnil;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="ident-class_method">
  <h3 class='signature private'>
    .<strong>ident</strong>   <span class="extras">(<span class='mod_func'>mod_func</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the identity string used in the last call to open()</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/ext/syslog/syslog.c#L220-L223'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


220
221
222
223</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/syslog/syslog.c', line 220</span></pre>
<pre class='code cpp'>

static VALUE mSyslog_ident(VALUE self)
{
    return syslog_opened ? rb_str_new2(syslog_ident) : Qnil;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="inspect-class_method">
  <h3 class='signature '>
    .<strong>inspect</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns an inspect() string summarizing the object state.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/ext/syslog/syslog.c#L323-L336'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


323
324
325
326
327
328
329
330
331
332
333
334
335
336</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/syslog/syslog.c', line 323</span></pre>
<pre class='code cpp'>

static VALUE mSyslog_inspect(VALUE self)
{
    Check_Type(self, T_MODULE);

    if (!syslog_opened)
	return rb_sprintf(&quot;&lt;#%&quot;PRIsVALUE&quot;: opened=false&gt;&quot;, self);

    return rb_sprintf(&quot;&lt;#%&quot;PRIsVALUE&quot;: opened=true, ident=\&quot;%s\&quot;, options=%d, facility=%d, mask=%d&gt;&quot;,
		      self,
		      syslog_ident,
		      syslog_options,
		      syslog_facility,
		      syslog_mask);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="instance-class_method">
  <h3 class='signature private'>
    .<strong>instance</strong>   <span class="extras">(<span class='mod_func'>mod_func</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns self, for backward compatibility.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/ext/syslog/syslog.c#L340-L343'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


340
341
342
343</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/syslog/syslog.c', line 340</span></pre>
<pre class='code cpp'>

static VALUE mSyslog_instance(VALUE self)
{
    return self;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="log-class_method">
  <h3 class='signature private'>
    .<strong>log</strong>(priority, format_string, *format_args)   <span class="extras">(<span class='mod_func'>mod_func</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Log a message with the specified priority. Example:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Syslog</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='const'>Syslog</span><span class='op'>::</span><span class='const'>LOG_CRIT</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Out of disk space</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='const'>Syslog</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='const'>Syslog</span><span class='op'>::</span><span class='const'>LOG_CRIT</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>User %s logged in</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='const'>ENV</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>USER</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span></code></pre>

<p>The priority levels, in descending order, are:</p>
<dl class="rdoc-list note-list"><dt>LOG_EMERG
<dd>
<p>System is unusable</p>
</dd><dt>LOG_ALERT
<dd>
<p>Action needs to be taken immediately</p>
</dd><dt>LOG_CRIT
<dd>
<p>A critical condition has occurred</p>
</dd><dt>LOG_ERR
<dd>
<p>An error occurred</p>
</dd><dt>LOG_WARNING
<dd>
<p>Warning of a possible problem</p>
</dd><dt>LOG_NOTICE
<dd>
<p>A normal but significant condition occurred</p>
</dd><dt>LOG_INFO
<dd>
<p>Informational message</p>
</dd><dt>LOG_DEBUG
<dd>
<p>Debugging information</p>
</dd></dl>

<p>Each priority level also has a shortcut method that logs with it&#39;s
named priority. As an example, the two following statements would produce
the same result:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Syslog</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='const'>Syslog</span><span class='op'>::</span><span class='const'>LOG_ALERT</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Out of memory</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='const'>Syslog</span><span class='period'>.</span><span class='id identifier rubyid_alert'>alert</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Out of memory</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span></code></pre>

<p>Format strings are as for printf/sprintf, except that in addition %m is
replaced with the error message string that would be returned by
strerror(errno).</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/ext/syslog/syslog.c#L303-L319'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/syslog/syslog.c', line 303</span></pre>
<pre class='code cpp'>

static VALUE mSyslog_log(int argc, VALUE *argv, VALUE self)
{
    VALUE pri;

    rb_check_arity(argc, 2, UNLIMITED_ARGUMENTS);

    argc--;
    pri = *argv++;

    if (!FIXNUM_P(pri)) {
	rb_raise(rb_eTypeError, &quot;type mismatch: %&quot;PRIsVALUE&quot; given&quot;, rb_obj_class(pri));
    }

    syslog_write(FIX2INT(pri), argc, argv);

    return self;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mask-class_method">
  <h3 class='signature private'>
    .<strong>mask</strong>   <span class="extras">(<span class='mod_func'>mod_func</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the log priority mask in effect. The mask is not reset by opening
or closing syslog.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/ext/syslog/syslog.c#L242-L245'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


242
243
244
245</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/syslog/syslog.c', line 242</span></pre>
<pre class='code cpp'>

static VALUE mSyslog_get_mask(VALUE self)
{
    return syslog_opened ? INT2NUM(syslog_mask) : Qnil;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mask=-class_method">
  <h3 class='signature private'>
    .<strong>mask=</strong>(priority_mask)   <span class="extras">(<span class='mod_func'>mod_func</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sets the log priority mask. A method LOG_UPTO is defined to make it easier
to set mask values. Example:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Syslog</span><span class='period'>.</span><span class='id identifier rubyid_mask'><a href="#mask-class_method" title="Syslog.mask (method)">mask</a></span> <span class='op'>=</span> <span class='const'>Syslog</span><span class='op'>::</span><span class='const'>LOG_UPTO</span><span class='lparen'>(</span><span class='const'>Syslog</span><span class='op'>::</span><span class='const'>LOG_ERR</span><span class='rparen'>)</span></code></pre>

<p>Alternatively, specific priorities can be selected and added together using
binary OR. Example:</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Syslog</span><span class='period'>.</span><span class='id identifier rubyid_mask'><a href="#mask-class_method" title="Syslog.mask (method)">mask</a></span> <span class='op'>=</span> <span class='const'>Syslog</span><span class='op'>::</span><span class='const'>LOG_MASK</span><span class='lparen'>(</span><span class='const'>Syslog</span><span class='op'>::</span><span class='const'>LOG_ERR</span><span class='rparen'>)</span> <span class='op'>|</span> <span class='const'>Syslog</span><span class='op'>::</span><span class='const'>LOG_MASK</span><span class='lparen'>(</span><span class='const'>Syslog</span><span class='op'>::</span><span class='const'>LOG_CRIT</span><span class='rparen'>)</span></code></pre>

<p>The priority mask persists through calls to open() and close().</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/ext/syslog/syslog.c#L262-L271'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


262
263
264
265
266
267
268
269
270
271</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/syslog/syslog.c', line 262</span></pre>
<pre class='code cpp'>

static VALUE mSyslog_set_mask(VALUE self, VALUE mask)
{
    if (!syslog_opened) {
        rb_raise(rb_eRuntimeError, &quot;must open syslog before setting log mask&quot;);
    }

    setlogmask(syslog_mask = NUM2INT(mask));

    return mask;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="open-class_method">
  <h3 class='signature private'>
    .<strong>open</strong>(ident, options, facility)  &#x21d2; <code>Syslog</code>  <span class="extras">(<span class='mod_func'>mod_func</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:yields: syslog</p>

<p>Open the syslog facility. Raises a runtime exception if it is already open.</p>

<p>Can be called with or without a code block. If called with a block, the
<code>Syslog</code> object created is passed to the block.</p>

<p>If the syslog is already open, raises a RuntimeError.</p>

<p><a href="#ident-class_method" title="Syslog.ident (method)">.ident</a> is a String which identifies the calling program.</p>

<p><a href="#options-class_method" title="Syslog.options (method)">.options</a> is the logical OR of any of the following:</p>
<dl class="rdoc-list note-list"><dt>LOG_CONS
<dd>
<p>If there is an error while sending to the system logger, write directly to
the console instead.</p>
</dd><dt>LOG_NDELAY
<dd>
<p>Open the connection now, rather than waiting for the first message to be
written.</p>
</dd><dt>LOG_NOWAIT
<dd>
<p>Don&#39;t wait for any child processes created while logging messages. (Has
no effect on Linux.)</p>
</dd><dt>LOG_ODELAY
<dd>
<p>Opposite of LOG_NDELAY; wait until a message is sent before opening the
connection. (This is the default.)</p>
</dd><dt>LOG_PERROR
<dd>
<p>Print the message to stderr as well as sending it to syslog. (Not in
POSIX.1-2001.)</p>
</dd><dt>LOG_PID
<dd>
<p>Include the current process ID with each message.</p>
</dd></dl>

<p><a href="#facility-class_method" title="Syslog.facility (method)">.facility</a> describes the type of program opening the syslog, and is the
logical OR of any of the following which are defined for the host OS:</p>
<dl class="rdoc-list note-list"><dt>LOG_AUTH
<dd>
<p>Security or authorization. Deprecated, use LOG_AUTHPRIV instead.</p>
</dd><dt>LOG_AUTHPRIV
<dd>
<p>Security or authorization messages which should be kept private.</p>
</dd><dt>LOG_CONSOLE
<dd>
<p>System console message.</p>
</dd><dt>LOG_CRON
<dd>
<p>System task scheduler (cron or at).</p>
</dd><dt>LOG_DAEMON
<dd>
<p>A system daemon which has no facility value of its own.</p>
</dd><dt>LOG_FTP
<dd>
<p>An FTP server.</p>
</dd><dt>LOG_KERN
<dd>
<p>A kernel message (not sendable by user processes, so not of much use to
Ruby, but listed here for completeness).</p>
</dd><dt>LOG_LPR
<dd>
<p>Line printer subsystem.</p>
</dd><dt>LOG_MAIL
<dd>
<p>Mail delivery or transport subsystem.</p>
</dd><dt>LOG_NEWS
<dd>
<p>Usenet news system.</p>
</dd><dt>LOG_NTP
<dd>
<p>Network Time Protocol server.</p>
</dd><dt>LOG_SECURITY
<dd>
<p>General security message.</p>
</dd><dt>LOG_SYSLOG
<dd>
<p>Messages generated internally by syslog.</p>
</dd><dt>LOG_USER
<dd>
<p>Generic user-level message.</p>
</dd><dt>LOG_UUCP
<dd>
<p>UUCP subsystem.</p>
</dd><dt>LOG_LOCAL0 to LOG_LOCAL7
<dd>
<p>Locally-defined facilities.</p>
</dd></dl>

<p>Example:</p>

<pre class="code ruby"><code class="ruby">&lt;code&gt;Syslog&lt;/code&gt;.open(&quot;webrick&quot;, {Syslog::LOG_PID},
            Syslog::LOG_DAEMON | Syslog::LOG_LOCAL3)</code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/ext/syslog/syslog.c#L150-L190'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/syslog/syslog.c', line 150</span></pre>
<pre class='code cpp'>

static VALUE mSyslog_open(int argc, VALUE *argv, VALUE self)
{
    VALUE ident, opt, fac;

    if (syslog_opened) {
        rb_raise(rb_eRuntimeError, &quot;syslog already open&quot;);
    }

    rb_scan_args(argc, argv, &quot;03&quot;, &amp;ident, &amp;opt, &amp;fac);

    if (NIL_P(ident)) {
        ident = rb_gv_get(&quot;$0&quot;);
    }
    SafeStringValue(ident);
    syslog_ident = strdup(RSTRING_PTR(ident));

    if (NIL_P(opt)) {
	syslog_options = LOG_PID | LOG_CONS;
    } else {
	syslog_options = NUM2INT(opt);
    }

    if (NIL_P(fac)) {
	syslog_facility = LOG_USER;
    } else {
	syslog_facility = NUM2INT(fac);
    }

    openlog(syslog_ident, syslog_options, syslog_facility);

    syslog_opened = 1;

    setlogmask(syslog_mask = setlogmask(0));

    /* be like File.new.open {...} */
    if (rb_block_given_p()) {
        rb_ensure(rb_yield, self, mSyslog_close, self);
    }

    return self;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="open!-class_method">
  <h3 class='signature private'>
    .<strong>open!</strong>(ident, options, facility)  &#x21d2; <code>Syslog</code>  <span class="extras">(<span class='mod_func'>mod_func</span>)</span>    <span class='aliases'>Also known as: <span class='names'>.reopen</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>:yields: syslog</p>

<p>Closes and then reopens the syslog.</p>

<p>Arguments are the same as for open().</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/ext/syslog/syslog.c#L201-L206'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


201
202
203
204
205
206</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/syslog/syslog.c', line 201</span></pre>
<pre class='code cpp'>

static VALUE mSyslog_reopen(int argc, VALUE *argv, VALUE self)
{
    mSyslog_close(self);

    return mSyslog_open(argc, argv, self);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="options-class_method">
  <h3 class='signature private'>
    .<strong>options</strong>   <span class="extras">(<span class='mod_func'>mod_func</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the options bitmask used in the last call to open()</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/ext/syslog/syslog.c#L227-L230'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


227
228
229
230</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/syslog/syslog.c', line 227</span></pre>
<pre class='code cpp'>

static VALUE mSyslog_options(VALUE self)
{
    return syslog_opened ? INT2NUM(syslog_options) : Qnil;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="reopen-class_method">
  <h3 class='signature private'>
    <div class='inline-block'>
      <span class='overload'>.<strong>open!</strong>(ident, options, facility)  &#x21d2; <code>Syslog</code>  <span class="extras">(<span class='mod_func'>mod_func</span>)</span></span>
      <span class='overload'>.<strong>reopen</strong>(ident, options, facility)  &#x21d2; <code>Syslog</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#open!-class_method" title="Syslog.open! (method)">.open!</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>
</section>


<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.9.8 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.9.0 (ruby-2.5.0p-1)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>