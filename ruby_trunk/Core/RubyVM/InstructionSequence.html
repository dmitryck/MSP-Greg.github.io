<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: RubyVM::InstructionSequence &mdash; Core Ruby-2.5.0 dev</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/common.css' />

<script type='text/javascript'>
  var pathId = "RubyVM::InstructionSequence",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
        <a href='../../../index.html'>Home</a> &raquo; 
        <a href='../../index.html'>Ruby-2.5.0</a> &raquo; 
        <a href='../index.html'>Core</a> &raquo; 
        <a href='../_index.html#alpha_I'>Index (I)</a> &raquo; 
        <a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a> &raquo; 
        <span class='title'><a id='t2_doc_top' href='#'>InstructionSequence&nbsp;&#x25B2;</a></span>
      </div>

    <a id='list_href' href="../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: RubyVM::InstructionSequence</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr>
      <td id='t2_inherits' class='box_2'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'><a href="../Object.html" title="Object (class)">Object</a></span>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2 o'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby/ruby/blob/trunk/iseq.c#L2440'>iseq.c</a><span class='defines'>,<br /><a class='repo' href='https://github.com/ruby/ruby/blob/trunk/iseq.c#L2435'>iseq.c</a></span>
      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>The InstructionSequence class represents a compiled sequence of
instructions for the Ruby Virtual Machine.</p>

<p>With it, you can get a handle to the instructions that make up a method or
a proc, compile strings of Ruby code down to VM instructions, and
disassemble instruction sequences to strings for easy inspection. It is
mostly useful if you want to learn how the Ruby VM works, but it also lets
you control various settings for the Ruby iseq compiler.</p>

<p>You can find the source for the VM instructions in <code>insns.def</code>
in the Ruby source.</p>

<p>The instruction sequence results will almost certainly change as Ruby
changes, so example output in this documentation may be different from what
you see.</p>

  </div>
</div>
</div>        

<h2 class='h2_sum' id='class_Attribute_summary'>Class Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature rw'>
      <a href="#compile_option-class_method" title="compile_option (class method)">.<strong>compile_option</strong>  &#x21d2; options </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a hash of default options used by the Ruby iseq compiler.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#compile_option=-class_method" title="compile_option= (class method)">.<strong>compile_option=</strong>(options)  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>Sets the default values for various optimizations in the Ruby iseq
compiler.</p></div>
    </div>
  </li>
</ul>
</div>
        

<h2 class='h2_sum' id='class_Method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#compile-class_method" title="compile (class method)">.<strong>compile</strong>(source[, file[, path[, line[, options]]]])  &#x21d2; iseq </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#new-class_method" title="RubyVM::InstructionSequence.new (method)">.new</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#compile_file-class_method" title="compile_file (class method)">.<strong>compile_file</strong>(file[, options])  &#x21d2; iseq </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Takes <code>file</code>, a <a href="../String.html" title="String (class)">::String</a> with the location of a Ruby source file, reads,
parses and compiles the file, and returns <code>iseq</code>, the compiled
<code>InstructionSequence</code> with source location metadata set.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#disasm-class_method" title="disasm (class method)">.<strong>disasm</strong>(body)  &#x21d2; String </a>
      (also: .disassemble)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Takes <code>body</code>, a <a href="../Method.html" title="Method (class)">::Method</a> or <a href="../Proc.html" title="Proc (class)">::Proc</a> object, and returns a <a href="../String.html" title="String (class)">::String</a> with the
human readable instructions for <code>body</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#disassemble-class_method" title="disassemble (class method)">.<strong>disassemble</strong>(body)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#disasm-class_method" title="RubyVM::InstructionSequence.disasm (method)">.disasm</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#load_from_binary-class_method" title="load_from_binary (class method)">.<strong>load_from_binary</strong>(binary)  &#x21d2; iseq </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Load an iseq object from binary format <a href="../String.html" title="String (class)">::String</a> object created by
<a href="#to_binary-instance_method" title="RubyVM::InstructionSequence#to_binary (method)">#to_binary</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#load_from_binary_extra_data-class_method" title="load_from_binary_extra_data (class method)">.<strong>load_from_binary_extra_data</strong>(binary)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Load extra data embed into binary format <a href="../String.html" title="String (class)">::String</a> object.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#new-class_method" title="new (class method)">.<strong>new</strong>(source[, file[, path[, line[, options]]]])  &#x21d2; iseq </a>
      (also: .compile)
    </span>
    <span class='note title constructor'>constructor</span>
    <div class='summary_desc'>
      <div class='inline'><p>Takes <code>source</code>, a <a href="../String.html" title="String (class)">::String</a> of Ruby code and compiles it to an
<code>InstructionSequence</code>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#of-class_method" title=".of (class method)">.<strong>of</strong>(body)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the instruction sequence containing the given proc or method.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#load-class_method" title=".load (class method)">.<strong>load</strong>(*args)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>
</div>
        

<h2 class='h2_sum' id='instance_Method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#absolute_path-instance_method" title="#absolute_path (instance method)">#<strong>absolute_path</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the absolute path of this instruction sequence.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#base_label-instance_method" title="#base_label (instance method)">#<strong>base_label</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the base label of this instruction sequence.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#disasm-instance_method" title="#disasm (instance method)">#<strong>disasm</strong>  &#x21d2; String </a>
      (also: #disassemble)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the instruction sequence as a <a href="../String.html" title="String (class)">::String</a> in human readable form.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#disassemble-instance_method" title="#disassemble (instance method)">#<strong>disassemble</strong>  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#disasm-instance_method" title="RubyVM::InstructionSequence#disasm (method)">#disasm</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#eval-instance_method" title="#eval (instance method)">#<strong>eval</strong>  &#x21d2; Object </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Evaluates the instruction sequence and returns the result.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#first_lineno-instance_method" title="#first_lineno (instance method)">#<strong>first_lineno</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the number of the first source line where the instruction sequence
was loaded from.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#inspect-instance_method" title="#inspect (instance method)">#<strong>inspect</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns a human-readable string representation of this instruction
sequence, including the <a href="#label-instance_method" title="RubyVM::InstructionSequence#label (method)">#label</a> and <a href="#path-instance_method" title="RubyVM::InstructionSequence#path (method)">#path</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#label-instance_method" title="#label (instance method)">#<strong>label</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the label of this instruction sequence.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#line_trace_all-instance_method" title="#line_trace_all (instance method)">#<strong>line_trace_all</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p><strong>Experimental MRI specific feature, only available as C level
api.</strong>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#line_trace_specify-instance_method" title="#line_trace_specify (instance method)">#<strong>line_trace_specify</strong>(pos, set)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p><strong>Experimental MRI specific feature, only available as C level
api.</strong>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#path-instance_method" title="#path (instance method)">#<strong>path</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the path of this instruction sequence.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#to_a-instance_method" title="#to_a (instance method)">#<strong>to_a</strong>  &#x21d2; Array </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns an <a href="../Array.html" title="Array (class)">::Array</a> with 14 elements representing the instruction sequence
with the following data:</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#to_binary-instance_method" title="#to_binary (instance method)">#<strong>to_binary</strong>(extra_data = nil)  &#x21d2; binary str </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns serialized iseq binary format data as a <a href="../String.html" title="String (class)">::String</a> object.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#marshal_dump-instance_method" title="#marshal_dump (instance method)">#<strong>marshal_dump</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#marshal_load-instance_method" title="#marshal_load (instance method)">#<strong>marshal_load</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
</ul>
</div>
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature  first'>
    <div class='inline-block'>
      <span class='overload'>.<strong>compile</strong>(source[, file[, path[, line[, options]]]])  &#x21d2; <code>iseq</code> </span>
      <span class='overload'>.<strong>new</strong>(source[, file[, path[, line[, options]]]])  &#x21d2; <code>iseq</code> </span>
    </div>
    <span class='aliases'>Also known as: <span class='names'>.compile</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Takes <code>source</code>, a <a href="../String.html" title="String (class)">::String</a> of Ruby code and compiles it to an
<code>InstructionSequence</code>.</p>

<p>Optionally takes <code>file</code>, <a href="#path-instance_method" title="RubyVM::InstructionSequence#path (method)">#path</a>, and <code>line</code> which describe the filename,
absolute path and first line number of the ruby code in <code>source</code> which are
metadata attached to the returned <code>iseq</code>.</p>

<p><code>options</code>, which can be <code>true</code>, <code>false</code> or a <a href="../Hash.html" title="Hash (class)">::Hash</a>, is used to modify the
default behavior of the Ruby iseq compiler.</p>

<p>For details regarding valid compile options see <a href="#compile_option=-class_method" title="RubyVM::InstructionSequence.compile_option= (method)">.compile_option=</a>.</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a></span><span class='op'>::</span><span class='const'>InstructionSequence</span><span class='period'>.</span><span class='id identifier rubyid_compile'><a href="#compile-class_method" title="RubyVM::InstructionSequence.compile (method)">compile</a></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a = 1 + 2</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='comment'>#=&gt; &lt;RubyVM::InstructionSequence:&lt;compiled&gt;@&lt;compiled&gt;&gt;</span></code></pre>

  </div>
</div>
<div class='tags'>
  
</div>  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/iseq.c#L785-L805'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


785
786
787
788
789
790
791
792
793
794
795
796
797
798
799
800
801
802
803
804
805</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 785</span></pre>
<pre class='code cpp'>

static VALUE
iseqw_s_compile(int argc, VALUE *argv, VALUE self)
{
    VALUE src, file = Qnil, path = Qnil, line = INT2FIX(1), opt = Qnil;
    int i;

    rb_secure(1);

    i = rb_scan_args(argc, argv, &quot;1*:&quot;, &amp;src, NULL, &amp;opt);
    if (i &gt; 4+NIL_P(opt)) rb_error_arity(argc, 1, 5);
    switch (i) {
      case 5: opt = argv[--i];
      case 4: line = argv[--i];
      case 3: path = argv[--i];
      case 2: file = argv[--i];
    }
    if (NIL_P(file)) file = rb_fstring_cstr(&quot;&lt;compiled&gt;&quot;);
    if (NIL_P(line)) line = INT2FIX(1);

    return iseqw_new(rb_iseq_compile_with_option(src, file, path, line, 0, opt));
}
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Attribute Details</h2>
<section class='method_details first' id="compile_option-class_method">
  <h3 class='signature rw first'>
    .<strong>compile_option</strong>  &#x21d2; <code>options</code>  <span class="extras">(<span class='rw'>rw</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a hash of default options used by the Ruby iseq compiler.</p>

<p>For details, see <a href="#compile_option=-class_method" title="RubyVM::InstructionSequence.compile_option= (method)">.compile_option=</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/iseq.c#L913-L917'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


913
914
915
916
917</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 913</span></pre>
<pre class='code cpp'>

static VALUE
iseqw_s_compile_option_get(VALUE self)
{
    return make_compile_option_value(&amp;COMPILE_OPTION_DEFAULT);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="compile_option=-class_method">
  <h3 class='signature rw'>
    .<strong>compile_option=</strong>(options)   <span class="extras">(<span class='rw'>rw</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Sets the default values for various optimizations in the Ruby iseq
compiler.</p>

<p>Possible values for <code>options</code> include <code>true</code>, which enables all options,
<code>false</code> which disables all options, and <code>nil</code> which leaves all options
unchanged.</p>

<p>You can also pass a <a href="../Hash.html" title="Hash (class)">::Hash</a> of <code>options</code> that you want to change, any
options not present in the hash will be left unchanged.</p>

<p>Possible option names (which are keys in <code>options</code>) which can be set to
<code>true</code> or <code>false</code> include:</p>
<ul><li>
<p><code>:inline_const_cache</code></p>
</li><li>
<p><code>:instructions_unification</code></p>
</li><li>
<p><code>:operands_unification</code></p>
</li><li>
<p><code>:peephole_optimization</code></p>
</li><li>
<p><code>:specialized_instruction</code></p>
</li><li>
<p><code>:stack_caching</code></p>
</li><li>
<p><code>:tailcall_optimization</code></p>
</li><li>
<p><code>:trace_instruction</code></p>
</li></ul>

<p>Additionally, <code>:debug_level</code> can be set to an integer.</p>

<p>These default options can be overwritten for a single run of the iseq
compiler by passing any of the above values as the <code>options</code> parameter to
<a href="#new-class_method" title="RubyVM::InstructionSequence.new (method)">.new</a>, <a href="#compile-class_method" title="RubyVM::InstructionSequence.compile (method)">.compile</a> and <a href="#compile_file-class_method" title="RubyVM::InstructionSequence.compile_file (method)">.compile_file</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/iseq.c#L895-L903'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


895
896
897
898
899
900
901
902
903</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 895</span></pre>
<pre class='code cpp'>

static VALUE
iseqw_s_compile_option_set(VALUE self, VALUE opt)
{
    rb_compile_option_t option;
    rb_secure(1);
    make_compile_option(&amp;option, opt);
    COMPILE_OPTION_DEFAULT = option;
    return opt;
}
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="compile-class_method">
  <h3 class='signature  first'>
    <div class='inline-block'>
      <span class='overload'>.<strong>compile</strong>(source[, file[, path[, line[, options]]]])  &#x21d2; <code>iseq</code> </span>
      <span class='overload'>.<strong>new</strong>(source[, file[, path[, line[, options]]]])  &#x21d2; <code>iseq</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#new-class_method" title="RubyVM::InstructionSequence.new (method)">.new</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>
</section>

<section class='method_details' id="compile_file-class_method">
  <h3 class='signature '>
    .<strong>compile_file</strong>(file[, options])  &#x21d2; <code>iseq</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Takes <code>file</code>, a <a href="../String.html" title="String (class)">::String</a> with the location of a Ruby source file, reads,
parses and compiles the file, and returns <code>iseq</code>, the compiled
<code>InstructionSequence</code> with source location metadata set.</p>

<p>Optionally takes <code>options</code>, which can be <code>true</code>, <code>false</code> or a <a href="../Hash.html" title="Hash (class)">::Hash</a>, to
modify the default behavior of the Ruby iseq compiler.</p>

<p>For details regarding valid compile options see <a href="#compile_option=-class_method" title="RubyVM::InstructionSequence.compile_option= (method)">.compile_option=</a>.</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># /tmp/hello.rb
</span><span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hello, world!</span><span class='tstring_end'>&quot;</span></span>

<span class='comment'># elsewhere
</span><span class='const'><a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a></span><span class='op'>::</span><span class='const'>InstructionSequence</span><span class='period'>.</span><span class='id identifier rubyid_compile_file'>compile_file</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/tmp/hello.rb</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='comment'>#=&gt; &lt;RubyVM::InstructionSequence:&lt;main&gt;@/tmp/hello.rb&gt;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/iseq.c#L827-L861'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


827
828
829
830
831
832
833
834
835
836
837
838
839
840
841
842
843
844
845
846
847
848
849
850
851
852
853
854
855
856
857
858
859
860
861</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 827</span></pre>
<pre class='code cpp'>

static VALUE
iseqw_s_compile_file(int argc, VALUE *argv, VALUE self)
{
    VALUE file, line = INT2FIX(1), opt = Qnil;
    VALUE parser, f, exc = Qnil;
    NODE *node;
    rb_compile_option_t option;
    int i;

    rb_secure(1);
    i = rb_scan_args(argc, argv, &quot;1*:&quot;, &amp;file, NULL, &amp;opt);
    if (i &gt; 1+NIL_P(opt)) rb_error_arity(argc, 1, 2);
    switch (i) {
      case 2: opt = argv[--i];
    }
    FilePathValue(file);
    file = rb_fstring(file); /* rb_io_t-&gt;pathv gets frozen anyways */

    f = rb_file_open_str(file, &quot;r&quot;);

    parser = rb_parser_new();
    rb_parser_set_context(parser, NULL, FALSE);
    node = rb_parser_compile_file_path(parser, file, f, NUM2INT(line));
    if (!node) exc = GET_THREAD()-&gt;errinfo;

    rb_io_close(f);
    if (!node) rb_exc_raise(exc);

    make_compile_option(&amp;option, opt);

    return iseqw_new(rb_iseq_new_with_opt(node, rb_fstring_cstr(&quot;&lt;main&gt;&quot;),
					  file,
					  rb_realpath_internal(Qnil, file, 1),
					  line, NULL, ISEQ_TYPE_TOP, &amp;option));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="disasm-class_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>.<strong>disasm</strong>(body)  &#x21d2; <a href="../String.html" title="String (class)">String</a> </span>
      <span class='overload'>.<strong>disassemble</strong>(body)  &#x21d2; <a href="../String.html" title="String (class)">String</a> </span>
    </div>
    <span class='aliases'>Also known as: <span class='names'>.disassemble</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Takes <code>body</code>, a <a href="../Method.html" title="Method (class)">::Method</a> or <a href="../Proc.html" title="Proc (class)">::Proc</a> object, and returns a <a href="../String.html" title="String (class)">::String</a> with the
human readable instructions for <code>body</code>.</p>

<p>For a <a href="../Method.html" title="Method (class)">::Method</a> object:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># /tmp/method.rb
</span><span class='kw'>def</span> <span class='id identifier rubyid_hello'>hello</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hello, world</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>

<span class='id identifier rubyid_puts'>puts</span> <span class='const'><a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a></span><span class='op'>::</span><span class='const'>InstructionSequence</span><span class='period'>.</span><span class='id identifier rubyid_disasm'>disasm</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='lparen'>(</span><span class='symbeg'>:</span><span class='id identifier rubyid_hello'>hello</span><span class='rparen'>)</span><span class='rparen'>)</span></code></pre>

<p>Produces:</p>

<pre class="code ruby"><code class="ruby">== disasm: &lt;RubyVM::InstructionSequence:hello@/tmp/method.rb&gt;============
0000 trace            8                                               (   1)
0002 trace            1                                               (   2)
0004 putself
0005 putstring        &quot;hello, world&quot;
0007 send             :puts, 1, nil, 8, &lt;ic:0&gt;
0013 trace            16                                              (   3)
0015 leave                                                            (   2)</code></pre>

<p>For a Proc:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># /tmp/proc.rb
</span><span class='id identifier rubyid_p'>p</span> <span class='op'>=</span> <span class='id identifier rubyid_proc'>proc</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_num'>num</span> <span class='op'>=</span> <span class='int'>1</span> <span class='op'>+</span> <span class='int'>2</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_puts'>puts</span> <span class='const'><a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a></span><span class='op'>::</span><span class='const'>InstructionSequence</span><span class='period'>.</span><span class='id identifier rubyid_disasm'>disasm</span><span class='lparen'>(</span><span class='id identifier rubyid_p'>p</span><span class='rparen'>)</span></code></pre>

<p>Produces:</p>

<pre class="code ruby"><code class="ruby">== disasm: &lt;RubyVM::InstructionSequence:block in &lt;main&gt;@/tmp/proc.rb&gt;===
== catch table
| catch type: redo   st: 0000 ed: 0012 sp: 0000 cont: 0000
| catch type: next   st: 0000 ed: 0012 sp: 0000 cont: 0012
|------------------------------------------------------------------------
local table (size: 2, argc: 0 [opts: 0, rest: -1, post: 0, block: -1] s1)
[ 2] num
0000 trace            1                                               (   1)
0002 putobject        1
0004 putobject        2
0006 opt_plus         &lt;ic:1&gt;
0008 dup
0009 setlocal         num, 0
0012 leave</code></pre>

  </div>
</div>
<div class='tags'>
  
</div>  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/iseq.c#L1736-L1741'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1736
1737
1738
1739
1740
1741</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 1736</span></pre>
<pre class='code cpp'>

static VALUE
iseqw_s_disasm(VALUE klass, VALUE body)
{
    VALUE iseqw = iseqw_s_of(klass, body);
    return NIL_P(iseqw) ? Qnil : rb_iseq_disasm(iseqw_check(iseqw));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="disassemble-class_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>.<strong>disasm</strong>(body)  &#x21d2; <a href="../String.html" title="String (class)">String</a> </span>
      <span class='overload'>.<strong>disassemble</strong>(body)  &#x21d2; <a href="../String.html" title="String (class)">String</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#disasm-class_method" title="RubyVM::InstructionSequence.disasm (method)">.disasm</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/iseq.c#L2484-L2484'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


2484</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 2484</span></pre>
<pre class='code cpp'>

rb_define_singleton_method(rb_cISeq, &quot;disassemble&quot;, iseqw_s_disasm, 1);
</pre>
  </div>
</div>
</section>

<section class='method_details' id="load-class_method">
  <h3 class='signature nodoc'>
    .<strong>load</strong>(*args)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/iseq.c#L600-L606'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


600
601
602
603
604
605
606</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 600</span></pre>
<pre class='code cpp'>

static VALUE
iseq_s_load(int argc, VALUE *argv, VALUE self)
{
    VALUE data, opt=Qnil;
    rb_scan_args(argc, argv, &quot;11&quot;, &amp;data, &amp;opt);
    return iseq_load(data, NULL, opt);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="load_from_binary-class_method">
  <h3 class='signature '>
    .<strong>load_from_binary</strong>(binary)  &#x21d2; <code>iseq</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Load an iseq object from binary format <a href="../String.html" title="String (class)">::String</a> object created by
<a href="#to_binary-instance_method" title="RubyVM::InstructionSequence#to_binary (method)">#to_binary</a>.</p>

<p>This loader does not have a verifier, so that loading broken/modified
binary causes critical problem.</p>

<p>You should not load binary data provided by others. You should use binary
data translated by yourself.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/iseq.c#L2398-L2402'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


2398
2399
2400
2401
2402</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 2398</span></pre>
<pre class='code cpp'>

static VALUE
iseqw_s_load_from_binary(VALUE self, VALUE str)
{
    return iseqw_new(iseq_ibf_load(str));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="load_from_binary_extra_data-class_method">
  <h3 class='signature '>
    .<strong>load_from_binary_extra_data</strong>(binary)  &#x21d2; <a href="../String.html" title="String (class)">String</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Load extra data embed into binary format <a href="../String.html" title="String (class)">::String</a> object.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/iseq.c#L2410-L2414'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


2410
2411
2412
2413
2414</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 2410</span></pre>
<pre class='code cpp'>

static VALUE
iseqw_s_load_from_binary_extra_data(VALUE self, VALUE str)
{
    return  iseq_ibf_load_extra_data(str);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="of-class_method">
  <h3 class='signature '>
    .<strong>of</strong>(body)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the instruction sequence containing the given proc or method.</p>

<p>For example, using irb:</p>

<pre class="code ruby"><code class="ruby"># a proc
&gt; p = proc { num = 1 + 2 }
&gt; RubyVM::InstructionSequence.of(p)
&gt; #=&gt; &lt;RubyVM::InstructionSequence:block in irb_binding@(irb)&gt;

# for a method
&gt; def foo(bar); puts bar; end
&gt; RubyVM::InstructionSequence.of(method(:foo))
&gt; #=&gt; &lt;RubyVM::InstructionSequence:foo@(irb)&gt;</code></pre>

<p>Using <a href="#compile_file-class_method" title="RubyVM::InstructionSequence.compile_file (method)">.compile_file</a>:</p>

<pre class="code ruby"><code class="ruby"># /tmp/iseq_of.rb
def hello
  puts &quot;hello, world&quot;
end

$a_global_proc = proc { str = &#39;a&#39; + &#39;b&#39; }

# in irb
&gt; require &#39;/tmp/iseq_of.rb&#39;

# first the method hello
&gt; RubyVM::InstructionSequence.of(method(:hello))
&gt; #=&gt; #&lt;RubyVM::InstructionSequence:0x007fb73d7cb1d0&gt;

# then the global proc
&gt; RubyVM::InstructionSequence.of($a_global_proc)
&gt; #=&gt; #&lt;RubyVM::InstructionSequence:0x007fb73d7caf78&gt;</code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/iseq.c#L1663-L1682'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1663
1664
1665
1666
1667
1668
1669
1670
1671
1672
1673
1674
1675
1676
1677
1678
1679
1680
1681
1682</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 1663</span></pre>
<pre class='code cpp'>

static VALUE
iseqw_s_of(VALUE klass, VALUE body)
{
    const rb_iseq_t *iseq = NULL;

    rb_secure(1);

    if (rb_obj_is_proc(body)) {
	iseq = vm_proc_iseq(body);

	if (!rb_obj_is_iseq((VALUE)iseq)) {
	    iseq = NULL;
	}
    }
    else {
	iseq = rb_method_iseq(body);
    }

    return iseq ? iseqw_new(iseq) : Qnil;
}
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="absolute_path-instance_method">
  <h3 class='signature  first'>
    #<strong>absolute_path</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the absolute path of this instruction sequence.</p>

<p><code>nil</code> if the iseq was evaluated from a string.</p>

<p>For example, using <a href="#compile_file-class_method" title="RubyVM::InstructionSequence.compile_file (method)">.compile_file</a>:</p>

<pre class="code ruby"><code class="ruby"># /tmp/method.rb
def hello
  puts &quot;hello, world&quot;
end

# in irb
&gt; iseq = RubyVM::InstructionSequence.compile_file(&#39;/tmp/method.rb&#39;)
&gt; iseq.absolute_path #=&gt; /tmp/method.rb</code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/iseq.c#L1019-L1023'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1019
1020
1021
1022
1023</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 1019</span></pre>
<pre class='code cpp'>

static VALUE
iseqw_absolute_path(VALUE self)
{
    return rb_iseq_absolute_path(iseqw_check(self));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="base_label-instance_method">
  <h3 class='signature '>
    #<strong>base_label</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the base label of this instruction sequence.</p>

<p>For example, using irb:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_iseq'>iseq</span> <span class='op'>=</span> <span class='const'><a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a></span><span class='op'>::</span><span class='const'>InstructionSequence</span><span class='period'>.</span><span class='id identifier rubyid_compile'><a href="#compile-class_method" title="RubyVM::InstructionSequence.compile (method)">compile</a></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>num = 1 + 2</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='comment'>#=&gt; &lt;RubyVM::InstructionSequence:&lt;compiled&gt;@&lt;compiled&gt;&gt;
</span><span class='id identifier rubyid_iseq'>iseq</span><span class='period'>.</span><span class='id identifier rubyid_base_label'>base_label</span>
<span class='comment'>#=&gt; &quot;&lt;compiled&gt;&quot;</span></code></pre>

<p>Using <a href="#compile_file-class_method" title="RubyVM::InstructionSequence.compile_file (method)">.compile_file</a>:</p>

<pre class="code ruby"><code class="ruby"># /tmp/method.rb
def hello
  puts &quot;hello, world&quot;
end

# in irb
&gt; iseq = RubyVM::InstructionSequence.compile_file(&#39;/tmp/method.rb&#39;)
&gt; iseq.base_label #=&gt; &lt;main&gt;</code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/iseq.c#L1074-L1078'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1074
1075
1076
1077
1078</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 1074</span></pre>
<pre class='code cpp'>

static VALUE
iseqw_base_label(VALUE self)
{
    return rb_iseq_base_label(iseqw_check(self));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="disasm-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>disasm</strong>  &#x21d2; <a href="../String.html" title="String (class)">String</a> </span>
      <span class='overload'>#<strong>disassemble</strong>  &#x21d2; <a href="../String.html" title="String (class)">String</a> </span>
    </div>
    <span class='aliases'>Also known as: <span class='names'>#disassemble</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the instruction sequence as a <a href="../String.html" title="String (class)">::String</a> in human readable form.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_puts'>puts</span> <span class='const'><a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a></span><span class='op'>::</span><span class='const'>InstructionSequence</span><span class='period'>.</span><span class='id identifier rubyid_compile'><a href="#compile-class_method" title="RubyVM::InstructionSequence.compile (method)">compile</a></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1 + 2</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_disasm'>disasm</span></code></pre>

<p>Produces:</p>

<pre class="code ruby"><code class="ruby">== disasm: &lt;RubyVM::InstructionSequence:&lt;compiled&gt;@&lt;compiled&gt;&gt;==========
0000 trace            1                                               (   1)
0002 putobject        1
0004 putobject        2
0006 opt_plus         &lt;ic:1&gt;
0008 leave</code></pre>

  </div>
</div>
<div class='tags'>
  
</div>  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/iseq.c#L1622-L1626'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1622
1623
1624
1625
1626</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 1622</span></pre>
<pre class='code cpp'>

static VALUE
iseqw_disasm(VALUE self)
{
    return rb_iseq_disasm(iseqw_check(self));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="disassemble-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>disasm</strong>  &#x21d2; <a href="../String.html" title="String (class)">String</a> </span>
      <span class='overload'>#<strong>disassemble</strong>  &#x21d2; <a href="../String.html" title="String (class)">String</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#disasm-instance_method" title="RubyVM::InstructionSequence#disasm (method)">#disasm</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/iseq.c#L2444-L2444'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


2444</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 2444</span></pre>
<pre class='code cpp'>

rb_define_method(rb_cISeq, &quot;disassemble&quot;, iseqw_disasm, 0);
</pre>
  </div>
</div>
</section>

<section class='method_details' id="eval-instance_method">
  <h3 class='signature '>
    #<strong>eval</strong>  &#x21d2; <a href="../Object.html" title="Object (class)">Object</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Evaluates the instruction sequence and returns the result.</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a></span><span class='op'>::</span><span class='const'>InstructionSequence</span><span class='period'>.</span><span class='id identifier rubyid_compile'><a href="#compile-class_method" title="RubyVM::InstructionSequence.compile (method)">compile</a></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1 + 2</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_eval'>eval</span> <span class='comment'>#=&gt; 3</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/iseq.c#L948-L953'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


948
949
950
951
952
953</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 948</span></pre>
<pre class='code cpp'>

static VALUE
iseqw_eval(VALUE self)
{
    rb_secure(1);
    return rb_iseq_eval(iseqw_check(self));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="first_lineno-instance_method">
  <h3 class='signature '>
    #<strong>first_lineno</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the number of the first source line where the instruction sequence
was loaded from.</p>

<p>For example, using irb:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_iseq'>iseq</span> <span class='op'>=</span> <span class='const'><a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a></span><span class='op'>::</span><span class='const'>InstructionSequence</span><span class='period'>.</span><span class='id identifier rubyid_compile'><a href="#compile-class_method" title="RubyVM::InstructionSequence.compile (method)">compile</a></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>num = 1 + 2</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='comment'>#=&gt; &lt;RubyVM::InstructionSequence:&lt;compiled&gt;@&lt;compiled&gt;&gt;
</span><span class='id identifier rubyid_iseq'>iseq</span><span class='period'>.</span><span class='id identifier rubyid_first_lineno'>first_lineno</span>
<span class='comment'>#=&gt; 1</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/iseq.c#L1090-L1094'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1090
1091
1092
1093
1094</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 1090</span></pre>
<pre class='code cpp'>

static VALUE
iseqw_first_lineno(VALUE self)
{
    return rb_iseq_first_lineno(iseqw_check(self));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="inspect-instance_method">
  <h3 class='signature '>
    #<strong>inspect</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns a human-readable string representation of this instruction
sequence, including the <a href="#label-instance_method" title="RubyVM::InstructionSequence#label (method)">#label</a> and <a href="#path-instance_method" title="RubyVM::InstructionSequence#path (method)">#path</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/iseq.c#L959-L972'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


959
960
961
962
963
964
965
966
967
968
969
970
971
972</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 959</span></pre>
<pre class='code cpp'>

static VALUE
iseqw_inspect(VALUE self)
{
    const rb_iseq_t *iseq = iseqw_check(self);

    if (!iseq-&gt;body-&gt;location.label) {
        return rb_sprintf(&quot;#&lt;%s: uninitialized&gt;&quot;, rb_obj_classname(self));
    }
    else {
	return rb_sprintf(&quot;&lt;%s:%s@%s&gt;&quot;,
			  rb_obj_classname(self),
			  RSTRING_PTR(iseq-&gt;body-&gt;location.label), RSTRING_PTR(iseq-&gt;body-&gt;location.path));
    }
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="label-instance_method">
  <h3 class='signature '>
    #<strong>label</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the label of this instruction sequence.</p>

<p><code>&lt;main&gt;</code> if it&#39;s at the top level,
<code>&lt;compiled&gt;</code> if it was evaluated from a string.</p>

<p>For example, using irb:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_iseq'>iseq</span> <span class='op'>=</span> <span class='const'><a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a></span><span class='op'>::</span><span class='const'>InstructionSequence</span><span class='period'>.</span><span class='id identifier rubyid_compile'><a href="#compile-class_method" title="RubyVM::InstructionSequence.compile (method)">compile</a></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>num = 1 + 2</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='comment'>#=&gt; &lt;RubyVM::InstructionSequence:&lt;compiled&gt;@&lt;compiled&gt;&gt;
</span><span class='id identifier rubyid_iseq'>iseq</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span>
<span class='comment'>#=&gt; &quot;&lt;compiled&gt;&quot;</span></code></pre>

<p>Using <a href="#compile_file-class_method" title="RubyVM::InstructionSequence.compile_file (method)">.compile_file</a>:</p>

<pre class="code ruby"><code class="ruby"># /tmp/method.rb
def hello
  puts &quot;hello, world&quot;
end

# in irb
&gt; iseq = RubyVM::InstructionSequence.compile_file(&#39;/tmp/method.rb&#39;)
&gt; iseq.label #=&gt; &lt;main&gt;</code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/iseq.c#L1048-L1052'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1048
1049
1050
1051
1052</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 1048</span></pre>
<pre class='code cpp'>

static VALUE
iseqw_label(VALUE self)
{
    return rb_iseq_label(iseqw_check(self));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="line_trace_all-instance_method">
  <h3 class='signature '>
    #<strong>line_trace_all</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p><strong>Experimental MRI specific feature, only available as C level
api.</strong></p>

<p>Returns all <code>specified_line</code> events.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/iseq.c#L2283-L2289'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


2283
2284
2285
2286
2287
2288
2289</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 2283</span></pre>
<pre class='code cpp'>

VALUE
rb_iseqw_line_trace_all(VALUE iseqw)
{
    VALUE result = rb_ary_new();
    rb_iseqw_line_trace_each(iseqw, collect_trace, (void *)result);
    return result;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="line_trace_specify-instance_method">
  <h3 class='signature '>
    #<strong>line_trace_specify</strong>(pos, set)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p><strong>Experimental MRI specific feature, only available as C level
api.</strong></p>

<p>Set a <code>specified_line</code> event at the given line position, if the <code>set</code>
parameter is <code>true</code>.</p>

<p>This method is useful for building a debugger breakpoint at a specific
line.</p>

<p>A TypeError is raised if <code>set</code> is not boolean.</p>

<p>If <code>pos</code> is a negative integer a <a href="../TypeError.html" title="TypeError (class)">::TypeError</a> exception is raised.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/iseq.c#L2330-L2352'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


2330
2331
2332
2333
2334
2335
2336
2337
2338
2339
2340
2341
2342
2343
2344
2345
2346
2347
2348
2349
2350
2351
2352</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 2330</span></pre>
<pre class='code cpp'>

VALUE
rb_iseqw_line_trace_specify(VALUE iseqval, VALUE pos, VALUE set)
{
    struct set_specifc_data data;

    data.prev = 0;
    data.pos = NUM2INT(pos);
    if (data.pos &lt; 0) rb_raise(rb_eTypeError, &quot;`pos&#39; is negative&quot;);

    switch (set) {
      case Qtrue:  data.set = 1; break;
      case Qfalse: data.set = 0; break;
      default:
	rb_raise(rb_eTypeError, &quot;`set&#39; should be true/false&quot;);
    }

    rb_iseqw_line_trace_each(iseqval, line_trace_specify, (void *)&amp;data);

    if (data.prev == 0) {
	rb_raise(rb_eTypeError, &quot;`pos&#39; is out of range.&quot;);
    }
    return data.prev == 1 ? Qtrue : Qfalse;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="marshal_dump-instance_method">
  <h3 class='signature priv'>
    #<strong>marshal_dump</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/iseq.c#L2471-L2471'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


2471</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 2471</span></pre>
<pre class='code cpp'>

rb_define_private_method(rb_cISeq, &quot;marshal_dump&quot;, iseqw_marshal_dump, 0);
</pre>
  </div>
</div>
</section>

<section class='method_details' id="marshal_load-instance_method">
  <h3 class='signature priv'>
    #<strong>marshal_load</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/iseq.c#L2472-L2472'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


2472</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 2472</span></pre>
<pre class='code cpp'>

rb_define_private_method(rb_cISeq, &quot;marshal_load&quot;, iseqw_marshal_load, 1);
</pre>
  </div>
</div>
</section>

<section class='method_details' id="path-instance_method">
  <h3 class='signature '>
    #<strong>path</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the path of this instruction sequence.</p>

<p><code>&lt;compiled&gt;</code> if the iseq was evaluated from a string.</p>

<p>For example, using irb:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_iseq'>iseq</span> <span class='op'>=</span> <span class='const'><a href="../RubyVM.html" title="RubyVM (class)">RubyVM</a></span><span class='op'>::</span><span class='const'>InstructionSequence</span><span class='period'>.</span><span class='id identifier rubyid_compile'><a href="#compile-class_method" title="RubyVM::InstructionSequence.compile (method)">compile</a></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>num = 1 + 2</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='comment'>#=&gt; &lt;RubyVM::InstructionSequence:&lt;compiled&gt;@&lt;compiled&gt;&gt;
</span><span class='id identifier rubyid_iseq'>iseq</span><span class='period'>.</span><span class='id identifier rubyid_path'>path</span>
<span class='comment'>#=&gt; &quot;&lt;compiled&gt;&quot;</span></code></pre>

<p>Using <a href="#compile_file-class_method" title="RubyVM::InstructionSequence.compile_file (method)">.compile_file</a>:</p>

<pre class="code ruby"><code class="ruby"># /tmp/method.rb
def hello
  puts &quot;hello, world&quot;
end

# in irb
&gt; iseq = RubyVM::InstructionSequence.compile_file(&#39;/tmp/method.rb&#39;)
&gt; iseq.path #=&gt; /tmp/method.rb</code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/iseq.c#L997-L1001'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


997
998
999
1000
1001</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 997</span></pre>
<pre class='code cpp'>

static VALUE
iseqw_path(VALUE self)
{
    return rb_iseq_path(iseqw_check(self));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="to_a-instance_method">
  <h3 class='signature '>
    #<strong>to_a</strong>  &#x21d2; <a href="../Array.html" title="Array (class)">Array</a>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns an <a href="../Array.html" title="Array (class)">::Array</a> with 14 elements representing the instruction sequence
with the following data:</p>
<dl class="rdoc-list label-list"><dt>magic
<dd>
<p>A string identifying the data format. <strong>Always
<code>YARVInstructionSequence/SimpleDataFormat</code>.</strong></p>
</dd><dt>major_version
<dd>
<p>The major version of the instruction sequence.</p>
</dd><dt>minor_version
<dd>
<p>The minor version of the instruction sequence.</p>
</dd><dt>format_type
<dd>
<p>A number identifying the data format. <strong>Always 1</strong>.</p>
</dd><dt>misc
<dd>
<p>A hash containing:</p>
<dl class="rdoc-list label-list"><dt><code>:arg_size</code>
<dd>
<p>the total number of arguments taken by the method or the block (0 if
<em>iseq</em> doesn&#39;t represent a method or block)</p>
</dd><dt><code>:local_size</code>
<dd>
<p>the number of local variables + 1</p>
</dd><dt><code>:stack_max</code>
<dd>
<p>used in calculating the stack depth at which a SystemStackError is thrown.</p>
</dd></dl>
</dd><dt>#label
<dd>
<p>The name of the context (block, method, class, module, etc.) that this
instruction sequence belongs to.</p>

<p><code>&lt;main&gt;</code> if it&#39;s at the top level,
<code>&lt;compiled&gt;</code> if it was evaluated from a string.</p>
</dd><dt>#path
<dd>
<p>The relative path to the Ruby file where the instruction sequence was
loaded from.</p>

<p><code>&lt;compiled&gt;</code> if the iseq was evaluated from a string.</p>
</dd><dt>#absolute_path
<dd>
<p>The absolute path to the Ruby file where the instruction sequence was
loaded from.</p>

<p><code>nil</code> if the iseq was evaluated from a string.</p>
</dd><dt>#first_lineno
<dd>
<p>The number of the first source line where the instruction sequence was
loaded from.</p>
</dd><dt>type
<dd>
<p>The type of the instruction sequence.</p>

<p>Valid values are <code>:top</code>, <code>:method</code>,
<code>:block</code>, <code>:class</code>, <code>:rescue</code>,
<code>:ensure</code>, <code>:eval</code>, <code>:main</code>, and
<code>:defined_guard</code>.</p>
</dd><dt>locals
<dd>
<p>An array containing the names of all arguments and local variables as
symbols.</p>
</dd><dt>params
<dd>
<p>An Hash object containing parameter information.</p>

<p>More info about these values can be found in <code>vm_core.h</code>.</p>
</dd><dt>catch_table
<dd>
<p>A list of exceptions and control flow operators (rescue, next, redo, break,
etc.).</p>
</dd><dt>bytecode
<dd>
<p>An array of arrays containing the instruction names and operands that make
up the body of the instruction sequence.</p>
</dd></dl>

<p>Note that this format is MRI specific and version dependent.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/iseq.c#L1179-L1185'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1179
1180
1181
1182
1183
1184
1185</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 1179</span></pre>
<pre class='code cpp'>

static VALUE
iseqw_to_a(VALUE self)
{
    const rb_iseq_t *iseq = iseqw_check(self);
    rb_secure(1);
    return iseq_data_to_ary(iseq);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="to_binary-instance_method">
  <h3 class='signature '>
    #<strong>to_binary</strong>(extra_data = nil)  &#x21d2; <code>binary</code> <code>str</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns serialized iseq binary format data as a <a href="../String.html" title="String (class)">::String</a> object. A
corresponding iseq object is created by
<a href="../top-level-namespace.html" title="Top Level Namespace (root)">::</a>.load_from_binary() method.</p>

<p><a href="../String.html" title="String (class)">::String</a> extra_data will be saved with binary data. You can access this
data with
<a href="../top-level-namespace.html" title="Top Level Namespace (root)">::</a>.load_from_binary_extra_data(binary).</p>

<p>Note that the translated binary data is not portable. You can not move this
binary data to another machine. You can not use the binary data which is
created by another version/another architecture of Ruby.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/iseq.c#L2377-L2383'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


2377
2378
2379
2380
2381
2382
2383</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'iseq.c', line 2377</span></pre>
<pre class='code cpp'>

static VALUE
iseqw_to_binary(int argc, VALUE *argv, VALUE self)
{
    VALUE opt;
    rb_scan_args(argc, argv, &quot;01&quot;, &amp;opt);
    return iseq_ibf_dump(iseqw_check(self), opt);
}
</pre>
  </div>
</div>
</section>


<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.9.8 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.9.0 (ruby-2.5.0p-1)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>