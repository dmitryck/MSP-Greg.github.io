<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: Process::GID &mdash; Core Ruby-2.5.0 dev</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/common.css' />

<script type='text/javascript'>
  var pathId = "Process::GID",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
        <a href='../../../index.html'>Home</a> &raquo; 
        <a href='../../index.html'>Ruby-2.5.0</a> &raquo; 
        <a href='../index.html'>Core</a> &raquo; 
        <a href='../_index.html#alpha_G'>Index (G)</a> &raquo; 
        <a href="../Process.html" title="Process (module)">Process</a> &raquo; 
        <span class='title'><a id='t2_doc_top' href='#'>GID&nbsp;&#x25B2;</a></span>
      </div>

    <a id='list_href' href="../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='module'>
<h1>Module: Process::GID</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby/ruby/blob/trunk/process.c#L7894'>process.c</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>The <code>GID</code> module contains a collection of module functions which
can be used to portably get, set, and switch the current process&#39;s
real, effective, and saved group IDs.</p>

  </div>
</div>
</div>        

<h2 class='h2_sum' id='class_Attribute_summary'>Class Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature ro'>
      <a href="#re_exchangeable%3F-class_method" title="re_exchangeable? (class method)">.<strong>re_exchangeable?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns <code>true</code> if the real and effective group IDs of a process may be
exchanged on the current platform.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#rid-class_method" title="rid (class method)">.<strong>rid</strong>  &#x21d2; Integer </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="../Process.html#gid-class_method" title="Process.gid (method)">gid</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#sid_available%3F-class_method" title="sid_available? (class method)">.<strong>sid_available?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns <code>true</code> if the current platform has saved group ID functionality.</p></div>
    </div>
  </li>
</ul>
</div>
        

<h2 class='h2_sum' id='class_Method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature mf'>
      <a href="#change_privilege-class_method" title="change_privilege (class method)">.<strong>change_privilege</strong>(group)  &#x21d2; Integer </a>
    </span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>Change the current process&#39;s real and effective group ID to that
specified by <em>group</em>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature mf'>
      <a href="#eid-class_method" title="eid (class method)">.<strong>eid</strong>  &#x21d2; Integer </a>
    </span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="../Process.html#egid-class_method" title="Process.egid (method)">egid</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature mf'>
      <a href="#from_name-class_method" title="from_name (class method)">.<strong>from_name</strong>(name)  &#x21d2; GID </a>
    </span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>Get the group ID by the <em>name</em>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature mf'>
      <a href="#grant_privilege-class_method" title="grant_privilege (class method)">.<strong>grant_privilege</strong>(group)  &#x21d2; Integer </a>
    </span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>Set the effective group ID, and if possible, the saved group ID of the
process to the given <em>group</em>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature mf'>
      <a href="#re_exchange-class_method" title="re_exchange (class method)">.<strong>re_exchange</strong>  &#x21d2; Integer </a>
    </span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>Exchange real and effective group IDs and return the new effective group
ID.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature mf'>
      <a href="#switch-class_method" title="switch (class method)">.<strong>switch</strong>  &#x21d2; Integer </a>
    </span>
    <span class='mod_func note title'>mod_func</span>
    <div class='summary_desc'>
      <div class='inline'><p>Switch the effective and real group IDs of the current process.</p></div>
    </div>
  </li>
</ul>
</div>
<h2 class='y_details'>Class Attribute Details</h2>
<section class='method_details first' id="re_exchangeable?-class_method">
  <h3 class='signature ro  private first'>
    .<strong>re_exchangeable?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>, <span class='mod_func'>mod_func</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns <code>true</code> if the real and effective group IDs of a process may be
exchanged on the current platform.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/process.c#L6580-L6590'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


6580
6581
6582
6583
6584
6585
6586
6587
6588
6589
6590</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'process.c', line 6580</span></pre>
<pre class='code cpp'>

static VALUE
p_gid_exchangeable(void)
{
#if defined(HAVE_SETRESGID)
    return Qtrue;
#elif defined(HAVE_SETREGID) &amp;&amp; !defined(OBSOLETE_SETREGID)
    return Qtrue;
#else
    return Qfalse;
#endif
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="rid-class_method">
  <h3 class='signature ro  private'>
    .<strong>rid</strong>  &#x21d2; <a href="../Integer.html" title="Integer (class)">Integer</a>  <span class="extras">(<span class='readonly'>readonly</span>, <span class='mod_func'>mod_func</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="../Process.html#gid-class_method" title="Process.gid (method)">Process.gid</a>.</p>

  </div>
</div>

</section>

<section class='method_details' id="sid_available?-class_method">
  <h3 class='signature ro  private'>
    .<strong>sid_available?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>, <span class='mod_func'>mod_func</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns <code>true</code> if the current platform has saved group ID functionality.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/process.c#L6757-L6765'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


6757
6758
6759
6760
6761
6762
6763
6764
6765</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'process.c', line 6757</span></pre>
<pre class='code cpp'>

static VALUE
p_gid_have_saved_id(void)
{
#if defined(HAVE_SETRESGID) || defined(HAVE_SETEGID) || defined(_POSIX_SAVED_IDS)
    return Qtrue;
#else
    return Qfalse;
#endif
}
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="change_privilege-class_method">
  <h3 class='signature private first'>
    .<strong>change_privilege</strong>(group)  &#x21d2; <a href="../Integer.html" title="Integer (class)">Integer</a>  <span class="extras">(<span class='mod_func'>mod_func</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Change the current process&#39;s real and effective group ID to that
specified by <em>group</em>. Returns the new group ID. Not available on all
platforms.</p>

<pre class="code ruby"><code class="ruby"><span class='lbracket'>[</span><span class='const'><a href="../Process.html" title="Process (module)">Process</a></span><span class='period'>.</span><span class='id identifier rubyid_gid'><a href="../Process.html#gid-class_method" title="Process.gid (method)">gid</a></span><span class='comma'>,</span> <span class='const'><a href="../Process.html" title="Process (module)">Process</a></span><span class='period'>.</span><span class='id identifier rubyid_egid'><a href="../Process.html#egid-class_method" title="Process.egid (method)">egid</a></span><span class='rbracket'>]</span>          <span class='comment'>#=&gt; [0, 0]
</span><span class='const'><a href="../Process.html" title="Process (module)">Process</a></span><span class='op'>::</span><span class='const'>GID</span><span class='period'>.</span><span class='id identifier rubyid_change_privilege'>change_privilege</span><span class='lparen'>(</span><span class='int'>33</span><span class='rparen'>)</span>    <span class='comment'>#=&gt; 33
</span><span class='lbracket'>[</span><span class='const'><a href="../Process.html" title="Process (module)">Process</a></span><span class='period'>.</span><span class='id identifier rubyid_gid'><a href="../Process.html#gid-class_method" title="Process.gid (method)">gid</a></span><span class='comma'>,</span> <span class='const'><a href="../Process.html" title="Process (module)">Process</a></span><span class='period'>.</span><span class='id identifier rubyid_egid'><a href="../Process.html#egid-class_method" title="Process.egid (method)">egid</a></span><span class='rbracket'>]</span>          <span class='comment'>#=&gt; [33, 33]</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/process.c#L6100-L6253'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


6100
6101
6102
6103
6104
6105
6106
6107
6108
6109
6110
6111
6112
6113
6114
6115
6116
6117
6118
6119
6120
6121
6122
6123
6124
6125
6126
6127
6128
6129
6130
6131
6132
6133
6134
6135
6136
6137
6138
6139
6140
6141
6142
6143
6144
6145
6146
6147
6148
6149
6150
6151
6152
6153
6154
6155
6156
6157
6158
6159
6160
6161
6162
6163
6164
6165
6166
6167
6168
6169
6170
6171
6172
6173
6174
6175
6176
6177
6178
6179
6180
6181
6182
6183
6184
6185
6186
6187
6188
6189
6190
6191
6192
6193
6194
6195
6196
6197
6198
6199
6200
6201
6202
6203
6204
6205
6206
6207
6208
6209
6210
6211
6212
6213
6214
6215
6216
6217
6218
6219
6220
6221
6222
6223
6224
6225
6226
6227
6228
6229
6230
6231
6232
6233
6234
6235
6236
6237
6238
6239
6240
6241
6242
6243
6244
6245
6246
6247
6248
6249
6250
6251
6252
6253</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'process.c', line 6100</span></pre>
<pre class='code cpp'>

static VALUE
p_gid_change_privilege(VALUE obj, VALUE id)
{
    rb_gid_t gid;

    check_gid_switch();

    gid = OBJ2GID(id);

    if (geteuid() == 0) { /* root-user */
#if defined(HAVE_SETRESGID)
	if (setresgid(gid, gid, gid) &lt; 0) rb_sys_fail(0);
	SAVED_GROUP_ID = gid;
#elif defined HAVE_SETGID
	if (setgid(gid) &lt; 0) rb_sys_fail(0);
	SAVED_GROUP_ID = gid;
#elif defined(HAVE_SETREGID) &amp;&amp; !defined(OBSOLETE_SETREGID)
	if (getgid() == gid) {
	    if (SAVED_GROUP_ID == gid) {
		if (setregid(-1, gid) &lt; 0) rb_sys_fail(0);
	    }
	    else {
		if (gid == 0) { /* (r,e,s) == (root, y, x) */
		    if (setregid(-1, SAVED_GROUP_ID) &lt; 0) rb_sys_fail(0);
		    if (setregid(SAVED_GROUP_ID, 0) &lt; 0) rb_sys_fail(0);
		    SAVED_GROUP_ID = 0; /* (r,e,s) == (x, root, root) */
		    if (setregid(gid, gid) &lt; 0) rb_sys_fail(0);
		    SAVED_GROUP_ID = gid;
		}
		else { /* (r,e,s) == (z, y, x) */
		    if (setregid(0, 0) &lt; 0) rb_sys_fail(0);
		    SAVED_GROUP_ID = 0;
		    if (setregid(gid, gid) &lt; 0) rb_sys_fail(0);
		    SAVED_GROUP_ID = gid;
		}
	    }
	}
	else {
	    if (setregid(gid, gid) &lt; 0) rb_sys_fail(0);
	    SAVED_GROUP_ID = gid;
	}
#elif defined(HAVE_SETRGID) &amp;&amp; defined (HAVE_SETEGID)
	if (getgid() == gid) {
	    if (SAVED_GROUP_ID == gid) {
		if (setegid(gid) &lt; 0) rb_sys_fail(0);
	    }
	    else {
		if (gid == 0) {
		    if (setegid(gid) &lt; 0) rb_sys_fail(0);
		    if (setrgid(SAVED_GROUP_ID) &lt; 0) rb_sys_fail(0);
		    SAVED_GROUP_ID = 0;
		    if (setrgid(0) &lt; 0) rb_sys_fail(0);
		}
		else {
		    if (setrgid(0) &lt; 0) rb_sys_fail(0);
		    SAVED_GROUP_ID = 0;
		    if (setegid(gid) &lt; 0) rb_sys_fail(0);
		    if (setrgid(gid) &lt; 0) rb_sys_fail(0);
		    SAVED_GROUP_ID = gid;
		}
	    }
	}
	else {
	    if (setegid(gid) &lt; 0) rb_sys_fail(0);
	    if (setrgid(gid) &lt; 0) rb_sys_fail(0);
	    SAVED_GROUP_ID = gid;
	}
#else
	rb_notimplement();
#endif
    }
    else { /* unprivileged user */
#if defined(HAVE_SETRESGID)
	if (setresgid((getgid() == gid)? (rb_gid_t)-1: gid,
		      (getegid() == gid)? (rb_gid_t)-1: gid,
		      (SAVED_GROUP_ID == gid)? (rb_gid_t)-1: gid) &lt; 0) rb_sys_fail(0);
	SAVED_GROUP_ID = gid;
#elif defined(HAVE_SETREGID) &amp;&amp; !defined(OBSOLETE_SETREGID)
	if (SAVED_GROUP_ID == gid) {
	    if (setregid((getgid() == gid)? (rb_uid_t)-1: gid,
			 (getegid() == gid)? (rb_uid_t)-1: gid) &lt; 0)
		rb_sys_fail(0);
	}
	else if (getgid() != gid) {
	    if (setregid(gid, (getegid() == gid)? (rb_uid_t)-1: gid) &lt; 0)
		rb_sys_fail(0);
	    SAVED_GROUP_ID = gid;
	}
	else if (/* getgid() == gid &amp;&amp; */ getegid() != gid) {
	    if (setregid(getegid(), gid) &lt; 0) rb_sys_fail(0);
	    SAVED_GROUP_ID = gid;
	    if (setregid(gid, -1) &lt; 0) rb_sys_fail(0);
	}
	else { /* getgid() == gid &amp;&amp; getegid() == gid */
	    if (setregid(-1, SAVED_GROUP_ID) &lt; 0) rb_sys_fail(0);
	    if (setregid(SAVED_GROUP_ID, gid) &lt; 0) rb_sys_fail(0);
	    SAVED_GROUP_ID = gid;
	    if (setregid(gid, -1) &lt; 0) rb_sys_fail(0);
	}
#elif defined(HAVE_SETRGID) &amp;&amp; defined(HAVE_SETEGID)
	if (SAVED_GROUP_ID == gid) {
	    if (getegid() != gid &amp;&amp; setegid(gid) &lt; 0) rb_sys_fail(0);
	    if (getgid() != gid &amp;&amp; setrgid(gid) &lt; 0) rb_sys_fail(0);
	}
	else if (/* SAVED_GROUP_ID != gid &amp;&amp; */ getegid() == gid) {
	    if (getgid() != gid) {
		if (setrgid(gid) &lt; 0) rb_sys_fail(0);
		SAVED_GROUP_ID = gid;
	    }
	    else {
		if (setrgid(SAVED_GROUP_ID) &lt; 0) rb_sys_fail(0);
		SAVED_GROUP_ID = gid;
		if (setrgid(gid) &lt; 0) rb_sys_fail(0);
	    }
	}
	else if (/* getegid() != gid &amp;&amp; */ getgid() == gid) {
	    if (setegid(gid) &lt; 0) rb_sys_fail(0);
	    if (setrgid(SAVED_GROUP_ID) &lt; 0) rb_sys_fail(0);
	    SAVED_GROUP_ID = gid;
	    if (setrgid(gid) &lt; 0) rb_sys_fail(0);
	}
	else {
	    rb_syserr_fail(EPERM, 0);
	}
#elif defined HAVE_44BSD_SETGID
	if (getgid() == gid) {
	    /* (r,e,s)==(gid,?,?) ==&gt; (gid,gid,gid) */
	    if (setgid(gid) &lt; 0) rb_sys_fail(0);
	    SAVED_GROUP_ID = gid;
	}
	else {
	    rb_syserr_fail(EPERM, 0);
	}
#elif defined HAVE_SETEGID
	if (getgid() == gid &amp;&amp; SAVED_GROUP_ID == gid) {
	    if (setegid(gid) &lt; 0) rb_sys_fail(0);
	}
	else {
	    rb_syserr_fail(EPERM, 0);
	}
#elif defined HAVE_SETGID
	if (getgid() == gid &amp;&amp; SAVED_GROUP_ID == gid) {
	    if (setgid(gid) &lt; 0) rb_sys_fail(0);
	}
	else {
	    rb_syserr_fail(EPERM, 0);
	}
#else
	(void)gid;
	rb_notimplement();
#endif
    }
    return id;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="eid-class_method">
  <h3 class='signature private'>
    .<strong>eid</strong>  &#x21d2; <a href="../Integer.html" title="Integer (class)">Integer</a>  <span class="extras">(<span class='mod_func'>mod_func</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="../Process.html#egid-class_method" title="Process.egid (method)">Process.egid</a>.</p>

  </div>
</div>

</section>

<section class='method_details' id="from_name-class_method">
  <h3 class='signature private'>
    .<strong>from_name</strong>(name)  &#x21d2; <code>GID</code>  <span class="extras">(<span class='mod_func'>mod_func</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Get the group ID by the <em>name</em>. If the group is not found,
<a href="../ArgumentError.html" title="ArgumentError (class)">::ArgumentError</a> will be raised.</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="../Process.html" title="Process (module)">Process</a></span><span class='op'>::</span><span class='const'>GID</span><span class='period'>.</span><span class='id identifier rubyid_from_name'>from_name</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>wheel</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='comment'>#=&gt; 0
</span><span class='const'><a href="../Process.html" title="Process (module)">Process</a></span><span class='op'>::</span><span class='const'>GID</span><span class='period'>.</span><span class='id identifier rubyid_from_name'>from_name</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>nosuchgroup</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='comment'>#=&gt; can&#39;t find group for nosuchgroup (ArgumentError)</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/process.c#L5164-L5168'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


5164
5165
5166
5167
5168</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'process.c', line 5164</span></pre>
<pre class='code cpp'>

static VALUE
p_gid_from_name(VALUE self, VALUE id)
{
    return GIDT2NUM(OBJ2GID(id));
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="grant_privilege-class_method">
  <h3 class='signature private'>
    <div class='inline-block'>
      <span class='overload'>.<strong>grant_privilege</strong>(group)  &#x21d2; <a href="../Integer.html" title="Integer (class)">Integer</a>  <span class="extras">(<span class='mod_func'>mod_func</span>)</span></span>
      <span class='overload'>.<strong>eid=</strong>(group)  &#x21d2; <a href="../Integer.html" title="Integer (class)">Integer</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Set the effective group ID, and if possible, the saved group ID of the
process to the given <em>group</em>. Returns the new effective group ID.
Not available on all platforms.</p>

<pre class="code ruby"><code class="ruby"><span class='lbracket'>[</span><span class='const'><a href="../Process.html" title="Process (module)">Process</a></span><span class='period'>.</span><span class='id identifier rubyid_gid'><a href="../Process.html#gid-class_method" title="Process.gid (method)">gid</a></span><span class='comma'>,</span> <span class='const'><a href="../Process.html" title="Process (module)">Process</a></span><span class='period'>.</span><span class='id identifier rubyid_egid'><a href="../Process.html#egid-class_method" title="Process.egid (method)">egid</a></span><span class='rbracket'>]</span>          <span class='comment'>#=&gt; [0, 0]
</span><span class='const'><a href="../Process.html" title="Process (module)">Process</a></span><span class='op'>::</span><span class='const'>GID</span><span class='period'>.</span><span class='id identifier rubyid_grant_privilege'>grant_privilege</span><span class='lparen'>(</span><span class='int'>31</span><span class='rparen'>)</span>     <span class='comment'>#=&gt; 33
</span><span class='lbracket'>[</span><span class='const'><a href="../Process.html" title="Process (module)">Process</a></span><span class='period'>.</span><span class='id identifier rubyid_gid'><a href="../Process.html#gid-class_method" title="Process.gid (method)">gid</a></span><span class='comma'>,</span> <span class='const'><a href="../Process.html" title="Process (module)">Process</a></span><span class='period'>.</span><span class='id identifier rubyid_egid'><a href="../Process.html#egid-class_method" title="Process.egid (method)">egid</a></span><span class='rbracket'>]</span>          <span class='comment'>#=&gt; [0, 33]</span></code></pre>

  </div>
</div>
<div class='tags'>
  
</div>  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/process.c#L6501-L6506'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


6501
6502
6503
6504
6505
6506</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'process.c', line 6501</span></pre>
<pre class='code cpp'>

static VALUE
p_gid_grant_privilege(VALUE obj, VALUE id)
{
    rb_setegid_core(OBJ2GID(id));
    return id;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="re_exchange-class_method">
  <h3 class='signature private'>
    .<strong>re_exchange</strong>  &#x21d2; <a href="../Integer.html" title="Integer (class)">Integer</a>  <span class="extras">(<span class='mod_func'>mod_func</span>)</span>  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Exchange real and effective group IDs and return the new effective group
ID. Not available on all platforms.</p>

<pre class="code ruby"><code class="ruby"><span class='lbracket'>[</span><span class='const'><a href="../Process.html" title="Process (module)">Process</a></span><span class='period'>.</span><span class='id identifier rubyid_gid'><a href="../Process.html#gid-class_method" title="Process.gid (method)">gid</a></span><span class='comma'>,</span> <span class='const'><a href="../Process.html" title="Process (module)">Process</a></span><span class='period'>.</span><span class='id identifier rubyid_egid'><a href="../Process.html#egid-class_method" title="Process.egid (method)">egid</a></span><span class='rbracket'>]</span>   <span class='comment'>#=&gt; [0, 33]
</span><span class='const'><a href="../Process.html" title="Process (module)">Process</a></span><span class='op'>::</span><span class='const'>GID</span><span class='period'>.</span><span class='id identifier rubyid_re_exchange'>re_exchange</span>      <span class='comment'>#=&gt; 0
</span><span class='lbracket'>[</span><span class='const'><a href="../Process.html" title="Process (module)">Process</a></span><span class='period'>.</span><span class='id identifier rubyid_gid'><a href="../Process.html#gid-class_method" title="Process.gid (method)">gid</a></span><span class='comma'>,</span> <span class='const'><a href="../Process.html" title="Process (module)">Process</a></span><span class='period'>.</span><span class='id identifier rubyid_egid'><a href="../Process.html#egid-class_method" title="Process.egid (method)">egid</a></span><span class='rbracket'>]</span>   <span class='comment'>#=&gt; [33, 0]</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/process.c#L6605-L6630'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


6605
6606
6607
6608
6609
6610
6611
6612
6613
6614
6615
6616
6617
6618
6619
6620
6621
6622
6623
6624
6625
6626
6627
6628
6629
6630</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'process.c', line 6605</span></pre>
<pre class='code cpp'>

static VALUE
p_gid_exchange(VALUE obj)
{
    rb_gid_t gid;
#if defined(HAVE_SETRESGID) || (defined(HAVE_SETREGID) &amp;&amp; !defined(OBSOLETE_SETREGID))
    rb_gid_t egid;
#endif

    check_gid_switch();

    gid = getgid();
#if defined(HAVE_SETRESGID) || (defined(HAVE_SETREGID) &amp;&amp; !defined(OBSOLETE_SETREGID))
    egid = getegid();
#endif

#if defined(HAVE_SETRESGID)
    if (setresgid(egid, gid, gid) &lt; 0) rb_sys_fail(0);
    SAVED_GROUP_ID = gid;
#elif defined(HAVE_SETREGID) &amp;&amp; !defined(OBSOLETE_SETREGID)
    if (setregid(egid,gid) &lt; 0) rb_sys_fail(0);
    SAVED_GROUP_ID = gid;
#else
    rb_notimplement();
#endif
    return GIDT2NUM(gid);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="switch-class_method">
  <h3 class='signature private'>
    <div class='inline-block'>
      <span class='overload'>.<strong>switch</strong>  &#x21d2; <a href="../Integer.html" title="Integer (class)">Integer</a>  <span class="extras">(<span class='mod_func'>mod_func</span>)</span></span>
      <span class='overload'>.<strong>switch</strong>  &#x21d2; <a href="../Object.html" title="Object (class)">Object</a> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Switch the effective and real group IDs of the current process. If a
<em>block</em> is given, the group IDs will be switched back after the
block is executed. Returns the new effective group ID if called without a
block, and the return value of the block if one is given.</p>

  </div>
</div>
<div class='tags'>
  
</div>  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/process.c#L6790-L6825'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


6790
6791
6792
6793
6794
6795
6796
6797
6798
6799
6800
6801
6802
6803
6804
6805
6806
6807
6808
6809
6810
6811
6812
6813
6814
6815
6816
6817
6818
6819
6820
6821
6822
6823
6824
6825</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'process.c', line 6790</span></pre>
<pre class='code cpp'>

static VALUE
p_gid_switch(VALUE obj)
{
    rb_gid_t gid, egid;

    check_gid_switch();

    gid = getgid();
    egid = getegid();

    if (gid != egid) {
	proc_setegid(obj, GIDT2NUM(gid));
	if (rb_block_given_p()) {
	    under_gid_switch = 1;
	    return rb_ensure(rb_yield, Qnil, p_gid_sw_ensure, SAVED_GROUP_ID);
	}
	else {
	    return GIDT2NUM(egid);
	}
    }
    else if (egid != SAVED_GROUP_ID) {
	proc_setegid(obj, GIDT2NUM(SAVED_GROUP_ID));
	if (rb_block_given_p()) {
	    under_gid_switch = 1;
	    return rb_ensure(rb_yield, Qnil, p_gid_sw_ensure, egid);
	}
	else {
	    return GIDT2NUM(gid);
	}
    }
    else {
	rb_syserr_fail(EPERM, 0);
    }

    UNREACHABLE;
}
</pre>
  </div>
</div>
</section>


<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.9.8 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.9.0 (ruby-2.5.0p-1)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>