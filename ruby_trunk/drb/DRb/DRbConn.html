<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: DRb::DRbConn &mdash; drb  Ruby-2.5.0 dev</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/common.css' />

<script type='text/javascript'>
  var pathId = "DRb::DRbConn",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
        <a href='../../../index.html'>Home</a> &raquo; 
        <a href='../../index.html'>Ruby-2.5.0</a> &raquo; 
        <a href='../index.html'>drb</a> &raquo; 
        <a href='../_index.html#alpha_D'>Index (D)</a> &raquo; 
        <a href="../DRb.html" title="DRb (module)">DRb</a> &raquo; 
        <span class='title'><a id='t2_doc_top' href='#'>DRbConn&nbsp;&#x25B2;</a></span>
      </div>

    <a id='list_href' href="../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: DRb::DRbConn</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr>
      <td id='t2_inherits' class='box_2'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'>Object</span>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby/ruby/blob/trunk/lib/drb/drb.rb#L1206'>lib/drb/drb.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>Class handling the connection between a <a href="DRbObject.html" title="DRb::DRbObject (class)">DRbObject</a> and the server the
real object lives on.</p>

<p>This class maintains a pool of connections, to reduce the overhead of
starting and closing down connections for each method call.</p>

<p>This class is used internally by <a href="DRbObject.html" title="DRb::DRbObject (class)">DRbObject</a>.  The user does not
normally need to deal with it directly.</p>

  </div>
</div>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
<ul class='constants summary full'>
  <li>
    <span id='POOL_SIZE-constant' class='summary_signature nodoc'>POOL_SIZE =</span>
    <span class='nodoc note title'>Internal use only</span>
    <br/>
    <a class='repo' href='https://github.com/ruby/ruby/blob/trunk/lib/drb/drb.rb#L1207-L1207'># File 'lib/drb/drb.rb', line 1207</a>    <pre class='code ruby'><span class='int'>16</span></pre>
  </li>
</ul>
</div>
        

<h2 class='h2_sum' id='class_Method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(remote_uri)  &#x21d2; DRbConn </a>
    </span>
    <span class='note title constructor'>constructor</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#open-class_method" title=".open (class method)">.<strong>open</strong>(remote_uri)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>
</div>
        

<h2 class='h2_sum' id='instance_Attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature ro nodoc'>
      <a href="#alive%3F-instance_method" title="#alive? (instance method)">#<strong>alive?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature ro nodoc'>
      <a href="#uri-instance_method" title="#uri (instance method)">#<strong>uri</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>
</div>
        

<h2 class='h2_sum' id='instance_Method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#close-instance_method" title="#close (instance method)">#<strong>close</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#send_message-instance_method" title="#send_message (instance method)">#<strong>send_message</strong>(ref, msg_id, arg, block)  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>
</div>
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature nodoc first'>
    .<strong>new</strong>(remote_uri)  &#x21d2; <code>DRbConn</code> 
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  
</div>  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/lib/drb/drb.rb#L1246-L1249'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1246
1247
1248
1249</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/drb/drb.rb', line 1246</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_remote_uri'>remote_uri</span><span class='rparen'>)</span>  <span class='comment'># :nodoc:
</span>  <span class='ivar'>@uri</span> <span class='op'>=</span> <span class='id identifier rubyid_remote_uri'>remote_uri</span>
  <span class='ivar'>@protocol</span> <span class='op'>=</span> <span class='const'><a href="DRbProtocol.html" title="DRb::DRbProtocol (module)">DRbProtocol</a></span><span class='period'>.</span><span class='id identifier rubyid_open'><a href="DRbProtocol.html#open-class_method" title="DRb::DRbProtocol.open (method)">open</a></span><span class='lparen'>(</span><span class='id identifier rubyid_remote_uri'>remote_uri</span><span class='comma'>,</span> <span class='const'><a href="../DRb.html" title="DRb (module)">DRb</a></span><span class='period'>.</span><span class='id identifier rubyid_config'><a href="../DRb.html#config-class_method" title="DRb.config (method)">config</a></span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="open-class_method">
  <h3 class='signature nodoc first'>
    .<strong>open</strong>(remote_uri)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/lib/drb/drb.rb#L1211-L1244'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1211
1212
1213
1214
1215
1216
1217
1218
1219
1220
1221
1222
1223
1224
1225
1226
1227
1228
1229
1230
1231
1232
1233
1234
1235
1236
1237
1238
1239
1240
1241
1242
1243
1244</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/drb/drb.rb', line 1211</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_remote_uri'>remote_uri</span><span class='rparen'>)</span>  <span class='comment'># :nodoc:
</span>  <span class='kw'>begin</span>
    <span class='id identifier rubyid_conn'>conn</span> <span class='op'>=</span> <span class='kw'>nil</span>

    <span class='ivar'>@mutex</span><span class='period'>.</span><span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
      <span class='comment'>#FIXME
</span>      <span class='id identifier rubyid_new_pool'>new_pool</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
      <span class='ivar'>@pool</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_conn'>conn</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='kw'>and</span> <span class='id identifier rubyid_c'>c</span><span class='period'>.</span><span class='id identifier rubyid_uri'>uri</span> <span class='op'>==</span> <span class='id identifier rubyid_remote_uri'>remote_uri</span>
          <span class='id identifier rubyid_conn'>conn</span> <span class='op'>=</span> <span class='id identifier rubyid_c'>c</span> <span class='kw'>if</span> <span class='id identifier rubyid_c'>c</span><span class='period'>.</span><span class='id identifier rubyid_alive?'>alive?</span>
        <span class='kw'>else</span>
          <span class='id identifier rubyid_new_pool'>new_pool</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span> <span class='id identifier rubyid_c'>c</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
      <span class='ivar'>@pool</span> <span class='op'>=</span> <span class='id identifier rubyid_new_pool'>new_pool</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_conn'>conn</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_remote_uri'>remote_uri</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_conn'>conn</span>
    <span class='id identifier rubyid_succ'>succ</span><span class='comma'>,</span> <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='kw'>yield</span><span class='lparen'>(</span><span class='id identifier rubyid_conn'>conn</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_succ'>succ</span><span class='comma'>,</span> <span class='id identifier rubyid_result'>result</span>

  <span class='kw'>ensure</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_conn'>conn</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_succ'>succ</span>
        <span class='ivar'>@mutex</span><span class='period'>.</span><span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
          <span class='ivar'>@pool</span><span class='period'>.</span><span class='id identifier rubyid_unshift'>unshift</span><span class='lparen'>(</span><span class='id identifier rubyid_conn'>conn</span><span class='rparen'>)</span>
          <span class='ivar'>@pool</span><span class='period'>.</span><span class='id identifier rubyid_pop'>pop</span><span class='period'>.</span><span class='id identifier rubyid_close'>close</span> <span class='kw'>while</span> <span class='ivar'>@pool</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='const'><a href="#POOL_SIZE-constant" title="DRb::DRbConn::POOL_SIZE (constant)">POOL_SIZE</a></span>
        <span class='kw'>end</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_conn'>conn</span><span class='period'>.</span><span class='id identifier rubyid_close'>close</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="alive?-instance_method">
  <h3 class='signature ro  nodoc first'>
    #<strong>alive?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/lib/drb/drb.rb#L1262-L1265'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1262
1263
1264
1265</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/drb/drb.rb', line 1262</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_alive?'>alive?</span>  <span class='comment'># :nodoc:
</span>  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>unless</span> <span class='ivar'>@protocol</span>
  <span class='ivar'>@protocol</span><span class='period'>.</span><span class='id identifier rubyid_alive?'>alive?</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="uri-instance_method">
  <h3 class='signature ro  nodoc'>
    #<strong>uri</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/lib/drb/drb.rb#L1250-L1250'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1250</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/drb/drb.rb', line 1250</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_uri'>uri</span>  <span class='comment'># :nodoc:</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="close-instance_method">
  <h3 class='signature nodoc first'>
    #<strong>close</strong>  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/lib/drb/drb.rb#L1257-L1260'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1257
1258
1259
1260</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/drb/drb.rb', line 1257</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_close'>close</span>  <span class='comment'># :nodoc:
</span>  <span class='ivar'>@protocol</span><span class='period'>.</span><span class='id identifier rubyid_close'>close</span>
  <span class='ivar'>@protocol</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="send_message-instance_method">
  <h3 class='signature nodoc'>
    #<strong>send_message</strong>(ref, msg_id, arg, block)  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/lib/drb/drb.rb#L1252-L1255'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1252
1253
1254
1255</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'lib/drb/drb.rb', line 1252</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_send_message'>send_message</span><span class='lparen'>(</span><span class='id identifier rubyid_ref'>ref</span><span class='comma'>,</span> <span class='id identifier rubyid_msg_id'>msg_id</span><span class='comma'>,</span> <span class='id identifier rubyid_arg'>arg</span><span class='comma'>,</span> <span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>  <span class='comment'># :nodoc:
</span>  <span class='ivar'>@protocol</span><span class='period'>.</span><span class='id identifier rubyid_send_request'>send_request</span><span class='lparen'>(</span><span class='id identifier rubyid_ref'>ref</span><span class='comma'>,</span> <span class='id identifier rubyid_msg_id'>msg_id</span><span class='comma'>,</span> <span class='id identifier rubyid_arg'>arg</span><span class='comma'>,</span> <span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='ivar'>@protocol</span><span class='period'>.</span><span class='id identifier rubyid_recv_reply'>recv_reply</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.9.8 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.9.0 (ruby-2.5.0p-1)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>