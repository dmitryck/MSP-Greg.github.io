<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: OpenSSL::HMAC &mdash; openssl</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/common.css' />

<script type='text/javascript'>
  var pathId = "OpenSSL::HMAC",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
        <a href='../../../index.html'>Home</a> &raquo; 
        <a href='../../index.html'>Ruby-2.5.0</a> &raquo; 
        <a href='../index.html'>openssl</a> &raquo; 
        <a href='../_index.html#alpha_H'>Index (H)</a> &raquo; 
        <a href="../OpenSSL.html" title="OpenSSL (module)">OpenSSL</a> &raquo; 
        <span class='title'><a id='t2_doc_top' href='#'>HMAC&nbsp;&#x25B2;</a></span>
      </div>

    <a id='list_href' href="../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: OpenSSL::HMAC</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr>
      <td id='t2_inherits' class='box_2'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'>Object</span>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2 o'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/ruby/ruby/blob/trunk/ext/openssl/ossl_hmac.c#L343'>ext/openssl/ossl_hmac.c</a><span class='defines'>,<br /><a class='repo' href='https://github.com/ruby/ruby/blob/trunk/ext/openssl/ossl_hmac.c#L373'>ext/openssl/ossl_hmac.c</a></span>
      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p><code>HMAC</code> allows computing Hash-based Message Authentication Code
(HMAC). It is a type of message authentication code (MAC) involving a hash
function in combination with a key. <code>HMAC</code> can be used to verify
the integrity of a message as well as the authenticity.</p>

<p><code>HMAC</code> has a similar interface to <a href="Digest.html" title="OpenSSL::Digest (class)">Digest</a>.</p>

<h3 id="label-HMAC-SHA256+using+one-shot+interface">HMAC-SHA256 using one-shot interface</h3>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>key</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>message-to-be-authenticated</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_mac'>mac</span> <span class='op'>=</span> <span class='const'><a href="../OpenSSL.html" title="OpenSSL (module)">OpenSSL</a></span><span class='op'>::</span><span class='const'>HMAC</span><span class='period'>.</span><span class='id identifier rubyid_hexdigest'><a href="#hexdigest-class_method" title="OpenSSL::HMAC.hexdigest (method)">hexdigest</a></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SHA256</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span>
<span class='comment'>#=&gt; &quot;cddb0db23f469c8bf072b21fd837149bd6ace9ab771cceef14c9e517cc93282e&quot;</span></code></pre>

<h3 id="label-HMAC-SHA256+using+incremental+interface">HMAC-SHA256 using incremental interface</h3>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_data1'>data1</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>file1</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_data2'>data2</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>file2</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>key</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_digest'>digest</span> <span class='op'>=</span> <span class='const'><a href="../OpenSSL.html" title="OpenSSL (module)">OpenSSL</a></span><span class='op'>::</span><span class='const'><a href="Digest.html" title="OpenSSL::Digest (class)">Digest</a></span><span class='op'>::</span><span class='const'>SHA256</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_hmac'>hmac</span> <span class='op'>=</span> <span class='const'><a href="../OpenSSL.html" title="OpenSSL (module)">OpenSSL</a></span><span class='op'>::</span><span class='const'>HMAC</span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="#new-class_method" title="OpenSSL::HMAC.new (method)">new</a></span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_digest'>digest</span><span class='rparen'>)</span>
<span class='id identifier rubyid_hmac'>hmac</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_data1'>data1</span>
<span class='id identifier rubyid_hmac'>hmac</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_data2'>data2</span>
<span class='id identifier rubyid_mac'>mac</span> <span class='op'>=</span> <span class='id identifier rubyid_hmac'>hmac</span><span class='period'>.</span><span class='id identifier rubyid_digest'>digest</span></code></pre>

  </div>
</div>
</div>        

<h2 class='h2_sum' id='class_Method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#digest-class_method" title="digest (class method)">.<strong>digest</strong>(digest, key, data)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the authentication code as a binary string.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#hexdigest-class_method" title="hexdigest (class method)">.<strong>hexdigest</strong>(digest, key, data)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#to_s-class_method" title="OpenSSL::HMAC.to_s (method)">.to_s</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#inspect-class_method" title="inspect (class method)">.<strong>inspect</strong>(digest, key, data)  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#to_s-class_method" title="OpenSSL::HMAC.to_s (method)">.to_s</a>.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#new-class_method" title="new (class method)">.<strong>new</strong>(key, digest)  &#x21d2; HMAC </a>
    </span>
    <span class='note title constructor'>constructor</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns an instance of <code>HMAC</code> set with the key and digest
algorithm to be used.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#to_s-class_method" title="to_s (class method)">.<strong>to_s</strong>(digest, key, data)  &#x21d2; String </a>
      (also: .hexdigest, .inspect)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the authentication code as a hex-encoded string.</p></div>
    </div>
  </li>
</ul>
</div>
        

<h2 class='h2_sum' id='instance_Method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#<<-instance_method" title="#&lt;&lt; (instance method)">#<strong>&lt;&lt;</strong>(string)  &#x21d2; self </a>
      (also: #update)
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns <code>self</code> updated with the message to be authenticated.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#digest-instance_method" title="#digest (instance method)">#<strong>digest</strong>  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the authentication code an instance represents as a binary string.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#hexdigest-instance_method" title="#hexdigest (instance method)">#<strong>hexdigest</strong>  &#x21d2; String </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the authentication code an instance represents as a hex-encoded
string.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#reset-instance_method" title="#reset (instance method)">#<strong>reset</strong>  &#x21d2; self </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns <code>self</code> as it was when it was first initialized, with all processed
data cleared from it.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#update-instance_method" title="#update (instance method)">#<strong>update</strong>(string)  &#x21d2; self </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#<<-instance_method" title="OpenSSL::HMAC#&lt;&lt; (method)">#&amp;lt;&amp;lt;</a>.</p></div>
    </div>
  </li>
</ul>
</div>
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature  first'>
    .<strong>new</strong>(key, digest)  &#x21d2; <code>HMAC</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns an instance of <a href="../top-level-namespace.html" title="Top Level Namespace (root)">::</a> set with the key and digest
algorithm to be used. The instance represents the initial state of the
message authentication code before any data has been processed. To process
data with it, use the instance method <a href="#update-instance_method" title="OpenSSL::HMAC#update (method)">#update</a> with your data as an
argument.</p>

<h3 id="label-Example">Example</h3>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>key</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_digest'>digest</span> <span class='op'>=</span> <span class='const'><a href="../OpenSSL.html" title="OpenSSL (module)">OpenSSL</a></span><span class='op'>::</span><span class='const'><a href="Digest.html" title="OpenSSL::Digest (class)">Digest</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="Digest.html#new-class_method" title="OpenSSL::Digest.new (method)">new</a></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sha1</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_instance'>instance</span> <span class='op'>=</span> <span class='const'><a href="../OpenSSL.html" title="OpenSSL (module)">OpenSSL</a></span><span class='op'>::</span><span class='const'>HMAC</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_digest'>digest</span><span class='rparen'>)</span>
<span class='comment'>#=&gt; f42bb0eeb018ebbd4597ae7213711ec60760843f
</span><span class='id identifier rubyid_instance'>instance</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span>
<span class='comment'>#=&gt; OpenSSL::HMAC</span></code></pre>

<h3 id="label-A+note+about+comparisons">A note about comparisons</h3>

<p>Two instances won&#39;t be equal when they&#39;re compared, even if they
have the same value. Use <code>#to_s</code> or <a href="#hexdigest-instance_method" title="OpenSSL::HMAC#hexdigest (method)">#hexdigest</a> to return the
authentication code that the instance represents. For example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_other_instance'>other_instance</span> <span class='op'>=</span> <span class='const'><a href="../OpenSSL.html" title="OpenSSL (module)">OpenSSL</a></span><span class='op'>::</span><span class='const'>HMAC</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>key</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='const'><a href="../OpenSSL.html" title="OpenSSL (module)">OpenSSL</a></span><span class='op'>::</span><span class='const'><a href="Digest.html" title="OpenSSL::Digest (class)">Digest</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="Digest.html#new-class_method" title="OpenSSL::Digest.new (method)">new</a></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sha1</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='comment'>#=&gt; f42bb0eeb018ebbd4597ae7213711ec60760843f
</span><span class='id identifier rubyid_instance'>instance</span>
<span class='comment'>#=&gt; f42bb0eeb018ebbd4597ae7213711ec60760843f
</span><span class='id identifier rubyid_instance'>instance</span> <span class='op'>==</span> <span class='id identifier rubyid_other_instance'>other_instance</span>
<span class='comment'>#=&gt; false
</span><span class='id identifier rubyid_instance'>instance</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>==</span> <span class='id identifier rubyid_other_instance'>other_instance</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
<span class='comment'>#=&gt; true</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/ext/openssl/ossl_hmac.c#L105-L116'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


105
106
107
108
109
110
111
112
113
114
115
116</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/openssl/ossl_hmac.c', line 105</span></pre>
<pre class='code cpp'>

static VALUE
ossl_hmac_initialize(VALUE self, VALUE key, VALUE digest)
{
    HMAC_CTX *ctx;

    StringValue(key);
    GetHMAC(self, ctx);
    HMAC_Init_ex(ctx, RSTRING_PTR(key), RSTRING_LENINT(key),
		 GetDigestPtr(digest), NULL);

    return self;
}
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Method Details</h2>
<section class='method_details first' id="digest-class_method">
  <h3 class='signature  first'>
    .<strong>digest</strong>(digest, key, data)  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the authentication code as a binary string. The <code>digest</code>
parameter must be an instance of <a href="Digest.html" title="OpenSSL::Digest (class)">Digest</a>.</p>

<h3 id="label-Example">Example</h3>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>key</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>The quick brown fox jumps over the lazy dog</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_digest'>digest</span> <span class='op'>=</span> <span class='const'><a href="../OpenSSL.html" title="OpenSSL (module)">OpenSSL</a></span><span class='op'>::</span><span class='const'><a href="Digest.html" title="OpenSSL::Digest (class)">Digest</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="Digest.html#new-class_method" title="OpenSSL::Digest.new (method)">new</a></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sha1</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

<span class='id identifier rubyid_hmac'>hmac</span> <span class='op'>=</span> <span class='const'><a href="../OpenSSL.html" title="OpenSSL (module)">OpenSSL</a></span><span class='op'>::</span><span class='const'>HMAC</span><span class='period'>.</span><span class='id identifier rubyid_digest'>digest</span><span class='lparen'>(</span><span class='id identifier rubyid_digest'>digest</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span>
<span class='comment'>#=&gt; &quot;\xDE|\x9B\x85\xB8\xB7\x8A\xA6\xBC\x8Az6\xF7\n\x90p\x1C\x9D\xB4\xD9&quot;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/ext/openssl/ossl_hmac.c#L280-L292'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


280
281
282
283
284
285
286
287
288
289
290
291
292</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/openssl/ossl_hmac.c', line 280</span></pre>
<pre class='code cpp'>

static VALUE
ossl_hmac_s_digest(VALUE klass, VALUE digest, VALUE key, VALUE data)
{
    unsigned char *buf;
    unsigned int buf_len;

    StringValue(key);
    StringValue(data);
    buf = HMAC(GetDigestPtr(digest), RSTRING_PTR(key), RSTRING_LENINT(key),
	       (unsigned char *)RSTRING_PTR(data), RSTRING_LEN(data), NULL, &amp;buf_len);

    return rb_str_new((const char *)buf, buf_len);
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="hexdigest-class_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>.<strong>to_s</strong>(digest, key, data)  &#x21d2; <code>String</code> </span>
      <span class='overload'>.<strong>hexdigest</strong>(digest, key, data)  &#x21d2; <code>String</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#to_s-class_method" title="OpenSSL::HMAC.to_s (method)">.to_s</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>
</section>

<section class='method_details' id="inspect-class_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>.<strong>to_s</strong>(digest, key, data)  &#x21d2; <code>String</code> </span>
      <span class='overload'>.<strong>inspect</strong>(digest, key, data)  &#x21d2; <code>String</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#to_s-class_method" title="OpenSSL::HMAC.to_s (method)">.to_s</a>.</p>

  </div>
</div>

</section>

<section class='method_details' id="to_s-class_method">
  <h3 class='signature '>
    .<strong>to_s</strong>(digest, key, data)  &#x21d2; <code>String</code>     <span class='aliases'>Also known as: <span class='names'>.hexdigest, .inspect</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the authentication code as a hex-encoded string. The <a href="#digest-class_method" title="OpenSSL::HMAC.digest (method)">.digest</a>
parameter must be an instance of <a href="Digest.html" title="OpenSSL::Digest (class)">Digest</a>.</p>

<h3 id="label-Example">Example</h3>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>key</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>The quick brown fox jumps over the lazy dog</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_digest'>digest</span> <span class='op'>=</span> <span class='const'><a href="../OpenSSL.html" title="OpenSSL (module)">OpenSSL</a></span><span class='op'>::</span><span class='const'><a href="Digest.html" title="OpenSSL::Digest (class)">Digest</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="Digest.html#new-class_method" title="OpenSSL::Digest.new (method)">new</a></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sha1</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

<span class='id identifier rubyid_hmac'>hmac</span> <span class='op'>=</span> <span class='const'><a href="../OpenSSL.html" title="OpenSSL (module)">OpenSSL</a></span><span class='op'>::</span><span class='const'>HMAC</span><span class='period'>.</span><span class='id identifier rubyid_hexdigest'><a href="#hexdigest-class_method" title="OpenSSL::HMAC.hexdigest (method)">hexdigest</a></span><span class='lparen'>(</span><span class='id identifier rubyid_digest'>digest</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span>
<span class='comment'>#=&gt; &quot;de7c9b85b8b78aa6bc8a7a36f70a90701c9db4d9&quot;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/ext/openssl/ossl_hmac.c#L311-L330'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/openssl/ossl_hmac.c', line 311</span></pre>
<pre class='code cpp'>

static VALUE
ossl_hmac_s_hexdigest(VALUE klass, VALUE digest, VALUE key, VALUE data)
{
    unsigned char buf[EVP_MAX_MD_SIZE];
    unsigned int buf_len;
    VALUE ret;

    StringValue(key);
    StringValue(data);

    if (!HMAC(GetDigestPtr(digest), RSTRING_PTR(key), RSTRING_LENINT(key),
	      (unsigned char *)RSTRING_PTR(data), RSTRING_LEN(data),
	      buf, &amp;buf_len))
	ossl_raise(eHMACError, &quot;HMAC&quot;);

    ret = rb_str_new(NULL, buf_len * 2);
    ossl_bin2hex(buf, RSTRING_PTR(ret), buf_len);

    return ret;
}
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="<<-instance_method">
  <h3 class='signature  first'>
    #<strong>&lt;&lt;</strong>(string)  &#x21d2; <code>self</code>     <span class='aliases'>Also known as: <span class='names'>#update</span></span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns <code>self</code> updated with the message to be authenticated. Can be called
repeatedly with chunks of the message.</p>

<h3 id="label-Example">Example</h3>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_first_chunk'>first_chunk</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>The quick brown fox jumps </span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_second_chunk'>second_chunk</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>over the lazy dog</span><span class='tstring_end'>&#39;</span></span>

<span class='id identifier rubyid_instance'>instance</span><span class='period'>.</span><span class='id identifier rubyid_update'>update</span><span class='lparen'>(</span><span class='id identifier rubyid_first_chunk'>first_chunk</span><span class='rparen'>)</span>
<span class='comment'>#=&gt; 5b9a8038a65d571076d97fe783989e52278a492a
</span><span class='id identifier rubyid_instance'>instance</span><span class='period'>.</span><span class='id identifier rubyid_update'>update</span><span class='lparen'>(</span><span class='id identifier rubyid_second_chunk'>second_chunk</span><span class='rparen'>)</span>
<span class='comment'>#=&gt; de7c9b85b8b78aa6bc8a7a36f70a90701c9db4d9</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/ext/openssl/ossl_hmac.c#L152-L162'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


152
153
154
155
156
157
158
159
160
161
162</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/openssl/ossl_hmac.c', line 152</span></pre>
<pre class='code cpp'>

static VALUE
ossl_hmac_update(VALUE self, VALUE data)
{
    HMAC_CTX *ctx;

    StringValue(data);
    GetHMAC(self, ctx);
    HMAC_Update(ctx, (unsigned char *)RSTRING_PTR(data), RSTRING_LEN(data));

    return self;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="digest-instance_method">
  <h3 class='signature '>
    #<strong>digest</strong>  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the authentication code an instance represents as a binary string.</p>

<h3 id="label-Example">Example</h3>

<pre class="code ruby"><code class="ruby">instance = {OpenSSL::HMAC}.new(&#39;key&#39;, {OpenSSL::Digest}.new(&#39;sha1&#39;))
#=&gt; f42bb0eeb018ebbd4597ae7213711ec60760843f
instance.digest
#=&gt; &quot;\xF4+\xB0\xEE\xB0\x18\xEB\xBDE\x97\xAEr\x13q\x1E\xC6\a`\x84?&quot;</code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/ext/openssl/ossl_hmac.c#L194-L208'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


194
195
196
197
198
199
200
201
202
203
204
205
206
207
208</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/openssl/ossl_hmac.c', line 194</span></pre>
<pre class='code cpp'>

static VALUE
ossl_hmac_digest(VALUE self)
{
    HMAC_CTX *ctx;
    unsigned int buf_len;
    VALUE ret;

    GetHMAC(self, ctx);
    ret = rb_str_new(NULL, EVP_MAX_MD_SIZE);
    hmac_final(ctx, (unsigned char *)RSTRING_PTR(ret), &amp;buf_len);
    assert(buf_len &lt;= EVP_MAX_MD_SIZE);
    rb_str_set_len(ret, buf_len);

    return ret;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="hexdigest-instance_method">
  <h3 class='signature '>
    #<strong>hexdigest</strong>  &#x21d2; <code>String</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the authentication code an instance represents as a hex-encoded
string.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/ext/openssl/ossl_hmac.c#L217-L231'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


217
218
219
220
221
222
223
224
225
226
227
228
229
230
231</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/openssl/ossl_hmac.c', line 217</span></pre>
<pre class='code cpp'>

static VALUE
ossl_hmac_hexdigest(VALUE self)
{
    HMAC_CTX *ctx;
    unsigned char buf[EVP_MAX_MD_SIZE];
    unsigned int buf_len;
    VALUE ret;

    GetHMAC(self, ctx);
    hmac_final(ctx, buf, &amp;buf_len);
    ret = rb_str_new(NULL, buf_len * 2);
    ossl_bin2hex(buf, RSTRING_PTR(ret), buf_len);

    return ret;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="reset-instance_method">
  <h3 class='signature '>
    #<strong>reset</strong>  &#x21d2; <code>self</code>   </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns <code>self</code> as it was when it was first initialized, with all processed
data cleared from it.</p>

<h3 id="label-Example">Example</h3>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The quick brown fox jumps over the lazy dog</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_instance'>instance</span> <span class='op'>=</span> <span class='const'><a href="../OpenSSL.html" title="OpenSSL (module)">OpenSSL</a></span><span class='op'>::</span><span class='const'>HMAC</span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="#new-class_method" title="OpenSSL::HMAC.new (method)">new</a></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>key</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='const'><a href="../OpenSSL.html" title="OpenSSL (module)">OpenSSL</a></span><span class='op'>::</span><span class='const'><a href="Digest.html" title="OpenSSL::Digest (class)">Digest</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="Digest.html#new-class_method" title="OpenSSL::Digest.new (method)">new</a></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sha1</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='comment'>#=&gt; f42bb0eeb018ebbd4597ae7213711ec60760843f
</span>
<span class='id identifier rubyid_instance'>instance</span><span class='period'>.</span><span class='id identifier rubyid_update'>update</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span>
<span class='comment'>#=&gt; de7c9b85b8b78aa6bc8a7a36f70a90701c9db4d9
</span><span class='id identifier rubyid_instance'>instance</span><span class='period'>.</span><span class='id identifier rubyid_reset'>reset</span>
<span class='comment'>#=&gt; f42bb0eeb018ebbd4597ae7213711ec60760843f</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/ruby/ruby/blob/trunk/ext/openssl/ossl_hmac.c#L252-L261'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


252
253
254
255
256
257
258
259
260
261</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'ext/openssl/ossl_hmac.c', line 252</span></pre>
<pre class='code cpp'>

static VALUE
ossl_hmac_reset(VALUE self)
{
    HMAC_CTX *ctx;

    GetHMAC(self, ctx);
    HMAC_Init_ex(ctx, NULL, 0, NULL, NULL);

    return self;
}
</pre>
  </div>
</div>
</section>

<section class='method_details' id="update-instance_method">
  <h3 class='signature '>
    <div class='inline-block'>
      <span class='overload'>#<strong>&lt;&lt;</strong>(string)  &#x21d2; <code>self</code> </span>
      <span class='overload'>#<strong>update</strong>(string)  &#x21d2; <code>self</code> </span>
    </div>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#<<-instance_method" title="OpenSSL::HMAC#&lt;&lt; (method)">#&amp;lt;&amp;lt;</a>.</p>

  </div>
</div>
<div class='tags'>
  
</div>
</section>


<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.9.8 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.9.0 (ruby-2.5.0p-1)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>