<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: ActiveRecord::TestFixtures &mdash; Rails-master</title>

<link rel='stylesheet'  type='text/css' href='../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../css/common.css' />

<script type='text/javascript'>
  var pathId = "ActiveRecord::TestFixtures",
    relpath = '../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
        <a href='../../index.html'>Home</a> &raquo; 
        <a href='../index.html'>Rails-master</a> &raquo; 
        <a href='../_index.html#alpha_T'>Index (T)</a> &raquo; 
        <a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a> &raquo; 
        <span class='title'><a id='t2_doc_top' href='#'>TestFixtures&nbsp;&#x25B2;</a></span>
      </div>

    <a id='list_href' href="../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='module'>
<h1>Module: ActiveRecord::TestFixtures</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Namespace Children</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Modules:</div>
      <div class='box_11'>
          <a href="TestFixtures/ClassMethods.html" title="ActiveRecord::TestFixtures::ClassMethods (module)">ClassMethods</a>      </div>
    </td></tr>
    <tr><td class='box_h' colspan='2'>Extension / Inclusion / Inheritance Descendants</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Included In:</div>
      <div class='box_11'>
        <a href="../ActionController/TestCase.html" title="ActionController::TestCase (class)">::ActionController::TestCase</a>,
          <a href="../ActionDispatch/IntegrationTest.html" title="ActionDispatch::IntegrationTest (class)">::ActionDispatch::IntegrationTest</a>,
          <a href="../ActionDispatch/SystemTestCase.html" title="ActionDispatch::SystemTestCase (class)">::ActionDispatch::SystemTestCase</a>,
          <a href="../ActionMailer/TestCase.html" title="ActionMailer::TestCase (class)">::ActionMailer::TestCase</a>,
          <a href="../ActionView/TestCase.html" title="ActionView::TestCase (class)">::ActionView::TestCase</a>,
          <a href="../ActiveJob/TestCase.html" title="ActiveJob::TestCase (class)">::ActiveJob::TestCase</a>,
          <a href="../ActiveSupport/TestCase.html" title="ActiveSupport::TestCase (class)">::ActiveSupport::TestCase</a>,
          <a href="../Rails/Generators/TestCase.html" title="Rails::Generators::TestCase (class)">::Rails::Generators::TestCase</a>
      </div>
    </td></tr>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Class Chain:</div>
        <div class='box_22'>
          self,
          <a href="../ActiveSupport/Concern.html" title="ActiveSupport::Concern (module)">::ActiveSupport::Concern</a>
        </div>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/fixtures.rb#L847'>activerecord/lib/active_record/fixtures.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 class='h2_sum' id='class_Method_summary'>Class Method Summary</h2>
<div class='div_sum'>

<h3 class='inherited'><a href="../ActiveSupport/Concern.html" title="ActiveSupport::Concern (module)">::ActiveSupport::Concern</a> - Extended</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr>
      <td colspan='2'>
        <a class='i_m ' href="../ActiveSupport/Concern.html#append_features-instance_method" title="ActiveSupport::Concern#append_features (method)">append_features</a>,
        <a class='i_m ' href="../ActiveSupport/Concern.html#class_methods-instance_method" title="ActiveSupport::Concern#class_methods (method)">class_methods</a>,
        <a class='i_m ' href="../ActiveSupport/Concern.html#included-instance_method" title="ActiveSupport::Concern#included (method)">included</a>
      </td>
    </tr>
  </tbody>
</table></div>
</div>
        

<h2 class='h2_sum' id='instance_Attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature ro'>
      <a href="#run_in_transaction%3F-instance_method" title="#run_in_transaction? (instance method)">#<strong>run_in_transaction?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro priv'>
      <a href="#load_instances%3F-instance_method" title="#load_instances? (instance method)">#<strong>load_instances?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='note title private'>private</span>
  </li>
</ul>
</div>
        

<h2 class='h2_sum' id='instance_Method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#enlist_fixture_connections-instance_method" title="#enlist_fixture_connections (instance method)">#<strong>enlist_fixture_connections</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#setup_fixtures-instance_method" title="#setup_fixtures (instance method)">#<strong>setup_fixtures</strong>(config = ActiveRecord::Base)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#teardown_fixtures-instance_method" title="#teardown_fixtures (instance method)">#<strong>teardown_fixtures</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#instantiate_fixtures-instance_method" title="#instantiate_fixtures (instance method)">#<strong>instantiate_fixtures</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#load_fixtures-instance_method" title="#load_fixtures (instance method)">#<strong>load_fixtures</strong>(config)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#after_teardown-instance_method" title="#after_teardown (instance method)">#<strong>after_teardown</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#before_setup-instance_method" title="#before_setup (instance method)">#<strong>before_setup</strong>  </a>
    </span>
    <span class='nodoc note title'>Internal use only</span>
  </li>
</ul>
</div>
<h2 class='y_details'>DSL Calls</h2>
<section class='method_details first' id="included-dslcall">
<h3 class='signature'><strong>included</strong></h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/fixtures.rb#L860-L876'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


860
861
862
863
864
865
866
867
868
869
870
871
872
873
874
875
876</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 860</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_included'>included</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_class_attribute'>class_attribute</span> <span class='symbeg'>:</span><span class='id identifier rubyid_fixture_path'>fixture_path</span><span class='comma'>,</span> <span class='label'>instance_writer:</span> <span class='kw'>false</span>
  <span class='id identifier rubyid_class_attribute'>class_attribute</span> <span class='symbeg'>:</span><span class='id identifier rubyid_fixture_table_names'>fixture_table_names</span>
  <span class='id identifier rubyid_class_attribute'>class_attribute</span> <span class='symbeg'>:</span><span class='id identifier rubyid_fixture_class_names'>fixture_class_names</span>
  <span class='id identifier rubyid_class_attribute'>class_attribute</span> <span class='symbeg'>:</span><span class='id identifier rubyid_use_transactional_tests'>use_transactional_tests</span>
  <span class='id identifier rubyid_class_attribute'>class_attribute</span> <span class='symbeg'>:</span><span class='id identifier rubyid_use_instantiated_fixtures'>use_instantiated_fixtures</span> <span class='comment'># true, false, or :no_instances
</span>  <span class='id identifier rubyid_class_attribute'>class_attribute</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pre_loaded_fixtures'>pre_loaded_fixtures</span>
  <span class='id identifier rubyid_class_attribute'>class_attribute</span> <span class='symbeg'>:</span><span class='id identifier rubyid_config'>config</span>

  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_fixture_table_names'>fixture_table_names</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_use_instantiated_fixtures'>use_instantiated_fixtures</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_pre_loaded_fixtures'>pre_loaded_fixtures</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_config'>config</span> <span class='op'>=</span> <span class='const'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="Base.html" title="ActiveRecord::Base (class)">Base</a></span>

  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_fixture_class_names'>fixture_class_names</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_use_transactional_tests'>use_transactional_tests</span> <span class='op'>=</span> <span class='kw'>true</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="load_instances?-instance_method">
  <h3 class='signature ro priv first'>
    #<strong>load_instances?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>, <span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/fixtures.rb#L1044-L1046'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1044
1045
1046</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 1044</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_load_instances?'>load_instances?</span>
  <span class='id identifier rubyid_use_instantiated_fixtures'>use_instantiated_fixtures</span> <span class='op'>!=</span> <span class='symbeg'>:</span><span class='id identifier rubyid_no_instances'>no_instances</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="run_in_transaction?-instance_method">
  <h3 class='signature ro'>
    #<strong>run_in_transaction?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/fixtures.rb#L945-L948'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


945
946
947
948</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 945</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_run_in_transaction?'>run_in_transaction?</span>
  <span class='id identifier rubyid_use_transactional_tests'>use_transactional_tests</span> <span class='op'>&amp;&amp;</span>
    <span class='op'>!</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_uses_transaction?'>uses_transaction?</span><span class='lparen'>(</span><span class='id identifier rubyid_method_name'>method_name</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="after_teardown-instance_method">
  <h3 class='signature nodoc first'>
    #<strong>after_teardown</strong>  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/fixtures.rb#L855-L858'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


855
856
857
858</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 855</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_after_teardown'>after_teardown</span> <span class='comment'># :nodoc:
</span>  <span class='kw'>super</span>
  <span class='id identifier rubyid_teardown_fixtures'>teardown_fixtures</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="before_setup-instance_method">
  <h3 class='signature nodoc'>
    #<strong>before_setup</strong>  
  </h3>
  <div class='note nodoc inline-block'>
    <strong>This method is for internal use only.</strong>
  </div><div></div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/fixtures.rb#L850-L853'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


850
851
852
853</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 850</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_before_setup'>before_setup</span> <span class='comment'># :nodoc:
</span>  <span class='id identifier rubyid_setup_fixtures'>setup_fixtures</span>
  <span class='kw'>super</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="enlist_fixture_connections-instance_method">
  <h3 class='signature '>
    #<strong>enlist_fixture_connections</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/fixtures.rb#L1022-L1024'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1022
1023
1024</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 1022</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_enlist_fixture_connections'>enlist_fixture_connections</span>
  <span class='const'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="Base.html" title="ActiveRecord::Base (class)">Base</a></span><span class='period'>.</span><span class='id identifier rubyid_connection_handler'><a href="Base.html#connection_handler-class_method" title="ActiveRecord::Base.connection_handler (method)">connection_handler</a></span><span class='period'>.</span><span class='id identifier rubyid_connection_pool_list'>connection_pool_list</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbeg'>:</span><span class='id identifier rubyid_connection'>connection</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="instantiate_fixtures-instance_method">
  <h3 class='signature priv'>
    #<strong>instantiate_fixtures</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/fixtures.rb#L1032-L1042'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1032
1033
1034
1035
1036
1037
1038
1039
1040
1041
1042</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 1032</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_instantiate_fixtures'>instantiate_fixtures</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_pre_loaded_fixtures'>pre_loaded_fixtures</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>RuntimeError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Load fixtures before instantiating them.</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='const'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="FixtureSet.html" title="ActiveRecord::FixtureSet (class)">FixtureSet</a></span><span class='period'>.</span><span class='id identifier rubyid_all_loaded_fixtures'><a href="FixtureSet.html#all_loaded_fixtures-class_method" title="ActiveRecord::FixtureSet.all_loaded_fixtures (method)">all_loaded_fixtures</a></span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='const'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="FixtureSet.html" title="ActiveRecord::FixtureSet (class)">FixtureSet</a></span><span class='period'>.</span><span class='id identifier rubyid_instantiate_all_loaded_fixtures'><a href="FixtureSet.html#instantiate_all_loaded_fixtures-class_method" title="ActiveRecord::FixtureSet.instantiate_all_loaded_fixtures (method)">instantiate_all_loaded_fixtures</a></span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_load_instances?'>load_instances?</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>RuntimeError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Load fixtures before instantiating them.</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='ivar'>@loaded_fixtures</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='ivar'>@loaded_fixtures</span><span class='period'>.</span><span class='id identifier rubyid_each_value'>each_value</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_fixture_set'>fixture_set</span><span class='op'>|</span>
      <span class='const'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="FixtureSet.html" title="ActiveRecord::FixtureSet (class)">FixtureSet</a></span><span class='period'>.</span><span class='id identifier rubyid_instantiate_fixtures'><a href="FixtureSet.html#instantiate_fixtures-class_method" title="ActiveRecord::FixtureSet.instantiate_fixtures (method)">instantiate_fixtures</a></span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_fixture_set'>fixture_set</span><span class='comma'>,</span> <span class='id identifier rubyid_load_instances?'>load_instances?</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="load_fixtures-instance_method">
  <h3 class='signature priv'>
    #<strong>load_fixtures</strong>(config)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/fixtures.rb#L1027-L1030'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1027
1028
1029
1030</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 1027</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_load_fixtures'>load_fixtures</span><span class='lparen'>(</span><span class='id identifier rubyid_config'>config</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_fixtures'>fixtures</span> <span class='op'>=</span> <span class='const'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="FixtureSet.html" title="ActiveRecord::FixtureSet (class)">FixtureSet</a></span><span class='period'>.</span><span class='id identifier rubyid_create_fixtures'><a href="FixtureSet.html#create_fixtures-class_method" title="ActiveRecord::FixtureSet.create_fixtures (method)">create_fixtures</a></span><span class='lparen'>(</span><span class='id identifier rubyid_fixture_path'>fixture_path</span><span class='comma'>,</span> <span class='id identifier rubyid_fixture_table_names'>fixture_table_names</span><span class='comma'>,</span> <span class='id identifier rubyid_fixture_class_names'>fixture_class_names</span><span class='comma'>,</span> <span class='id identifier rubyid_config'>config</span><span class='rparen'>)</span>
  <span class='const'><a href="../Hash.html" title="Hash (class)">Hash</a></span><span class='lbracket'>[</span><span class='id identifier rubyid_fixtures'>fixtures</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='lbracket'>[</span><span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_f'>f</span><span class='rbracket'>]</span> <span class='rbrace'>}</span><span class='rbracket'>]</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="setup_fixtures-instance_method">
  <h3 class='signature '>
    #<strong>setup_fixtures</strong>(config = ActiveRecord::Base)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/fixtures.rb#L950-L1004'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


950
951
952
953
954
955
956
957
958
959
960
961
962
963
964
965
966
967
968
969
970
971
972
973
974
975
976
977
978
979
980
981
982
983
984
985
986
987
988
989
990
991
992
993
994
995
996
997
998
999
1000
1001
1002
1003
1004</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 950</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_setup_fixtures'>setup_fixtures</span><span class='lparen'>(</span><span class='id identifier rubyid_config'>config</span> <span class='op'>=</span> <span class='const'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="Base.html" title="ActiveRecord::Base (class)">Base</a></span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_pre_loaded_fixtures'>pre_loaded_fixtures</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_use_transactional_tests'>use_transactional_tests</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>RuntimeError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>pre_loaded_fixtures requires use_transactional_tests</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='ivar'>@fixture_cache</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@fixture_connections</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='cvar'>@@already_loaded_fixtures</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@connection_subscriber</span> <span class='op'>=</span> <span class='kw'>nil</span>

  <span class='comment'># Load fixtures once and begin transaction.
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_run_in_transaction?'>run_in_transaction?</span>
    <span class='kw'>if</span> <span class='cvar'>@@already_loaded_fixtures</span><span class='lbracket'>[</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='rbracket'>]</span>
      <span class='ivar'>@loaded_fixtures</span> <span class='op'>=</span> <span class='cvar'>@@already_loaded_fixtures</span><span class='lbracket'>[</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='rbracket'>]</span>
    <span class='kw'>else</span>
      <span class='ivar'>@loaded_fixtures</span> <span class='op'>=</span> <span class='id identifier rubyid_load_fixtures'>load_fixtures</span><span class='lparen'>(</span><span class='id identifier rubyid_config'>config</span><span class='rparen'>)</span>
      <span class='cvar'>@@already_loaded_fixtures</span><span class='lbracket'>[</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='ivar'>@loaded_fixtures</span>
    <span class='kw'>end</span>

    <span class='comment'># Begin transactions for connections already established
</span>    <span class='ivar'>@fixture_connections</span> <span class='op'>=</span> <span class='id identifier rubyid_enlist_fixture_connections'>enlist_fixture_connections</span>
    <span class='ivar'>@fixture_connections</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_connection'>connection</span><span class='op'>|</span>
      <span class='id identifier rubyid_connection'>connection</span><span class='period'>.</span><span class='id identifier rubyid_begin_transaction'>begin_transaction</span> <span class='label'>joinable:</span> <span class='kw'>false</span>
      <span class='id identifier rubyid_connection'>connection</span><span class='period'>.</span><span class='id identifier rubyid_pool'>pool</span><span class='period'>.</span><span class='id identifier rubyid_lock_thread'>lock_thread</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='kw'>end</span>

    <span class='comment'># When connections are established in the future, begin a transaction too
</span>    <span class='ivar'>@connection_subscriber</span> <span class='op'>=</span> <span class='const'><a href="../ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="../ActiveSupport/Notifications.html" title="ActiveSupport::Notifications (module)">Notifications</a></span><span class='period'>.</span><span class='id identifier rubyid_subscribe'><a href="../ActiveSupport/Notifications.html#subscribe-class_method" title="ActiveSupport::Notifications.subscribe (method)">subscribe</a></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>!connection.active_record</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid__'>_</span><span class='comma'>,</span> <span class='id identifier rubyid__'>_</span><span class='comma'>,</span> <span class='id identifier rubyid__'>_</span><span class='comma'>,</span> <span class='id identifier rubyid__'>_</span><span class='comma'>,</span> <span class='id identifier rubyid_payload'>payload</span><span class='op'>|</span>
      <span class='id identifier rubyid_spec_name'>spec_name</span> <span class='op'>=</span> <span class='id identifier rubyid_payload'>payload</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_spec_name'>spec_name</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_payload'>payload</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='symbeg'>:</span><span class='id identifier rubyid_spec_name'>spec_name</span><span class='rparen'>)</span>

      <span class='kw'>if</span> <span class='id identifier rubyid_spec_name'>spec_name</span>
        <span class='kw'>begin</span>
          <span class='id identifier rubyid_connection'>connection</span> <span class='op'>=</span> <span class='const'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="Base.html" title="ActiveRecord::Base (class)">Base</a></span><span class='period'>.</span><span class='id identifier rubyid_connection_handler'><a href="Base.html#connection_handler-class_method" title="ActiveRecord::Base.connection_handler (method)">connection_handler</a></span><span class='period'>.</span><span class='id identifier rubyid_retrieve_connection'>retrieve_connection</span><span class='lparen'>(</span><span class='id identifier rubyid_spec_name'>spec_name</span><span class='rparen'>)</span>
        <span class='kw'>rescue</span> <span class='const'><a href="ConnectionNotEstablished.html" title="ActiveRecord::ConnectionNotEstablished (class)">ConnectionNotEstablished</a></span>
          <span class='id identifier rubyid_connection'>connection</span> <span class='op'>=</span> <span class='kw'>nil</span>
        <span class='kw'>end</span>

        <span class='kw'>if</span> <span class='id identifier rubyid_connection'>connection</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='ivar'>@fixture_connections</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_connection'>connection</span><span class='rparen'>)</span>
          <span class='id identifier rubyid_connection'>connection</span><span class='period'>.</span><span class='id identifier rubyid_begin_transaction'>begin_transaction</span> <span class='label'>joinable:</span> <span class='kw'>false</span>
          <span class='id identifier rubyid_connection'>connection</span><span class='period'>.</span><span class='id identifier rubyid_pool'>pool</span><span class='period'>.</span><span class='id identifier rubyid_lock_thread'>lock_thread</span> <span class='op'>=</span> <span class='kw'>true</span>
          <span class='ivar'>@fixture_connections</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_connection'>connection</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

  <span class='comment'># Load fixtures for every test.
</span>  <span class='kw'>else</span>
    <span class='const'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="FixtureSet.html" title="ActiveRecord::FixtureSet (class)">FixtureSet</a></span><span class='period'>.</span><span class='id identifier rubyid_reset_cache'><a href="FixtureSet.html#reset_cache-class_method" title="ActiveRecord::FixtureSet.reset_cache (method)">reset_cache</a></span>
    <span class='cvar'>@@already_loaded_fixtures</span><span class='lbracket'>[</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='ivar'>@loaded_fixtures</span> <span class='op'>=</span> <span class='id identifier rubyid_load_fixtures'>load_fixtures</span><span class='lparen'>(</span><span class='id identifier rubyid_config'>config</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># Instantiate fixtures for every test if requested.
</span>  <span class='id identifier rubyid_instantiate_fixtures'>instantiate_fixtures</span> <span class='kw'>if</span> <span class='id identifier rubyid_use_instantiated_fixtures'>use_instantiated_fixtures</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="teardown_fixtures-instance_method">
  <h3 class='signature '>
    #<strong>teardown_fixtures</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/fixtures.rb#L1006-L1020'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1006
1007
1008
1009
1010
1011
1012
1013
1014
1015
1016
1017
1018
1019
1020</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/fixtures.rb', line 1006</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_teardown_fixtures'>teardown_fixtures</span>
  <span class='comment'># Rollback changes if a transaction is active.
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_run_in_transaction?'>run_in_transaction?</span>
    <span class='const'><a href="../ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="../ActiveSupport/Notifications.html" title="ActiveSupport::Notifications (module)">Notifications</a></span><span class='period'>.</span><span class='id identifier rubyid_unsubscribe'><a href="../ActiveSupport/Notifications.html#unsubscribe-class_method" title="ActiveSupport::Notifications.unsubscribe (method)">unsubscribe</a></span><span class='lparen'>(</span><span class='ivar'>@connection_subscriber</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='ivar'>@connection_subscriber</span>
    <span class='ivar'>@fixture_connections</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_connection'>connection</span><span class='op'>|</span>
      <span class='id identifier rubyid_connection'>connection</span><span class='period'>.</span><span class='id identifier rubyid_rollback_transaction'>rollback_transaction</span> <span class='kw'>if</span> <span class='id identifier rubyid_connection'>connection</span><span class='period'>.</span><span class='id identifier rubyid_transaction_open?'>transaction_open?</span>
      <span class='id identifier rubyid_connection'>connection</span><span class='period'>.</span><span class='id identifier rubyid_pool'>pool</span><span class='period'>.</span><span class='id identifier rubyid_lock_thread'>lock_thread</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='kw'>end</span>
    <span class='ivar'>@fixture_connections</span><span class='period'>.</span><span class='id identifier rubyid_clear'>clear</span>
  <span class='kw'>else</span>
    <span class='const'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="FixtureSet.html" title="ActiveRecord::FixtureSet (class)">FixtureSet</a></span><span class='period'>.</span><span class='id identifier rubyid_reset_cache'><a href="FixtureSet.html#reset_cache-class_method" title="ActiveRecord::FixtureSet.reset_cache (method)">reset_cache</a></span>
  <span class='kw'>end</span>

  <span class='const'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="Base.html" title="ActiveRecord::Base (class)">Base</a></span><span class='period'>.</span><span class='id identifier rubyid_clear_active_connections!'><a href="ConnectionHandling.html#clear_active_connections!-instance_method" title="ActiveRecord::ConnectionHandling#clear_active_connections! (method)">clear_active_connections!</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.9.8 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.9.0 (ruby-2.5.0p-1)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>