<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: ActiveRecord::Reflection::ThroughReflection &mdash; Rails-master</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/common.css' />

<script type='text/javascript'>
  var pathId = "ActiveRecord::Reflection::ThroughReflection",
    relpath = '../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
        <a href='../../../index.html'>Home</a> &raquo; 
        <a href='../../index.html'>Rails-master</a> &raquo; 
        <a href='../../_index.html#alpha_T'>Index (T)</a> &raquo; 
        <a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a> &raquo; 
        <a class='nodoc' href="../Reflection.html" title="ActiveRecord::Reflection (module)">Reflection</a> &raquo; 
        <span class='title'><a class='nodoc' id='t2_doc_top' href='#'>ThroughReflection&nbsp;&#x25B2;</a></span>
      </div>

    <a id='list_href' href="../../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: ActiveRecord::Reflection::ThroughReflection</h1>
  <div class='note nodoc inline-block'>
    <strong>Do not use.  This class is for internal use only.</strong>
  </div>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Class Chain:</div>
        <div class='box_22'>
          self,
          <a class='nodoc' href="AbstractReflection.html" title="ActiveRecord::Reflection::AbstractReflection (class)">AbstractReflection</a>
        </div>
      </td>
    </tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Instance Chain:</div>
        <div class='box_22'>
          self,
          <a class='nodoc' href="AbstractReflection.html" title="ActiveRecord::Reflection::AbstractReflection (class)">AbstractReflection</a>
        </div>
      </td>
    </tr>
    <tr>
      <td id='t2_inherits' class='box_2 o'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'><a class='nodoc' href="AbstractReflection.html" title="ActiveRecord::Reflection::AbstractReflection (class)">ActiveRecord::Reflection::AbstractReflection</a></span>
        <ul class='fullTree'>
          <li><a href="../../Object.html" title="Object (class)">::Object</a></li>
          <li class='next'><a class='nodoc' href="AbstractReflection.html" title="ActiveRecord::Reflection::AbstractReflection (class)">ActiveRecord::Reflection::AbstractReflection</a></li>
          <li class='next'>ActiveRecord::Reflection::ThroughReflection</li>
        </ul>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/reflection.rb#L761'>activerecord/lib/active_record/reflection.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>Holds all the metadata about a :through association as it was specified in
the Active Record class.</p>

  </div>
</div>
</div>        

<h2 class='h2_sum' id='class_Method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full nodoc'>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(delegate_reflection)  &#x21d2; ThroughReflection </a>
    </span>
    <span class='note title constructor'>constructor</span>
  </li>
</ul>
</div>
        

<h2 class='h2_sum' id='instance_Attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full nodoc'>
  <li>
    <span class='summary_signature ro nodoc'>
      <a href="#active_record_primary_key-instance_method" title="#active_record_primary_key (instance method)">#<strong>active_record_primary_key</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro nodoc'>
      <a href="#association_foreign_key-instance_method" title="#association_foreign_key (instance method)">#<strong>association_foreign_key</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro nodoc'>
      <a href="#delegate_reflection-instance_method" title="#delegate_reflection (instance method)">#<strong>delegate_reflection</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro nodoc'>
      <a href="#foreign_key-instance_method" title="#foreign_key (instance method)">#<strong>foreign_key</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro nodoc'>
      <a href="#foreign_type-instance_method" title="#foreign_type (instance method)">#<strong>foreign_type</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro nodoc'>
      <a href="#get_join_keys-instance_method" title="#get_join_keys (instance method)">#<strong>get_join_keys</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro nodoc'>
      <a href="#has_scope%3F-instance_method" title="#has_scope? (instance method)">#<strong>has_scope?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro nodoc'>
      <a href="#nested%3F-instance_method" title="#nested? (instance method)">#<strong>nested?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>A through association is nested if there would be more than one join table.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro nodoc'>
      <a href="#through_reflection%3F-instance_method" title="#through_reflection? (instance method)">#<strong>through_reflection?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro nodoc'>
      <a href="#type-instance_method" title="#type (instance method)">#<strong>type</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
</ul>

<h3 class='inherited nodoc'><a href="AbstractReflection.html" title="ActiveRecord::Reflection::AbstractReflection (class)">AbstractReflection</a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr>
      <td colspan='2'>
        <a class='i_m ro nodoc' href="AbstractReflection.html#counter_must_be_updated_by_has_many%3F-instance_method" title="ActiveRecord::Reflection::AbstractReflection#counter_must_be_updated_by_has_many? (method)">#counter_must_be_updated_by_has_many?</a>,
      </td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ro nodoc' href="AbstractReflection.html#has_cached_counter%3F-instance_method" title="ActiveRecord::Reflection::AbstractReflection#has_cached_counter? (method)">#has_cached_counter?</a></td>
      <td><div class='inline'><p>Returns whether a counter cache should be used for this association.</p></div></td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m ro nodoc' href="AbstractReflection.html#inverse_updates_counter_cache%3F-instance_method" title="ActiveRecord::Reflection::AbstractReflection#inverse_updates_counter_cache? (method)">#inverse_updates_counter_cache?</a></td>
      <td><div class='inline'><p>Alias for
<a href="AbstractReflection.html#inverse_which_updates_counter_cache-instance_method" title="ActiveRecord::Reflection::AbstractReflection#inverse_which_updates_counter_cache (method)">AbstractReflection#inverse_which_updates_counter_cache</a>.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m ro nodoc' href="AbstractReflection.html#inverse_updates_counter_in_memory%3F-instance_method" title="ActiveRecord::Reflection::AbstractReflection#inverse_updates_counter_in_memory? (method)">#inverse_updates_counter_in_memory?</a>,
        <a class='i_m ro nodoc' href="AbstractReflection.html#through_reflection%3F-instance_method" title="ActiveRecord::Reflection::AbstractReflection#through_reflection? (method)">#through_reflection?</a>
      </td>
    </tr>
  </tbody>
</table></div>
</div>
        

<h2 class='h2_sum' id='instance_Method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full nodoc'>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#add_as_polymorphic_through-instance_method" title="#add_as_polymorphic_through (instance method)">#<strong>add_as_polymorphic_through</strong>(reflection, seed)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#add_as_source-instance_method" title="#add_as_source (instance method)">#<strong>add_as_source</strong>(seed)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#add_as_through-instance_method" title="#add_as_through (instance method)">#<strong>add_as_through</strong>(seed)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#association_primary_key-instance_method" title="#association_primary_key (instance method)">#<strong>association_primary_key</strong>(klass = nil)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>We want to use the klass from this reflection, rather than just delegate
straight to the source_reflection, because the source_reflection may be
polymorphic.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#association_primary_key_type-instance_method" title="#association_primary_key_type (instance method)">#<strong>association_primary_key_type</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#check_validity!-instance_method" title="#check_validity! (instance method)">#<strong>check_validity!</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#clear_association_scope_cache-instance_method" title="#clear_association_scope_cache (instance method)">#<strong>clear_association_scope_cache</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>This is for clearing cache on the reflection.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#collect_join_chain-instance_method" title="#collect_join_chain (instance method)">#<strong>collect_join_chain</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns an array of reflections which are involved in this association.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#collect_join_reflections-instance_method" title="#collect_join_reflections (instance method)">#<strong>collect_join_reflections</strong>(seed)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#constraints-instance_method" title="#constraints (instance method)">#<strong>constraints</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#join_id_for-instance_method" title="#join_id_for (instance method)">#<strong>join_id_for</strong>(owner)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#join_scopes-instance_method" title="#join_scopes (instance method)">#<strong>join_scopes</strong>(table, predicate_builder)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#klass-instance_method" title="#klass (instance method)">#<strong>klass</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#scopes-instance_method" title="#scopes (instance method)">#<strong>scopes</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#source_options-instance_method" title="#source_options (instance method)">#<strong>source_options</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#source_reflection-instance_method" title="#source_reflection (instance method)">#<strong>source_reflection</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the source of the through reflection.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#source_reflection_name-instance_method" title="#source_reflection_name (instance method)">#<strong>source_reflection_name</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#source_reflection_names-instance_method" title="#source_reflection_names (instance method)">#<strong>source_reflection_names</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Gets an array of possible <code>:through</code> source reflection names in
both singular and plural form.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#source_type_scope-instance_method" title="#source_type_scope (instance method)">#<strong>source_type_scope</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature nodoc'>
      <a href="#through_options-instance_method" title="#through_options (instance method)">#<strong>through_options</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature ro nodoc'>
      <a href="#through_reflection-instance_method" title="#through_reflection (instance method)">#<strong>through_reflection</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the <a href="AssociationReflection.html" title="ActiveRecord::Reflection::AssociationReflection (class)">AssociationReflection</a> object
specified in the <code>:through</code> option of a HasManyThrough or
HasOneThrough association.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv nodoc'>
      <a href="#actual_source_reflection-instance_method" title="#actual_source_reflection (instance method)">#<strong>actual_source_reflection</strong>  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>FIXME: this is a horrible name.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv nodoc'>
      <a href="#derive_class_name-instance_method" title="#derive_class_name (instance method)">#<strong>derive_class_name</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv nodoc'>
      <a href="#inverse_name-instance_method" title="#inverse_name (instance method)">#<strong>inverse_name</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv nodoc'>
      <a href="#primary_key-instance_method" title="#primary_key (instance method)">#<strong>primary_key</strong>(klass)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
</ul>

<h3 class='inherited nodoc'><a href="AbstractReflection.html" title="ActiveRecord::Reflection::AbstractReflection (class)">AbstractReflection</a> - Inherited</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr>
      <td colspan='2'>
        <a class='i_m nodoc' href="AbstractReflection.html#alias_candidate-instance_method" title="ActiveRecord::Reflection::AbstractReflection#alias_candidate (method)">#alias_candidate</a>,
      </td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m nodoc' href="AbstractReflection.html#build_association-instance_method" title="ActiveRecord::Reflection::AbstractReflection#build_association (method)">#build_association</a></td>
      <td><div class='inline'><p>Returns a new, unsaved instance of the associated class.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m nodoc' href="AbstractReflection.html#chain-instance_method" title="ActiveRecord::Reflection::AbstractReflection#chain (method)">#chain</a>,
        <a class='i_m nodoc' href="AbstractReflection.html#check_validity_of_inverse!-instance_method" title="ActiveRecord::Reflection::AbstractReflection#check_validity_of_inverse! (method)">#check_validity_of_inverse!</a>,
      </td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m nodoc' href="AbstractReflection.html#class_name-instance_method" title="ActiveRecord::Reflection::AbstractReflection#class_name (method)">#class_name</a></td>
      <td><div class='inline'><p>Returns the class name for the macro.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m nodoc' href="AbstractReflection.html#constraints-instance_method" title="ActiveRecord::Reflection::AbstractReflection#constraints (method)">#constraints</a>,
        <a class='i_m nodoc' href="AbstractReflection.html#counter_cache_column-instance_method" title="ActiveRecord::Reflection::AbstractReflection#counter_cache_column (method)">#counter_cache_column</a>,
        <a class='i_m nodoc' href="AbstractReflection.html#get_join_keys-instance_method" title="ActiveRecord::Reflection::AbstractReflection#get_join_keys (method)">#get_join_keys</a>,
        <a class='i_m nodoc' href="AbstractReflection.html#inverse_of-instance_method" title="ActiveRecord::Reflection::AbstractReflection#inverse_of (method)">#inverse_of</a>,
      </td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m nodoc' href="AbstractReflection.html#inverse_which_updates_counter_cache-instance_method" title="ActiveRecord::Reflection::AbstractReflection#inverse_which_updates_counter_cache (method)">#inverse_which_updates_counter_cache</a></td>
      <td><div class='inline'><p>This shit is nasty.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m nodoc' href="AbstractReflection.html#join_keys-instance_method" title="ActiveRecord::Reflection::AbstractReflection#join_keys (method)">#join_keys</a>,
        <a class='i_m nodoc' href="AbstractReflection.html#join_scopes-instance_method" title="ActiveRecord::Reflection::AbstractReflection#join_scopes (method)">#join_scopes</a>,
        <a class='i_m nodoc' href="AbstractReflection.html#klass_join_scope-instance_method" title="ActiveRecord::Reflection::AbstractReflection#klass_join_scope (method)">#klass_join_scope</a>,
        <a class='i_m nodoc' href="AbstractReflection.html#primary_key_type-instance_method" title="ActiveRecord::Reflection::AbstractReflection#primary_key_type (method)">#primary_key_type</a>,
        <a class='i_m nodoc' href="AbstractReflection.html#quoted_table_name-instance_method" title="ActiveRecord::Reflection::AbstractReflection#quoted_table_name (method)">#quoted_table_name</a>,
        <a class='i_m nodoc' href="AbstractReflection.html#scope_chain-instance_method" title="ActiveRecord::Reflection::AbstractReflection#scope_chain (method)">#scope_chain</a>,
      </td>
    </tr>
    <tr class='i_ds'>
      <td><a class='i_m nodoc' href="AbstractReflection.html#scopes-instance_method" title="ActiveRecord::Reflection::AbstractReflection#scopes (method)">#scopes</a></td>
      <td><div class='inline'><p>Returns a list of scopes that should be applied for this
<a href="../Reflection.html" title="ActiveRecord::Reflection (module)">::ActiveRecord::Reflection</a> object when querying the database.</p></div></td>
    </tr>
    <tr>
      <td colspan='2'>
        <a class='i_m nodoc' href="AbstractReflection.html#table_name-instance_method" title="ActiveRecord::Reflection::AbstractReflection#table_name (method)">#table_name</a>,
        <a class='i_m priv nodoc' href="AbstractReflection.html#join_fk-instance_method" title="ActiveRecord::Reflection::AbstractReflection#join_fk (method)">#join_fk</a>,
        <a class='i_m priv nodoc' href="AbstractReflection.html#join_pk-instance_method" title="ActiveRecord::Reflection::AbstractReflection#join_pk (method)">#join_pk</a>
      </td>
    </tr>
  </tbody>
</table></div>
</div>
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature nodoc first'>
    .<strong>new</strong>(delegate_reflection)  &#x21d2; <code>ThroughReflection</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  
</div>  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/reflection.rb#L766-L770'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


766
767
768
769
770</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/reflection.rb', line 766</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_delegate_reflection'>delegate_reflection</span><span class='rparen'>)</span>
  <span class='ivar'>@delegate_reflection</span> <span class='op'>=</span> <span class='id identifier rubyid_delegate_reflection'>delegate_reflection</span>
  <span class='ivar'>@klass</span> <span class='op'>=</span> <span class='id identifier rubyid_delegate_reflection'>delegate_reflection</span><span class='period'>.</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_anonymous_class'>anonymous_class</span><span class='rbracket'>]</span>
  <span class='ivar'>@source_reflection_name</span> <span class='op'>=</span> <span class='id identifier rubyid_delegate_reflection'>delegate_reflection</span><span class='period'>.</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_source'>source</span><span class='rbracket'>]</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="active_record_primary_key-instance_method">
  <h3 class='signature ro  nodoc first'>
    #<strong>active_record_primary_key</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/reflection.rb#L763-L764'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


763
764</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/reflection.rb', line 763</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_delegate'>delegate</span> <span class='symbeg'>:</span><span class='id identifier rubyid_foreign_key'>foreign_key</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_foreign_type'>foreign_type</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_association_foreign_key'>association_foreign_key</span><span class='comma'>,</span>
         <span class='symbeg'>:</span><span class='id identifier rubyid_active_record_primary_key'>active_record_primary_key</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_get_join_keys'>get_join_keys</span><span class='comma'>,</span> <span class='label'>to:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_source_reflection'>source_reflection</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="association_foreign_key-instance_method">
  <h3 class='signature ro  nodoc'>
    #<strong>association_foreign_key</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/reflection.rb#L763-L764'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


763
764</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/reflection.rb', line 763</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_delegate'>delegate</span> <span class='symbeg'>:</span><span class='id identifier rubyid_foreign_key'>foreign_key</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_foreign_type'>foreign_type</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_association_foreign_key'>association_foreign_key</span><span class='comma'>,</span>
         <span class='symbeg'>:</span><span class='id identifier rubyid_active_record_primary_key'>active_record_primary_key</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_get_join_keys'>get_join_keys</span><span class='comma'>,</span> <span class='label'>to:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_source_reflection'>source_reflection</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="delegate_reflection-instance_method">
  <h3 class='signature ro  nodoc'>
    #<strong>delegate_reflection</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/reflection.rb#L762-L762'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


762</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/reflection.rb', line 762</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_delegate_reflection'>delegate_reflection</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="foreign_key-instance_method">
  <h3 class='signature ro  nodoc'>
    #<strong>foreign_key</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/reflection.rb#L763-L764'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


763
764</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/reflection.rb', line 763</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_delegate'>delegate</span> <span class='symbeg'>:</span><span class='id identifier rubyid_foreign_key'>foreign_key</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_foreign_type'>foreign_type</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_association_foreign_key'>association_foreign_key</span><span class='comma'>,</span>
         <span class='symbeg'>:</span><span class='id identifier rubyid_active_record_primary_key'>active_record_primary_key</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_get_join_keys'>get_join_keys</span><span class='comma'>,</span> <span class='label'>to:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_source_reflection'>source_reflection</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="foreign_type-instance_method">
  <h3 class='signature ro  nodoc'>
    #<strong>foreign_type</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/reflection.rb#L763-L764'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


763
764</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/reflection.rb', line 763</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_delegate'>delegate</span> <span class='symbeg'>:</span><span class='id identifier rubyid_foreign_key'>foreign_key</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_foreign_type'>foreign_type</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_association_foreign_key'>association_foreign_key</span><span class='comma'>,</span>
         <span class='symbeg'>:</span><span class='id identifier rubyid_active_record_primary_key'>active_record_primary_key</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_get_join_keys'>get_join_keys</span><span class='comma'>,</span> <span class='label'>to:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_source_reflection'>source_reflection</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="get_join_keys-instance_method">
  <h3 class='signature ro  nodoc'>
    #<strong>get_join_keys</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/reflection.rb#L763-L764'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


763
764</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/reflection.rb', line 763</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_delegate'>delegate</span> <span class='symbeg'>:</span><span class='id identifier rubyid_foreign_key'>foreign_key</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_foreign_type'>foreign_type</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_association_foreign_key'>association_foreign_key</span><span class='comma'>,</span>
         <span class='symbeg'>:</span><span class='id identifier rubyid_active_record_primary_key'>active_record_primary_key</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_get_join_keys'>get_join_keys</span><span class='comma'>,</span> <span class='label'>to:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_source_reflection'>source_reflection</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="has_scope?-instance_method">
  <h3 class='signature ro  nodoc'>
    #<strong>has_scope?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/reflection.rb#L858-L862'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


858
859
860
861
862</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/reflection.rb', line 858</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_has_scope?'>has_scope?</span>
  <span class='id identifier rubyid_scope'>scope</span> <span class='op'>||</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_source_type'>source_type</span><span class='rbracket'>]</span> <span class='op'>||</span>
    <span class='id identifier rubyid_source_reflection'>source_reflection</span><span class='period'>.</span><span class='id identifier rubyid_has_scope?'>has_scope?</span> <span class='op'>||</span>
    <span class='id identifier rubyid_through_reflection'>through_reflection</span><span class='period'>.</span><span class='id identifier rubyid_has_scope?'>has_scope?</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="nested?-instance_method">
  <h3 class='signature ro  nodoc'>
    #<strong>nested?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>A through association is nested if there would be more than one join table</p>

  </div>
</div>
<div class='tags'>
  
</div>  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/reflection.rb#L865-L867'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


865
866
867</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/reflection.rb', line 865</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_nested?'>nested?</span>
  <span class='id identifier rubyid_source_reflection'>source_reflection</span><span class='period'>.</span><span class='id identifier rubyid_through_reflection?'>through_reflection?</span> <span class='op'>||</span> <span class='id identifier rubyid_through_reflection'>through_reflection</span><span class='period'>.</span><span class='id identifier rubyid_through_reflection?'>through_reflection?</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="through_reflection?-instance_method">
  <h3 class='signature ro  nodoc'>
    #<strong>through_reflection?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/reflection.rb#L772-L774'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


772
773
774</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/reflection.rb', line 772</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_through_reflection?'>through_reflection?</span>
  <span class='kw'>true</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="type-instance_method">
  <h3 class='signature ro  nodoc'>
    #<strong>type</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/reflection.rb#L763-L764'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


763
764</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/reflection.rb', line 763</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_delegate'>delegate</span> <span class='symbeg'>:</span><span class='id identifier rubyid_foreign_key'>foreign_key</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_foreign_type'>foreign_type</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_association_foreign_key'>association_foreign_key</span><span class='comma'>,</span>
         <span class='symbeg'>:</span><span class='id identifier rubyid_active_record_primary_key'>active_record_primary_key</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_get_join_keys'>get_join_keys</span><span class='comma'>,</span> <span class='label'>to:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_source_reflection'>source_reflection</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="actual_source_reflection-instance_method">
  <h3 class='signature priv  nodoc first'>
    #<strong>actual_source_reflection</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>FIXME: this is a horrible name</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/reflection.rb#L999-L1001'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


999
1000
1001</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/reflection.rb', line 999</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_actual_source_reflection'>actual_source_reflection</span> <span class='comment'># FIXME: this is a horrible name
</span>  <span class='id identifier rubyid_source_reflection'>source_reflection</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='symbeg'>:</span><span class='id identifier rubyid_actual_source_reflection'>actual_source_reflection</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="add_as_polymorphic_through-instance_method">
  <h3 class='signature nodoc'>
    #<strong>add_as_polymorphic_through</strong>(reflection, seed)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/reflection.rb#L980-L982'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


980
981
982</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/reflection.rb', line 980</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_add_as_polymorphic_through'>add_as_polymorphic_through</span><span class='lparen'>(</span><span class='id identifier rubyid_reflection'>reflection</span><span class='comma'>,</span> <span class='id identifier rubyid_seed'>seed</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_collect_join_reflections'>collect_join_reflections</span><span class='lparen'>(</span><span class='id identifier rubyid_seed'>seed</span> <span class='op'>+</span> <span class='lbracket'>[</span><span class='const'><a href="PolymorphicReflection.html" title="ActiveRecord::Reflection::PolymorphicReflection (class)">PolymorphicReflection</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="PolymorphicReflection.html#new-class_method" title="ActiveRecord::Reflection::PolymorphicReflection.new (method)">new</a></span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_reflection'>reflection</span><span class='rparen'>)</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="add_as_source-instance_method">
  <h3 class='signature nodoc'>
    #<strong>add_as_source</strong>(seed)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/reflection.rb#L976-L978'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


976
977
978</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/reflection.rb', line 976</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_add_as_source'>add_as_source</span><span class='lparen'>(</span><span class='id identifier rubyid_seed'>seed</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_collect_join_reflections'>collect_join_reflections</span> <span class='id identifier rubyid_seed'>seed</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="add_as_through-instance_method">
  <h3 class='signature nodoc'>
    #<strong>add_as_through</strong>(seed)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/reflection.rb#L984-L986'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


984
985
986</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/reflection.rb', line 984</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_add_as_through'>add_as_through</span><span class='lparen'>(</span><span class='id identifier rubyid_seed'>seed</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_collect_join_reflections'>collect_join_reflections</span><span class='lparen'>(</span><span class='id identifier rubyid_seed'>seed</span> <span class='op'>+</span> <span class='lbracket'>[</span><span class='kw'>self</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="association_primary_key-instance_method">
  <h3 class='signature nodoc'>
    #<strong>association_primary_key</strong>(klass = nil)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>We want to use the klass from this reflection, rather than just delegate
straight to the source_reflection, because the source_reflection may be
polymorphic. We still need to respect the source_reflection&#39;s
:primary_key option, though.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/reflection.rb#L872-L876'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


872
873
874
875
876</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/reflection.rb', line 872</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_association_primary_key'>association_primary_key</span><span class='lparen'>(</span><span class='id identifier rubyid_klass'>klass</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='comment'># Get the &quot;actual&quot; source reflection if the immediate source reflection has a
</span>  <span class='comment'># source reflection itself
</span>  <span class='id identifier rubyid_actual_source_reflection'>actual_source_reflection</span><span class='period'>.</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_primary_key'>primary_key</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_primary_key'>primary_key</span><span class='lparen'>(</span><span class='id identifier rubyid_klass'>klass</span> <span class='op'>||</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_klass'>klass</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="association_primary_key_type-instance_method">
  <h3 class='signature nodoc'>
    #<strong>association_primary_key_type</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/reflection.rb#L878-L880'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


878
879
880</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/reflection.rb', line 878</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_association_primary_key_type'>association_primary_key_type</span>
  <span class='id identifier rubyid_klass'>klass</span><span class='period'>.</span><span class='id identifier rubyid_type_for_attribute'>type_for_attribute</span><span class='lparen'>(</span><span class='id identifier rubyid_association_primary_key'>association_primary_key</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="check_validity!-instance_method">
  <h3 class='signature nodoc'>
    #<strong>check_validity!</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/reflection.rb#L930-L968'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


930
931
932
933
934
935
936
937
938
939
940
941
942
943
944
945
946
947
948
949
950
951
952
953
954
955
956
957
958
959
960
961
962
963
964
965
966
967
968</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/reflection.rb', line 930</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_check_validity!'>check_validity!</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_through_reflection'>through_reflection</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../HasManyThroughAssociationNotFoundError.html" title="ActiveRecord::HasManyThroughAssociationNotFoundError (class)">HasManyThroughAssociationNotFoundError</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="../HasManyThroughAssociationNotFoundError.html#new-class_method" title="ActiveRecord::HasManyThroughAssociationNotFoundError.new (method)">new</a></span><span class='lparen'>(</span><span class='id identifier rubyid_active_record'>active_record</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='kw'>self</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_through_reflection'>through_reflection</span><span class='period'>.</span><span class='id identifier rubyid_polymorphic?'>polymorphic?</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_has_one?'>has_one?</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../HasOneAssociationPolymorphicThroughError.html" title="ActiveRecord::HasOneAssociationPolymorphicThroughError (class)">HasOneAssociationPolymorphicThroughError</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="../HasOneAssociationPolymorphicThroughError.html#new-class_method" title="ActiveRecord::HasOneAssociationPolymorphicThroughError.new (method)">new</a></span><span class='lparen'>(</span><span class='id identifier rubyid_active_record'>active_record</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='kw'>self</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../HasManyThroughAssociationPolymorphicThroughError.html" title="ActiveRecord::HasManyThroughAssociationPolymorphicThroughError (class)">HasManyThroughAssociationPolymorphicThroughError</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="../HasManyThroughAssociationPolymorphicThroughError.html#new-class_method" title="ActiveRecord::HasManyThroughAssociationPolymorphicThroughError.new (method)">new</a></span><span class='lparen'>(</span><span class='id identifier rubyid_active_record'>active_record</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='kw'>self</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_source_reflection'>source_reflection</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../HasManyThroughSourceAssociationNotFoundError.html" title="ActiveRecord::HasManyThroughSourceAssociationNotFoundError (class)">HasManyThroughSourceAssociationNotFoundError</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="../HasManyThroughSourceAssociationNotFoundError.html#new-class_method" title="ActiveRecord::HasManyThroughSourceAssociationNotFoundError.new (method)">new</a></span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_source_type'>source_type</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_source_reflection'>source_reflection</span><span class='period'>.</span><span class='id identifier rubyid_polymorphic?'>polymorphic?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../HasManyThroughAssociationPointlessSourceTypeError.html" title="ActiveRecord::HasManyThroughAssociationPointlessSourceTypeError (class)">HasManyThroughAssociationPointlessSourceTypeError</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="../HasManyThroughAssociationPointlessSourceTypeError.html#new-class_method" title="ActiveRecord::HasManyThroughAssociationPointlessSourceTypeError.new (method)">new</a></span><span class='lparen'>(</span><span class='id identifier rubyid_active_record'>active_record</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_source_reflection'>source_reflection</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_source_reflection'>source_reflection</span><span class='period'>.</span><span class='id identifier rubyid_polymorphic?'>polymorphic?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_source_type'>source_type</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../HasManyThroughAssociationPolymorphicSourceError.html" title="ActiveRecord::HasManyThroughAssociationPolymorphicSourceError (class)">HasManyThroughAssociationPolymorphicSourceError</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="../HasManyThroughAssociationPolymorphicSourceError.html#new-class_method" title="ActiveRecord::HasManyThroughAssociationPolymorphicSourceError.new (method)">new</a></span><span class='lparen'>(</span><span class='id identifier rubyid_active_record'>active_record</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_source_reflection'>source_reflection</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_has_one?'>has_one?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_through_reflection'>through_reflection</span><span class='period'>.</span><span class='id identifier rubyid_collection?'>collection?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../HasOneThroughCantAssociateThroughCollection.html" title="ActiveRecord::HasOneThroughCantAssociateThroughCollection (class)">HasOneThroughCantAssociateThroughCollection</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="../HasOneThroughCantAssociateThroughCollection.html#new-class_method" title="ActiveRecord::HasOneThroughCantAssociateThroughCollection.new (method)">new</a></span><span class='lparen'>(</span><span class='id identifier rubyid_active_record'>active_record</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_through_reflection'>through_reflection</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_parent_reflection'>parent_reflection</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_reflections'>reflections</span> <span class='op'>=</span> <span class='id identifier rubyid_active_record'>active_record</span><span class='period'>.</span><span class='id identifier rubyid_reflections'>reflections</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbeg'>:</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rparen'>)</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_reflections'>reflections</span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='id identifier rubyid_through_reflection'>through_reflection</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_reflections'>reflections</span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../HasManyThroughOrderError.html" title="ActiveRecord::HasManyThroughOrderError (class)">HasManyThroughOrderError</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="../HasManyThroughOrderError.html#new-class_method" title="ActiveRecord::HasManyThroughOrderError.new (method)">new</a></span><span class='lparen'>(</span><span class='id identifier rubyid_active_record'>active_record</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_through_reflection'>through_reflection</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_check_validity_of_inverse!'>check_validity_of_inverse!</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="clear_association_scope_cache-instance_method">
  <h3 class='signature nodoc'>
    #<strong>clear_association_scope_cache</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>This is for clearing cache on the reflection. Useful for tests that need to
compare SQL queries on associations.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/reflection.rb#L840-L844'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


840
841
842
843
844</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/reflection.rb', line 840</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_clear_association_scope_cache'>clear_association_scope_cache</span> <span class='comment'># :nodoc:
</span>  <span class='id identifier rubyid_delegate_reflection'>delegate_reflection</span><span class='period'>.</span><span class='id identifier rubyid_clear_association_scope_cache'>clear_association_scope_cache</span>
  <span class='id identifier rubyid_source_reflection'>source_reflection</span><span class='period'>.</span><span class='id identifier rubyid_clear_association_scope_cache'>clear_association_scope_cache</span>
  <span class='id identifier rubyid_through_reflection'>through_reflection</span><span class='period'>.</span><span class='id identifier rubyid_clear_association_scope_cache'>clear_association_scope_cache</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="collect_join_chain-instance_method">
  <h3 class='signature nodoc'>
    #<strong>collect_join_chain</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns an array of reflections which are involved in this association.
Each item in the array corresponds to a table which will be part of the
query for this association.</p>

<p>The chain is built by recursively calling <code>#chain</code> on the source reflection
and the through reflection. The base case for the recursion is a normal
association, which just returns</p>
<dl class="rdoc-list label-list"><dt>self
<dd>
<p>as its <code>#chain</code>.</p>
</dd></dl>

<pre class="code ruby"><code class="ruby">class Post &lt; ActiveRecord::Base
  has_many :taggings
  has_many :tags, through: :taggings
end

tags_reflection = Post.reflect_on_association(:tags)
tags_reflection.chain
# =&gt; [&lt;ActiveRecord::Reflection::ThroughReflection: @delegate_reflection=#&lt;ActiveRecord::Reflection::HasManyReflection: @name=:tags...&gt;,
      &lt;ActiveRecord::Reflection::HasManyReflection: @name=:taggings, @options={}, @active_record=Post&gt;]</code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/reflection.rb#L834-L836'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


834
835
836</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/reflection.rb', line 834</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_collect_join_chain'>collect_join_chain</span>
  <span class='id identifier rubyid_collect_join_reflections'>collect_join_reflections</span> <span class='lbracket'>[</span><span class='kw'>self</span><span class='rbracket'>]</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="collect_join_reflections-instance_method">
  <h3 class='signature nodoc'>
    #<strong>collect_join_reflections</strong>(seed)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/reflection.rb#L988-L995'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


988
989
990
991
992
993
994
995</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/reflection.rb', line 988</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_collect_join_reflections'>collect_join_reflections</span><span class='lparen'>(</span><span class='id identifier rubyid_seed'>seed</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> <span class='id identifier rubyid_source_reflection'>source_reflection</span><span class='period'>.</span><span class='id identifier rubyid_add_as_source'>add_as_source</span> <span class='id identifier rubyid_seed'>seed</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_source_type'>source_type</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_through_reflection'>through_reflection</span><span class='period'>.</span><span class='id identifier rubyid_add_as_polymorphic_through'>add_as_polymorphic_through</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_a'>a</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_through_reflection'>through_reflection</span><span class='period'>.</span><span class='id identifier rubyid_add_as_through'>add_as_through</span> <span class='id identifier rubyid_a'>a</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="constraints-instance_method">
  <h3 class='signature nodoc'>
    #<strong>constraints</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/reflection.rb#L970-L974'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


970
971
972
973
974</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/reflection.rb', line 970</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_constraints'>constraints</span>
  <span class='id identifier rubyid_scope_chain'>scope_chain</span> <span class='op'>=</span> <span class='id identifier rubyid_source_reflection'>source_reflection</span><span class='period'>.</span><span class='id identifier rubyid_constraints'>constraints</span>
  <span class='id identifier rubyid_scope_chain'>scope_chain</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_scope'>scope</span> <span class='kw'>if</span> <span class='id identifier rubyid_scope'>scope</span>
  <span class='id identifier rubyid_scope_chain'>scope_chain</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="derive_class_name-instance_method">
  <h3 class='signature priv  nodoc'>
    #<strong>derive_class_name</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/reflection.rb#L1009-L1012'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1009
1010
1011
1012</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/reflection.rb', line 1009</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_derive_class_name'>derive_class_name</span>
  <span class='comment'># get the class_name of the belongs_to association of the through reflection
</span>  <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_source_type'>source_type</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_source_reflection'>source_reflection</span><span class='period'>.</span><span class='id identifier rubyid_class_name'>class_name</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="inverse_name-instance_method">
  <h3 class='signature priv  nodoc'>
    #<strong>inverse_name</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/reflection.rb#L1007-L1007'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1007</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/reflection.rb', line 1007</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_inverse_name'>inverse_name</span><span class='semicolon'>;</span> <span class='id identifier rubyid_delegate_reflection'>delegate_reflection</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='symbeg'>:</span><span class='id identifier rubyid_inverse_name'>inverse_name</span><span class='rparen'>)</span><span class='semicolon'>;</span> <span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="join_id_for-instance_method">
  <h3 class='signature nodoc'>
    #<strong>join_id_for</strong>(owner)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/reflection.rb#L926-L928'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


926
927
928</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/reflection.rb', line 926</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_join_id_for'>join_id_for</span><span class='lparen'>(</span><span class='id identifier rubyid_owner'>owner</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='id identifier rubyid_source_reflection'>source_reflection</span><span class='period'>.</span><span class='id identifier rubyid_join_id_for'>join_id_for</span><span class='lparen'>(</span><span class='id identifier rubyid_owner'>owner</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="join_scopes-instance_method">
  <h3 class='signature nodoc'>
    #<strong>join_scopes</strong>(table, predicate_builder)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/reflection.rb#L850-L852'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


850
851
852</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/reflection.rb', line 850</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_join_scopes'>join_scopes</span><span class='lparen'>(</span><span class='id identifier rubyid_table'>table</span><span class='comma'>,</span> <span class='id identifier rubyid_predicate_builder'>predicate_builder</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='id identifier rubyid_source_reflection'>source_reflection</span><span class='period'>.</span><span class='id identifier rubyid_join_scopes'>join_scopes</span><span class='lparen'>(</span><span class='id identifier rubyid_table'>table</span><span class='comma'>,</span> <span class='id identifier rubyid_predicate_builder'>predicate_builder</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='kw'>super</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="klass-instance_method">
  <h3 class='signature nodoc'>
    #<strong>klass</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/reflection.rb#L776-L778'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


776
777
778</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/reflection.rb', line 776</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_klass'>klass</span>
  <span class='ivar'>@klass</span> <span class='op'>||=</span> <span class='id identifier rubyid_delegate_reflection'>delegate_reflection</span><span class='period'>.</span><span class='id identifier rubyid_compute_class'>compute_class</span><span class='lparen'>(</span><span class='id identifier rubyid_class_name'>class_name</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="primary_key-instance_method">
  <h3 class='signature priv  nodoc'>
    #<strong>primary_key</strong>(klass)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/reflection.rb#L1003-L1005'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


1003
1004
1005</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/reflection.rb', line 1003</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_primary_key'>primary_key</span><span class='lparen'>(</span><span class='id identifier rubyid_klass'>klass</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_klass'>klass</span><span class='period'>.</span><span class='id identifier rubyid_primary_key'>primary_key</span> <span class='op'>||</span> <span class='id identifier rubyid_raise'>raise</span><span class='lparen'>(</span><span class='const'><a href="../UnknownPrimaryKey.html" title="ActiveRecord::UnknownPrimaryKey (class)">UnknownPrimaryKey</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="../UnknownPrimaryKey.html#new-class_method" title="ActiveRecord::UnknownPrimaryKey.new (method)">new</a></span><span class='lparen'>(</span><span class='id identifier rubyid_klass'>klass</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="scopes-instance_method">
  <h3 class='signature nodoc'>
    #<strong>scopes</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/reflection.rb#L846-L848'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


846
847
848</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/reflection.rb', line 846</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_scopes'>scopes</span>
  <span class='id identifier rubyid_source_reflection'>source_reflection</span><span class='period'>.</span><span class='id identifier rubyid_scopes'>scopes</span> <span class='op'>+</span> <span class='kw'>super</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="source_options-instance_method">
  <h3 class='signature nodoc'>
    #<strong>source_options</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/reflection.rb#L918-L920'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


918
919
920</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/reflection.rb', line 918</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_source_options'>source_options</span>
  <span class='id identifier rubyid_source_reflection'>source_reflection</span><span class='period'>.</span><span class='id identifier rubyid_options'>options</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="source_reflection-instance_method">
  <h3 class='signature nodoc'>
    #<strong>source_reflection</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the source of the through reflection. It checks both a singularized
and pluralized form for <code>:belongs_to</code> or <code>:has_many</code>.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Post</span> <span class='op'>&lt;</span> <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../Base.html" title="ActiveRecord::Base (class)">Base</a></span>
  <span class='id identifier rubyid_has_many'>has_many</span> <span class='symbeg'>:</span><span class='id identifier rubyid_taggings'>taggings</span>
  <span class='id identifier rubyid_has_many'>has_many</span> <span class='symbeg'>:</span><span class='id identifier rubyid_tags'>tags</span><span class='comma'>,</span> <span class='label'>through:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_taggings'>taggings</span>
<span class='kw'>end</span>

<span class='kw'>class</span> <span class='const'>Tagging</span> <span class='op'>&lt;</span> <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../Base.html" title="ActiveRecord::Base (class)">Base</a></span>
  <span class='id identifier rubyid_belongs_to'>belongs_to</span> <span class='symbeg'>:</span><span class='id identifier rubyid_post'>post</span>
  <span class='id identifier rubyid_belongs_to'>belongs_to</span> <span class='symbeg'>:</span><span class='id identifier rubyid_tag'>tag</span>
<span class='kw'>end</span>

<span class='id identifier rubyid_tags_reflection'>tags_reflection</span> <span class='op'>=</span> <span class='const'>Post</span><span class='period'>.</span><span class='id identifier rubyid_reflect_on_association'>reflect_on_association</span><span class='lparen'>(</span><span class='symbeg'>:</span><span class='id identifier rubyid_tags'>tags</span><span class='rparen'>)</span>
<span class='id identifier rubyid_tags_reflection'>tags_reflection</span><span class='period'>.</span><span class='id identifier rubyid_source_reflection'>source_reflection</span>
<span class='comment'># =&gt; &lt;ActiveRecord::Reflection::BelongsToReflection: @name=:tag, @active_record=Tagging, @plural_name=&quot;tags&quot;&gt;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/reflection.rb#L797-L799'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


797
798
799</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/reflection.rb', line 797</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_source_reflection'>source_reflection</span>
  <span class='id identifier rubyid_through_reflection'>through_reflection</span><span class='period'>.</span><span class='id identifier rubyid_klass'>klass</span><span class='period'>.</span><span class='id identifier rubyid__reflect_on_association'>_reflect_on_association</span><span class='lparen'>(</span><span class='id identifier rubyid_source_reflection_name'>source_reflection_name</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="source_reflection_name-instance_method">
  <h3 class='signature nodoc'>
    #<strong>source_reflection_name</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/reflection.rb#L897-L916'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


897
898
899
900
901
902
903
904
905
906
907
908
909
910
911
912
913
914
915
916</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/reflection.rb', line 897</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_source_reflection_name'>source_reflection_name</span> <span class='comment'># :nodoc:
</span>  <span class='kw'>return</span> <span class='ivar'>@source_reflection_name</span> <span class='kw'>if</span> <span class='ivar'>@source_reflection_name</span>

  <span class='id identifier rubyid_names'>names</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_singularize'>singularize</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbeg'>:</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span>
  <span class='id identifier rubyid_names'>names</span> <span class='op'>=</span> <span class='id identifier rubyid_names'>names</span><span class='period'>.</span><span class='id identifier rubyid_find_all'>find_all</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_n'>n</span><span class='op'>|</span>
    <span class='id identifier rubyid_through_reflection'>through_reflection</span><span class='period'>.</span><span class='id identifier rubyid_klass'>klass</span><span class='period'>.</span><span class='id identifier rubyid__reflect_on_association'>_reflect_on_association</span><span class='lparen'>(</span><span class='id identifier rubyid_n'>n</span><span class='rparen'>)</span>
  <span class='rbrace'>}</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_names'>names</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>&gt;</span> <span class='int'>1</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><a href="../AmbiguousSourceReflectionForThroughAssociation.html" title="ActiveRecord::AmbiguousSourceReflectionForThroughAssociation (class)">AmbiguousSourceReflectionForThroughAssociation</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="../AmbiguousSourceReflectionForThroughAssociation.html#new-class_method" title="ActiveRecord::AmbiguousSourceReflectionForThroughAssociation.new (method)">new</a></span><span class='lparen'>(</span>
      <span class='id identifier rubyid_active_record'>active_record</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span>
      <span class='id identifier rubyid_macro'>macro</span><span class='comma'>,</span>
      <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span>
      <span class='id identifier rubyid_options'>options</span><span class='comma'>,</span>
      <span class='id identifier rubyid_source_reflection_names'>source_reflection_names</span>
    <span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='ivar'>@source_reflection_name</span> <span class='op'>=</span> <span class='id identifier rubyid_names'>names</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="source_reflection_names-instance_method">
  <h3 class='signature nodoc'>
    #<strong>source_reflection_names</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Gets an array of possible <code>:through</code> source reflection names in
both singular and plural form.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Post</span> <span class='op'>&lt;</span> <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../Base.html" title="ActiveRecord::Base (class)">Base</a></span>
  <span class='id identifier rubyid_has_many'>has_many</span> <span class='symbeg'>:</span><span class='id identifier rubyid_taggings'>taggings</span>
  <span class='id identifier rubyid_has_many'>has_many</span> <span class='symbeg'>:</span><span class='id identifier rubyid_tags'>tags</span><span class='comma'>,</span> <span class='label'>through:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_taggings'>taggings</span>
<span class='kw'>end</span>

<span class='id identifier rubyid_tags_reflection'>tags_reflection</span> <span class='op'>=</span> <span class='const'>Post</span><span class='period'>.</span><span class='id identifier rubyid_reflect_on_association'>reflect_on_association</span><span class='lparen'>(</span><span class='symbeg'>:</span><span class='id identifier rubyid_tags'>tags</span><span class='rparen'>)</span>
<span class='id identifier rubyid_tags_reflection'>tags_reflection</span><span class='period'>.</span><span class='id identifier rubyid_source_reflection_names'>source_reflection_names</span>
<span class='comment'># =&gt; [:tag, :tags]</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/reflection.rb#L893-L895'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


893
894
895</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/reflection.rb', line 893</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_source_reflection_names'>source_reflection_names</span>
  <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_source'>source</span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='lbracket'>[</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_source'>source</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>:</span> <span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_singularize'>singularize</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="source_type_scope-instance_method">
  <h3 class='signature nodoc'>
    #<strong>source_type_scope</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/reflection.rb#L854-L856'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


854
855
856</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/reflection.rb', line 854</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_source_type_scope'>source_type_scope</span>
  <span class='id identifier rubyid_through_reflection'>through_reflection</span><span class='period'>.</span><span class='id identifier rubyid_klass'>klass</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='id identifier rubyid_foreign_type'>foreign_type</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_source_type'>source_type</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="through_options-instance_method">
  <h3 class='signature nodoc'>
    #<strong>through_options</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/reflection.rb#L922-L924'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


922
923
924</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/reflection.rb', line 922</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_through_options'>through_options</span>
  <span class='id identifier rubyid_through_reflection'>through_reflection</span><span class='period'>.</span><span class='id identifier rubyid_options'>options</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="through_reflection-instance_method">
  <h3 class='signature ro  nodoc'>
    #<strong>through_reflection</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the <a href="AssociationReflection.html" title="ActiveRecord::Reflection::AssociationReflection (class)">AssociationReflection</a> object
specified in the <code>:through</code> option of a HasManyThrough or
HasOneThrough association.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Post</span> <span class='op'>&lt;</span> <span class='const'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span><span class='op'>::</span><span class='const'><a href="../Base.html" title="ActiveRecord::Base (class)">Base</a></span>
  <span class='id identifier rubyid_has_many'>has_many</span> <span class='symbeg'>:</span><span class='id identifier rubyid_taggings'>taggings</span>
  <span class='id identifier rubyid_has_many'>has_many</span> <span class='symbeg'>:</span><span class='id identifier rubyid_tags'>tags</span><span class='comma'>,</span> <span class='label'>through:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_taggings'>taggings</span>
<span class='kw'>end</span>

<span class='id identifier rubyid_tags_reflection'>tags_reflection</span> <span class='op'>=</span> <span class='const'>Post</span><span class='period'>.</span><span class='id identifier rubyid_reflect_on_association'>reflect_on_association</span><span class='lparen'>(</span><span class='symbeg'>:</span><span class='id identifier rubyid_tags'>tags</span><span class='rparen'>)</span>
<span class='id identifier rubyid_tags_reflection'>tags_reflection</span><span class='period'>.</span><span class='id identifier rubyid_through_reflection'>through_reflection</span>
<span class='comment'># =&gt; &lt;ActiveRecord::Reflection::HasManyReflection: @name=:taggings, @active_record=Post, @plural_name=&quot;taggings&quot;&gt;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activerecord/lib/active_record/reflection.rb#L813-L815'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


813
814
815</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activerecord/lib/active_record/reflection.rb', line 813</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_through_reflection'>through_reflection</span>
  <span class='id identifier rubyid_active_record'>active_record</span><span class='period'>.</span><span class='id identifier rubyid__reflect_on_association'>_reflect_on_association</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_through'>through</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.9.8 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.9.0 (ruby-2.5.0p-1)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>