<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Module: ActiveSupport::Multibyte::Unicode &mdash; Rails-master</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/common.css' />

<script type='text/javascript'>
  var pathId = "ActiveSupport::Multibyte::Unicode",
    relpath = '../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
        <a href='../../../index.html'>Home</a> &raquo; 
        <a href='../../index.html'>Rails-master</a> &raquo; 
        <a href='../../_index.html#alpha_U'>Index (U)</a> &raquo; 
        <a href="../../ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a> &raquo; 
        <a href="../Multibyte.html" title="ActiveSupport::Multibyte (module)">Multibyte</a> &raquo; 
        <span class='title'><a id='t2_doc_top' href='#'>Unicode&nbsp;&#x25B2;</a></span>
      </div>

    <a id='list_href' href="../../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='module'>
<h1>Module: ActiveSupport::Multibyte::Unicode</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Namespace Children</td></tr>
    <tr><td colspan='2'>
      <div class='box_1'>Classes:</div>
      <div class='box_11'>
          <a href="Unicode/Codepoint.html" title="ActiveSupport::Multibyte::Unicode::Codepoint (class)">Codepoint</a>,
        <a href="Unicode/UnicodeDatabase.html" title="ActiveSupport::Multibyte::Unicode::UnicodeDatabase (class)">UnicodeDatabase</a>      </div>
    </td></tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/multibyte/unicode.rb#L3'>activesupport/lib/active_support/multibyte/unicode.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='t2_cnst' class='h2_sum'>Constant Summary</h2>
<div>
<ul class='constants summary full'>
  <li>
    <span id='HANGUL_LBASE-constant' class='summary_signature'>HANGUL_LBASE =</span>
    <br/>
    <a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/multibyte/unicode.rb#L24-L24'># File 'activesupport/lib/active_support/multibyte/unicode.rb', line 24</a>    <pre class='code ruby'><span class='int'>0x1100</span></pre>
  </li>
  <li>
    <span id='HANGUL_LCOUNT-constant' class='summary_signature'>HANGUL_LCOUNT =</span>
    <br/>
    <a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/multibyte/unicode.rb#L27-L27'># File 'activesupport/lib/active_support/multibyte/unicode.rb', line 27</a>    <pre class='code ruby'><span class='int'>19</span></pre>
  </li>
  <li>
    <span id='HANGUL_NCOUNT-constant' class='summary_signature'>HANGUL_NCOUNT =</span>
    <br/>
    <a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/multibyte/unicode.rb#L30-L30'># File 'activesupport/lib/active_support/multibyte/unicode.rb', line 30</a>    <pre class='code ruby'><span class='const'><a href="#HANGUL_VCOUNT-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_VCOUNT (constant)">HANGUL_VCOUNT</a></span> <span class='op'>*</span> <span class='const'><a href="#HANGUL_TCOUNT-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_TCOUNT (constant)">HANGUL_TCOUNT</a></span></pre>
  </li>
  <li>
    <span id='HANGUL_SBASE-constant' class='summary_signature'>HANGUL_SBASE =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>Hangul character boundaries and properties</p>

  </div>
</div>
    <a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/multibyte/unicode.rb#L23-L23'># File 'activesupport/lib/active_support/multibyte/unicode.rb', line 23</a>    <pre class='code ruby'><span class='int'>0xAC00</span></pre>
  </li>
  <li>
    <span id='HANGUL_SCOUNT-constant' class='summary_signature'>HANGUL_SCOUNT =</span>
    <br/>
    <a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/multibyte/unicode.rb#L31-L31'># File 'activesupport/lib/active_support/multibyte/unicode.rb', line 31</a>    <pre class='code ruby'><span class='int'>11172</span></pre>
  </li>
  <li>
    <span id='HANGUL_SLAST-constant' class='summary_signature'>HANGUL_SLAST =</span>
    <br/>
    <a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/multibyte/unicode.rb#L32-L32'># File 'activesupport/lib/active_support/multibyte/unicode.rb', line 32</a>    <pre class='code ruby'><span class='const'><a href="#HANGUL_SBASE-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_SBASE (constant)">HANGUL_SBASE</a></span> <span class='op'>+</span> <span class='const'><a href="#HANGUL_SCOUNT-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_SCOUNT (constant)">HANGUL_SCOUNT</a></span></pre>
  </li>
  <li>
    <span id='HANGUL_TBASE-constant' class='summary_signature'>HANGUL_TBASE =</span>
    <br/>
    <a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/multibyte/unicode.rb#L26-L26'># File 'activesupport/lib/active_support/multibyte/unicode.rb', line 26</a>    <pre class='code ruby'><span class='int'>0x11A7</span></pre>
  </li>
  <li>
    <span id='HANGUL_TCOUNT-constant' class='summary_signature'>HANGUL_TCOUNT =</span>
    <br/>
    <a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/multibyte/unicode.rb#L29-L29'># File 'activesupport/lib/active_support/multibyte/unicode.rb', line 29</a>    <pre class='code ruby'><span class='int'>28</span></pre>
  </li>
  <li>
    <span id='HANGUL_VBASE-constant' class='summary_signature'>HANGUL_VBASE =</span>
    <br/>
    <a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/multibyte/unicode.rb#L25-L25'># File 'activesupport/lib/active_support/multibyte/unicode.rb', line 25</a>    <pre class='code ruby'><span class='int'>0x1161</span></pre>
  </li>
  <li>
    <span id='HANGUL_VCOUNT-constant' class='summary_signature'>HANGUL_VCOUNT =</span>
    <br/>
    <a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/multibyte/unicode.rb#L28-L28'># File 'activesupport/lib/active_support/multibyte/unicode.rb', line 28</a>    <pre class='code ruby'><span class='int'>21</span></pre>
  </li>
  <li>
    <span id='NORMALIZATION_FORMS-constant' class='summary_signature'>NORMALIZATION_FORMS =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>A list of all available normalization forms. See <a
href="http://www.unicode.org/reports/tr15/tr15-29.html">www.unicode.org/reports/tr15/tr15-29.html</a>
for more information about normalization.</p>

  </div>
</div>
    <a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/multibyte/unicode.rb#L9-L9'># File 'activesupport/lib/active_support/multibyte/unicode.rb', line 9</a>    <pre class='code ruby'><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_c'>c</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_kc'>kc</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_d'>d</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_kd'>kd</span><span class='rbracket'>]</span></pre>
  </li>
  <li>
    <span id='UNICODE_VERSION-constant' class='summary_signature'>UNICODE_VERSION =</span>
    <div class='docstring'>
  <div class='discussion'>
    
<p>The Unicode version that is supported by the implementation</p>

  </div>
</div>
    <a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/multibyte/unicode.rb#L12-L12'># File 'activesupport/lib/active_support/multibyte/unicode.rb', line 12</a>    <pre class='code ruby'><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>9.0.0</span><span class='tstring_end'>&quot;</span></span></pre>
  </li>
</ul>
</div>
        

<h2 class='h2_sum' id='instance_Attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature rw'>
      <a href="#default_normalization_form-instance_method" title="#default_normalization_form (instance method)">#<strong>default_normalization_form</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
    <div class='summary_desc'>
      <div class='inline'><p>The default normalization used for operations that require normalization.</p></div>
    </div>
  </li>
</ul>
</div>
        

<h2 class='h2_sum' id='instance_Method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#compose-instance_method" title="#compose (instance method)">#<strong>compose</strong>(codepoints)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Compose decomposed characters to the composed form.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#decompose-instance_method" title="#decompose (instance method)">#<strong>decompose</strong>(type, codepoints)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Decompose composed characters to the decomposed form.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#downcase-instance_method" title="#downcase (instance method)">#<strong>downcase</strong>(string)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#in_char_class%3F-instance_method" title="#in_char_class? (instance method)">#<strong>in_char_class?</strong>(codepoint, classes)  &#x21d2; Boolean </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Detect whether the codepoint is in a certain character class.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#normalize-instance_method" title="#normalize (instance method)">#<strong>normalize</strong>(string, form = nil)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns the KC normalization of the string by default.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#pack_graphemes-instance_method" title="#pack_graphemes (instance method)">#<strong>pack_graphemes</strong>(unpacked)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Reverse operation of unpack_graphemes.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#reorder_characters-instance_method" title="#reorder_characters (instance method)">#<strong>reorder_characters</strong>(codepoints)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Re-order codepoints so the string becomes canonical.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#swapcase-instance_method" title="#swapcase (instance method)">#<strong>swapcase</strong>(string)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#tidy_bytes-instance_method" title="#tidy_bytes (instance method)">#<strong>tidy_bytes</strong>(string, force = false)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>See additional method definition at line 224.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#unpack_graphemes-instance_method" title="#unpack_graphemes (instance method)">#<strong>unpack_graphemes</strong>(string)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Unpack the string at grapheme boundaries.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#upcase-instance_method" title="#upcase (instance method)">#<strong>upcase</strong>(string)  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#apply_mapping-instance_method" title="#apply_mapping (instance method)">#<strong>apply_mapping</strong>(string, mapping)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#database-instance_method" title="#database (instance method)">#<strong>database</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#recode_windows1252_chars-instance_method" title="#recode_windows1252_chars (instance method)">#<strong>recode_windows1252_chars</strong>(string)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
</ul>
</div>
<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="default_normalization_form-instance_method">
  <h3 class='signature rw first'>
    #<strong>default_normalization_form</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The default normalization used for operations that require normalization.
It can be set to any of the normalizations in
<a href="#NORMALIZATION_FORMS-constant" title="ActiveSupport::Multibyte::Unicode::NORMALIZATION_FORMS (constant)">NORMALIZATION_FORMS</a>.</p>

<pre class="code ruby"><code class="ruby"><span class='const'><a href="../../ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="../Multibyte.html" title="ActiveSupport::Multibyte (module)">Multibyte</a></span><span class='op'>::</span><span class='const'>Unicode</span><span class='period'>.</span><span class='id identifier rubyid_default_normalization_form'>default_normalization_form</span> <span class='op'>=</span> <span class='symbeg'>:</span><span class='id identifier rubyid_c'>c</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/multibyte/unicode.rb#L19-L19'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


19</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/multibyte/unicode.rb', line 19</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_accessor'>attr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_default_normalization_form'>default_normalization_form</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="apply_mapping-instance_method">
  <h3 class='signature priv first'>
    #<strong>apply_mapping</strong>(string, mapping)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/multibyte/unicode.rb#L371-L381'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


371
372
373
374
375
376
377
378
379
380
381</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/multibyte/unicode.rb', line 371</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_apply_mapping'>apply_mapping</span><span class='lparen'>(</span><span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='id identifier rubyid_mapping'>mapping</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_database'>database</span><span class='period'>.</span><span class='id identifier rubyid_codepoints'>codepoints</span>
  <span class='id identifier rubyid_string'>string</span><span class='period'>.</span><span class='id identifier rubyid_each_codepoint'>each_codepoint</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_codepoint'>codepoint</span><span class='op'>|</span>
    <span class='id identifier rubyid_cp'>cp</span> <span class='op'>=</span> <span class='id identifier rubyid_database'>database</span><span class='period'>.</span><span class='id identifier rubyid_codepoints'>codepoints</span><span class='lbracket'>[</span><span class='id identifier rubyid_codepoint'>codepoint</span><span class='rbracket'>]</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_cp'>cp</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_ncp'>ncp</span> <span class='op'>=</span> <span class='id identifier rubyid_cp'>cp</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_mapping'>mapping</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_ncp'>ncp</span> <span class='op'>&gt;</span> <span class='int'>0</span>
      <span class='id identifier rubyid_ncp'>ncp</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_codepoint'>codepoint</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_pack'>pack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>U*</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="compose-instance_method">
  <h3 class='signature '>
    #<strong>compose</strong>(codepoints)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Compose decomposed characters to the composed form.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/multibyte/unicode.rb#L159-L215'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/multibyte/unicode.rb', line 159</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_compose'>compose</span><span class='lparen'>(</span><span class='id identifier rubyid_codepoints'>codepoints</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_pos'>pos</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='id identifier rubyid_eoa'>eoa</span> <span class='op'>=</span> <span class='id identifier rubyid_codepoints'>codepoints</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>-</span> <span class='int'>1</span>
  <span class='id identifier rubyid_starter_pos'>starter_pos</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='id identifier rubyid_starter_char'>starter_char</span> <span class='op'>=</span> <span class='id identifier rubyid_codepoints'>codepoints</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_previous_combining_class'>previous_combining_class</span> <span class='op'>=</span> <span class='op'>-</span><span class='int'>1</span>
  <span class='kw'>while</span> <span class='id identifier rubyid_pos'>pos</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_eoa'>eoa</span>
    <span class='id identifier rubyid_pos'>pos</span> <span class='op'>+=</span> <span class='int'>1</span>
    <span class='id identifier rubyid_lindex'>lindex</span> <span class='op'>=</span> <span class='id identifier rubyid_starter_char'>starter_char</span> <span class='op'>-</span> <span class='const'><a href="#HANGUL_LBASE-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_LBASE (constant)">HANGUL_LBASE</a></span>
    <span class='comment'># -- Hangul
</span>    <span class='kw'>if</span> <span class='int'>0</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_lindex'>lindex</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_lindex'>lindex</span> <span class='op'>&lt;</span> <span class='const'><a href="#HANGUL_LCOUNT-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_LCOUNT (constant)">HANGUL_LCOUNT</a></span>
      <span class='id identifier rubyid_vindex'>vindex</span> <span class='op'>=</span> <span class='id identifier rubyid_codepoints'>codepoints</span><span class='lbracket'>[</span><span class='id identifier rubyid_starter_pos'>starter_pos</span> <span class='op'>+</span> <span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>-</span> <span class='const'><a href="#HANGUL_VBASE-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_VBASE (constant)">HANGUL_VBASE</a></span> <span class='kw'>rescue</span> <span class='id identifier rubyid_vindex'>vindex</span> <span class='op'>=</span> <span class='op'>-</span><span class='int'>1</span>
      <span class='kw'>if</span> <span class='int'>0</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_vindex'>vindex</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_vindex'>vindex</span> <span class='op'>&lt;</span> <span class='const'><a href="#HANGUL_VCOUNT-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_VCOUNT (constant)">HANGUL_VCOUNT</a></span>
        <span class='id identifier rubyid_tindex'>tindex</span> <span class='op'>=</span> <span class='id identifier rubyid_codepoints'>codepoints</span><span class='lbracket'>[</span><span class='id identifier rubyid_starter_pos'>starter_pos</span> <span class='op'>+</span> <span class='int'>2</span><span class='rbracket'>]</span> <span class='op'>-</span> <span class='const'><a href="#HANGUL_TBASE-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_TBASE (constant)">HANGUL_TBASE</a></span> <span class='kw'>rescue</span> <span class='id identifier rubyid_tindex'>tindex</span> <span class='op'>=</span> <span class='op'>-</span><span class='int'>1</span>
        <span class='kw'>if</span> <span class='int'>0</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_tindex'>tindex</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_tindex'>tindex</span> <span class='op'>&lt;</span> <span class='const'><a href="#HANGUL_TCOUNT-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_TCOUNT (constant)">HANGUL_TCOUNT</a></span>
          <span class='id identifier rubyid_j'>j</span> <span class='op'>=</span> <span class='id identifier rubyid_starter_pos'>starter_pos</span> <span class='op'>+</span> <span class='int'>2</span>
          <span class='id identifier rubyid_eoa'>eoa</span> <span class='op'>-=</span> <span class='int'>2</span>
        <span class='kw'>else</span>
          <span class='id identifier rubyid_tindex'>tindex</span> <span class='op'>=</span> <span class='int'>0</span>
          <span class='id identifier rubyid_j'>j</span> <span class='op'>=</span> <span class='id identifier rubyid_starter_pos'>starter_pos</span> <span class='op'>+</span> <span class='int'>1</span>
          <span class='id identifier rubyid_eoa'>eoa</span> <span class='op'>-=</span> <span class='int'>1</span>
        <span class='kw'>end</span>
        <span class='id identifier rubyid_codepoints'>codepoints</span><span class='lbracket'>[</span><span class='id identifier rubyid_starter_pos'>starter_pos</span><span class='op'>..</span><span class='id identifier rubyid_j'>j</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_lindex'>lindex</span> <span class='op'>*</span> <span class='const'><a href="#HANGUL_VCOUNT-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_VCOUNT (constant)">HANGUL_VCOUNT</a></span> <span class='op'>+</span> <span class='id identifier rubyid_vindex'>vindex</span><span class='rparen'>)</span> <span class='op'>*</span> <span class='const'><a href="#HANGUL_TCOUNT-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_TCOUNT (constant)">HANGUL_TCOUNT</a></span> <span class='op'>+</span> <span class='id identifier rubyid_tindex'>tindex</span> <span class='op'>+</span> <span class='const'><a href="#HANGUL_SBASE-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_SBASE (constant)">HANGUL_SBASE</a></span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_starter_pos'>starter_pos</span> <span class='op'>+=</span> <span class='int'>1</span>
      <span class='id identifier rubyid_starter_char'>starter_char</span> <span class='op'>=</span> <span class='id identifier rubyid_codepoints'>codepoints</span><span class='lbracket'>[</span><span class='id identifier rubyid_starter_pos'>starter_pos</span><span class='rbracket'>]</span>
    <span class='comment'># -- Other characters
</span>    <span class='kw'>else</span>
      <span class='id identifier rubyid_current_char'>current_char</span> <span class='op'>=</span> <span class='id identifier rubyid_codepoints'>codepoints</span><span class='lbracket'>[</span><span class='id identifier rubyid_pos'>pos</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_current'>current</span> <span class='op'>=</span> <span class='id identifier rubyid_database'>database</span><span class='period'>.</span><span class='id identifier rubyid_codepoints'>codepoints</span><span class='lbracket'>[</span><span class='id identifier rubyid_current_char'>current_char</span><span class='rbracket'>]</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_current'>current</span><span class='period'>.</span><span class='id identifier rubyid_combining_class'>combining_class</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_previous_combining_class'>previous_combining_class</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_ref'>ref</span> <span class='op'>=</span> <span class='id identifier rubyid_database'>database</span><span class='period'>.</span><span class='id identifier rubyid_composition_map'>composition_map</span><span class='lbracket'>[</span><span class='id identifier rubyid_starter_char'>starter_char</span><span class='rbracket'>]</span>
          <span class='id identifier rubyid_composition'>composition</span> <span class='op'>=</span> <span class='id identifier rubyid_ref'>ref</span><span class='lbracket'>[</span><span class='id identifier rubyid_current_char'>current_char</span><span class='rbracket'>]</span>
        <span class='kw'>else</span>
          <span class='id identifier rubyid_composition'>composition</span> <span class='op'>=</span> <span class='kw'>nil</span>
        <span class='kw'>end</span>
        <span class='kw'>unless</span> <span class='id identifier rubyid_composition'>composition</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
          <span class='id identifier rubyid_codepoints'>codepoints</span><span class='lbracket'>[</span><span class='id identifier rubyid_starter_pos'>starter_pos</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_composition'>composition</span>
          <span class='id identifier rubyid_starter_char'>starter_char</span> <span class='op'>=</span> <span class='id identifier rubyid_composition'>composition</span>
          <span class='id identifier rubyid_codepoints'>codepoints</span><span class='period'>.</span><span class='id identifier rubyid_delete_at'>delete_at</span> <span class='id identifier rubyid_pos'>pos</span>
          <span class='id identifier rubyid_eoa'>eoa</span> <span class='op'>-=</span> <span class='int'>1</span>
          <span class='id identifier rubyid_pos'>pos</span> <span class='op'>-=</span> <span class='int'>1</span>
          <span class='id identifier rubyid_previous_combining_class'>previous_combining_class</span> <span class='op'>=</span> <span class='op'>-</span><span class='int'>1</span>
        <span class='kw'>else</span>
          <span class='id identifier rubyid_previous_combining_class'>previous_combining_class</span> <span class='op'>=</span> <span class='id identifier rubyid_current'>current</span><span class='period'>.</span><span class='id identifier rubyid_combining_class'>combining_class</span>
        <span class='kw'>end</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_previous_combining_class'>previous_combining_class</span> <span class='op'>=</span> <span class='id identifier rubyid_current'>current</span><span class='period'>.</span><span class='id identifier rubyid_combining_class'>combining_class</span>
      <span class='kw'>end</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_current'>current</span><span class='period'>.</span><span class='id identifier rubyid_combining_class'>combining_class</span> <span class='op'>==</span> <span class='int'>0</span>
        <span class='id identifier rubyid_starter_pos'>starter_pos</span> <span class='op'>=</span> <span class='id identifier rubyid_pos'>pos</span>
        <span class='id identifier rubyid_starter_char'>starter_char</span> <span class='op'>=</span> <span class='id identifier rubyid_codepoints'>codepoints</span><span class='lbracket'>[</span><span class='id identifier rubyid_pos'>pos</span><span class='rbracket'>]</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_codepoints'>codepoints</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="database-instance_method">
  <h3 class='signature priv'>
    #<strong>database</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/multibyte/unicode.rb#L387-L389'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


387
388
389</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/multibyte/unicode.rb', line 387</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_database'>database</span>
  <span class='ivar'>@database</span> <span class='op'>||=</span> <span class='const'><a href="Unicode/UnicodeDatabase.html" title="ActiveSupport::Multibyte::Unicode::UnicodeDatabase (class)">UnicodeDatabase</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="Unicode/UnicodeDatabase.html#new-class_method" title="ActiveSupport::Multibyte::Unicode::UnicodeDatabase.new (method)">new</a></span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="decompose-instance_method">
  <h3 class='signature '>
    #<strong>decompose</strong>(type, codepoints)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Decompose composed characters to the decomposed form.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/multibyte/unicode.rb#L138-L156'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/multibyte/unicode.rb', line 138</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_decompose'>decompose</span><span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_codepoints'>codepoints</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_codepoints'>codepoints</span><span class='period'>.</span><span class='id identifier rubyid_inject'>inject</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_decomposed'>decomposed</span><span class='comma'>,</span> <span class='id identifier rubyid_cp'>cp</span><span class='op'>|</span>
    <span class='comment'># if it&#39;s a hangul syllable starter character
</span>    <span class='kw'>if</span> <span class='const'><a href="#HANGUL_SBASE-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_SBASE (constant)">HANGUL_SBASE</a></span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_cp'>cp</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_cp'>cp</span> <span class='op'>&lt;</span> <span class='const'><a href="#HANGUL_SLAST-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_SLAST (constant)">HANGUL_SLAST</a></span>
      <span class='id identifier rubyid_sindex'>sindex</span> <span class='op'>=</span> <span class='id identifier rubyid_cp'>cp</span> <span class='op'>-</span> <span class='const'><a href="#HANGUL_SBASE-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_SBASE (constant)">HANGUL_SBASE</a></span>
      <span class='id identifier rubyid_ncp'>ncp</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='comment'># new codepoints
</span>      <span class='id identifier rubyid_ncp'>ncp</span> <span class='op'>&lt;&lt;</span> <span class='const'><a href="#HANGUL_LBASE-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_LBASE (constant)">HANGUL_LBASE</a></span> <span class='op'>+</span> <span class='id identifier rubyid_sindex'>sindex</span> <span class='op'>/</span> <span class='const'><a href="#HANGUL_NCOUNT-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_NCOUNT (constant)">HANGUL_NCOUNT</a></span>
      <span class='id identifier rubyid_ncp'>ncp</span> <span class='op'>&lt;&lt;</span> <span class='const'><a href="#HANGUL_VBASE-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_VBASE (constant)">HANGUL_VBASE</a></span> <span class='op'>+</span> <span class='lparen'>(</span><span class='id identifier rubyid_sindex'>sindex</span> <span class='op'>%</span> <span class='const'><a href="#HANGUL_NCOUNT-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_NCOUNT (constant)">HANGUL_NCOUNT</a></span><span class='rparen'>)</span> <span class='op'>/</span> <span class='const'><a href="#HANGUL_TCOUNT-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_TCOUNT (constant)">HANGUL_TCOUNT</a></span>
      <span class='id identifier rubyid_tindex'>tindex</span> <span class='op'>=</span> <span class='id identifier rubyid_sindex'>sindex</span> <span class='op'>%</span> <span class='const'><a href="#HANGUL_TCOUNT-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_TCOUNT (constant)">HANGUL_TCOUNT</a></span>
      <span class='id identifier rubyid_ncp'>ncp</span> <span class='op'>&lt;&lt;</span> <span class='lparen'>(</span><span class='const'><a href="#HANGUL_TBASE-constant" title="ActiveSupport::Multibyte::Unicode::HANGUL_TBASE (constant)">HANGUL_TBASE</a></span> <span class='op'>+</span> <span class='id identifier rubyid_tindex'>tindex</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_tindex'>tindex</span> <span class='op'>==</span> <span class='int'>0</span>
      <span class='id identifier rubyid_decomposed'>decomposed</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='id identifier rubyid_ncp'>ncp</span>
    <span class='comment'># if the codepoint is decomposable in with the current decomposition type
</span>    <span class='kw'>elsif</span> <span class='lparen'>(</span><span class='id identifier rubyid_ncp'>ncp</span> <span class='op'>=</span> <span class='id identifier rubyid_database'>database</span><span class='period'>.</span><span class='id identifier rubyid_codepoints'>codepoints</span><span class='lbracket'>[</span><span class='id identifier rubyid_cp'>cp</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_decomp_mapping'>decomp_mapping</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='op'>!</span><span class='id identifier rubyid_database'>database</span><span class='period'>.</span><span class='id identifier rubyid_codepoints'>codepoints</span><span class='lbracket'>[</span><span class='id identifier rubyid_cp'>cp</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_decomp_type'>decomp_type</span> <span class='op'>||</span> <span class='id identifier rubyid_type'>type</span> <span class='op'>==</span> <span class='symbeg'>:</span><span class='id identifier rubyid_compatibility'>compatibility</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_decomposed'>decomposed</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span> <span class='id identifier rubyid_decompose'>decompose</span><span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_ncp'>ncp</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_decomposed'>decomposed</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_cp'>cp</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="downcase-instance_method">
  <h3 class='signature '>
    #<strong>downcase</strong>(string)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/multibyte/unicode.rb#L282-L284'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


282
283
284</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/multibyte/unicode.rb', line 282</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_downcase'>downcase</span><span class='lparen'>(</span><span class='id identifier rubyid_string'>string</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_apply_mapping'>apply_mapping</span> <span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_lowercase_mapping'>lowercase_mapping</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="in_char_class?-instance_method">
  <h3 class='signature '>
    #<strong>in_char_class?</strong>(codepoint, classes)  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Detect whether the codepoint is in a certain character class. Returns
<code>true</code> when it&#39;s in the specified character class and <code>false</code>
otherwise. Valid character classes are: <code>:cr</code>, <code>:lf</code>,
<code>:l</code>, <code>:v</code>, <code>:lv</code>, <code>:lvt</code> and
<code>:t</code>.</p>

<p>Primarily used by the grapheme cluster support.</p>

  </div>
</div>
<div class='tags'>
  
</div>  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/multibyte/unicode.rb#L40-L42'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


40
41
42</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/multibyte/unicode.rb', line 40</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_in_char_class?'>in_char_class?</span><span class='lparen'>(</span><span class='id identifier rubyid_codepoint'>codepoint</span><span class='comma'>,</span> <span class='id identifier rubyid_classes'>classes</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_classes'>classes</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span> <span class='id identifier rubyid_database'>database</span><span class='period'>.</span><span class='id identifier rubyid_boundary'>boundary</span><span class='lbracket'>[</span><span class='id identifier rubyid_c'>c</span><span class='rbracket'>]</span> <span class='op'>===</span> <span class='id identifier rubyid_codepoint'>codepoint</span> <span class='rbrace'>}</span> <span class='op'>?</span> <span class='kw'>true</span> <span class='op'>:</span> <span class='kw'>false</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="normalize-instance_method">
  <h3 class='signature '>
    #<strong>normalize</strong>(string, form = nil)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns the KC normalization of the string by default. NFKC is considered
the best normalization form for passing strings to databases and
validations.</p>
<ul><li>
<p><code>string</code> - The string to perform normalization on.</p>
</li><li>
<p><code>form</code> - The form you want to normalize in. Should be one of the following:
<code>:c</code>, <code>:kc</code>, <code>:d</code>, or <code>:kd</code>.
Default is ActiveSupport::Multibyte::Unicode.default_normalization_form.</p>
</li></ul>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/multibyte/unicode.rb#L264-L280'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/multibyte/unicode.rb', line 264</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_normalize'>normalize</span><span class='lparen'>(</span><span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='id identifier rubyid_form'>form</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_form'>form</span> <span class='op'>||=</span> <span class='ivar'>@default_normalization_form</span>
  <span class='comment'># See http://www.unicode.org/reports/tr15, Table 1
</span>  <span class='id identifier rubyid_codepoints'>codepoints</span> <span class='op'>=</span> <span class='id identifier rubyid_string'>string</span><span class='period'>.</span><span class='id identifier rubyid_codepoints'>codepoints</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span>
  <span class='kw'>case</span> <span class='id identifier rubyid_form'>form</span>
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_d'>d</span>
    <span class='id identifier rubyid_reorder_characters'>reorder_characters</span><span class='lparen'>(</span><span class='id identifier rubyid_decompose'>decompose</span><span class='lparen'>(</span><span class='symbeg'>:</span><span class='id identifier rubyid_canonical'>canonical</span><span class='comma'>,</span> <span class='id identifier rubyid_codepoints'>codepoints</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_c'>c</span>
    <span class='id identifier rubyid_compose'>compose</span><span class='lparen'>(</span><span class='id identifier rubyid_reorder_characters'>reorder_characters</span><span class='lparen'>(</span><span class='id identifier rubyid_decompose'>decompose</span><span class='lparen'>(</span><span class='symbeg'>:</span><span class='id identifier rubyid_canonical'>canonical</span><span class='comma'>,</span> <span class='id identifier rubyid_codepoints'>codepoints</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_kd'>kd</span>
    <span class='id identifier rubyid_reorder_characters'>reorder_characters</span><span class='lparen'>(</span><span class='id identifier rubyid_decompose'>decompose</span><span class='lparen'>(</span><span class='symbeg'>:</span><span class='id identifier rubyid_compatibility'>compatibility</span><span class='comma'>,</span> <span class='id identifier rubyid_codepoints'>codepoints</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='symbeg'>:</span><span class='id identifier rubyid_kc'>kc</span>
    <span class='id identifier rubyid_compose'>compose</span><span class='lparen'>(</span><span class='id identifier rubyid_reorder_characters'>reorder_characters</span><span class='lparen'>(</span><span class='id identifier rubyid_decompose'>decompose</span><span class='lparen'>(</span><span class='symbeg'>:</span><span class='id identifier rubyid_compatibility'>compatibility</span><span class='comma'>,</span> <span class='id identifier rubyid_codepoints'>codepoints</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_form'>form</span><span class='embexpr_end'>}</span><span class='tstring_content'> is not a valid normalization variant</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_caller'>caller</span>
  <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_pack'>pack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>U*</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="pack_graphemes-instance_method">
  <h3 class='signature '>
    #<strong>pack_graphemes</strong>(unpacked)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Reverse operation of unpack_graphemes.</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Unicode</span><span class='period'>.</span><span class='id identifier rubyid_pack_graphemes'>pack_graphemes</span><span class='lparen'>(</span><span class='const'>Unicode</span><span class='period'>.</span><span class='id identifier rubyid_unpack_graphemes'><a href="#unpack_graphemes-instance_method" title="ActiveSupport::Multibyte::Unicode#unpack_graphemes (method)">unpack_graphemes</a></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>क्षि</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='comment'># =&gt; &#39;क्षि&#39;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/multibyte/unicode.rb#L117-L119'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


117
118
119</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/multibyte/unicode.rb', line 117</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_pack_graphemes'>pack_graphemes</span><span class='lparen'>(</span><span class='id identifier rubyid_unpacked'>unpacked</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_unpacked'>unpacked</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span><span class='period'>.</span><span class='id identifier rubyid_pack'>pack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>U*</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="recode_windows1252_chars-instance_method">
  <h3 class='signature priv'>
    #<strong>recode_windows1252_chars</strong>(string)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/multibyte/unicode.rb#L383-L385'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


383
384
385</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/multibyte/unicode.rb', line 383</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_recode_windows1252_chars'>recode_windows1252_chars</span><span class='lparen'>(</span><span class='id identifier rubyid_string'>string</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_string'>string</span><span class='period'>.</span><span class='id identifier rubyid_encode'>encode</span><span class='lparen'>(</span><span class='const'>Encoding</span><span class='op'>::</span><span class='const'>UTF_8</span><span class='comma'>,</span> <span class='const'>Encoding</span><span class='op'>::</span><span class='const'>Windows_1252</span><span class='comma'>,</span> <span class='label'>invalid:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_replace'>replace</span><span class='comma'>,</span> <span class='label'>undef:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_replace'>replace</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="reorder_characters-instance_method">
  <h3 class='signature '>
    #<strong>reorder_characters</strong>(codepoints)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Re-order codepoints so the string becomes canonical.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/multibyte/unicode.rb#L122-L135'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


122
123
124
125
126
127
128
129
130
131
132
133
134
135</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/multibyte/unicode.rb', line 122</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_reorder_characters'>reorder_characters</span><span class='lparen'>(</span><span class='id identifier rubyid_codepoints'>codepoints</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_length'>length</span> <span class='op'>=</span> <span class='id identifier rubyid_codepoints'>codepoints</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>-</span> <span class='int'>1</span>
  <span class='id identifier rubyid_pos'>pos</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='kw'>while</span> <span class='id identifier rubyid_pos'>pos</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_length'>length</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_cp1'>cp1</span><span class='comma'>,</span> <span class='id identifier rubyid_cp2'>cp2</span> <span class='op'>=</span> <span class='id identifier rubyid_database'>database</span><span class='period'>.</span><span class='id identifier rubyid_codepoints'>codepoints</span><span class='lbracket'>[</span><span class='id identifier rubyid_codepoints'>codepoints</span><span class='lbracket'>[</span><span class='id identifier rubyid_pos'>pos</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_database'>database</span><span class='period'>.</span><span class='id identifier rubyid_codepoints'>codepoints</span><span class='lbracket'>[</span><span class='id identifier rubyid_codepoints'>codepoints</span><span class='lbracket'>[</span><span class='id identifier rubyid_pos'>pos</span> <span class='op'>+</span> <span class='int'>1</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
    <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_cp1'>cp1</span><span class='period'>.</span><span class='id identifier rubyid_combining_class'>combining_class</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_cp2'>cp2</span><span class='period'>.</span><span class='id identifier rubyid_combining_class'>combining_class</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_cp2'>cp2</span><span class='period'>.</span><span class='id identifier rubyid_combining_class'>combining_class</span> <span class='op'>&gt;</span> <span class='int'>0</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_codepoints'>codepoints</span><span class='lbracket'>[</span><span class='id identifier rubyid_pos'>pos</span><span class='op'>..</span><span class='id identifier rubyid_pos'>pos</span> <span class='op'>+</span> <span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_cp2'>cp2</span><span class='period'>.</span><span class='id identifier rubyid_code'>code</span><span class='comma'>,</span> <span class='id identifier rubyid_cp1'>cp1</span><span class='period'>.</span><span class='id identifier rubyid_code'>code</span>
      <span class='id identifier rubyid_pos'>pos</span> <span class='op'>+=</span> <span class='lparen'>(</span><span class='id identifier rubyid_pos'>pos</span> <span class='op'>&gt;</span> <span class='int'>0</span> <span class='op'>?</span> <span class='op'>-</span><span class='int'>1</span> <span class='op'>:</span> <span class='int'>1</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_pos'>pos</span> <span class='op'>+=</span> <span class='int'>1</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_codepoints'>codepoints</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="swapcase-instance_method">
  <h3 class='signature '>
    #<strong>swapcase</strong>(string)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/multibyte/unicode.rb#L290-L292'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


290
291
292</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/multibyte/unicode.rb', line 290</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_swapcase'>swapcase</span><span class='lparen'>(</span><span class='id identifier rubyid_string'>string</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_apply_mapping'>apply_mapping</span> <span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_swapcase_mapping'>swapcase_mapping</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="tidy_bytes-instance_method">
  <h3 class='signature '>
    #<strong>tidy_bytes</strong>(string, force = false)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>See additional method definition at line 224.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/multibyte/unicode.rb#L230-L253'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/multibyte/unicode.rb', line 230</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_tidy_bytes'>tidy_bytes</span><span class='lparen'>(</span><span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='id identifier rubyid_force'>force</span> <span class='op'>=</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_string'>string</span> <span class='kw'>if</span> <span class='id identifier rubyid_string'>string</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_recode_windows1252_chars'>recode_windows1252_chars</span><span class='lparen'>(</span><span class='id identifier rubyid_string'>string</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_force'>force</span>

  <span class='comment'># We can&#39;t transcode to the same format, so we choose a nearly-identical encoding.
</span>  <span class='comment'># We&#39;re going to &#39;transcode&#39; bytes from UTF-8 when possible, then fall back to
</span>  <span class='comment'># CP1252 when we get errors. The final string will be &#39;converted&#39; back to UTF-8
</span>  <span class='comment'># before returning.
</span>  <span class='id identifier rubyid_reader'>reader</span> <span class='op'>=</span> <span class='const'>Encoding</span><span class='op'>::</span><span class='const'>Converter</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='const'>Encoding</span><span class='op'>::</span><span class='const'>UTF_8</span><span class='comma'>,</span> <span class='const'>Encoding</span><span class='op'>::</span><span class='const'>UTF_16LE</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_source'>source</span> <span class='op'>=</span> <span class='id identifier rubyid_string'>string</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
  <span class='id identifier rubyid_out'>out</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_force_encoding'>force_encoding</span><span class='lparen'>(</span><span class='const'>Encoding</span><span class='op'>::</span><span class='const'>UTF_16LE</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_loop'>loop</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_reader'>reader</span><span class='period'>.</span><span class='id identifier rubyid_primitive_convert'>primitive_convert</span><span class='lparen'>(</span><span class='id identifier rubyid_source'>source</span><span class='comma'>,</span> <span class='id identifier rubyid_out'>out</span><span class='rparen'>)</span>
    <span class='id identifier rubyid__'>_</span><span class='comma'>,</span> <span class='id identifier rubyid__'>_</span><span class='comma'>,</span> <span class='id identifier rubyid__'>_</span><span class='comma'>,</span> <span class='id identifier rubyid_error_bytes'>error_bytes</span><span class='comma'>,</span> <span class='id identifier rubyid__'>_</span> <span class='op'>=</span> <span class='id identifier rubyid_reader'>reader</span><span class='period'>.</span><span class='id identifier rubyid_primitive_errinfo'>primitive_errinfo</span>
    <span class='kw'>break</span> <span class='kw'>if</span> <span class='id identifier rubyid_error_bytes'>error_bytes</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_out'>out</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_error_bytes'>error_bytes</span><span class='period'>.</span><span class='id identifier rubyid_encode'>encode</span><span class='lparen'>(</span><span class='const'>Encoding</span><span class='op'>::</span><span class='const'>UTF_16LE</span><span class='comma'>,</span> <span class='const'>Encoding</span><span class='op'>::</span><span class='const'>Windows_1252</span><span class='comma'>,</span> <span class='label'>invalid:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_replace'>replace</span><span class='comma'>,</span> <span class='label'>undef:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_replace'>replace</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_reader'>reader</span><span class='period'>.</span><span class='id identifier rubyid_finish'>finish</span>

  <span class='id identifier rubyid_out'>out</span><span class='period'>.</span><span class='id identifier rubyid_encode!'>encode!</span><span class='lparen'>(</span><span class='const'>Encoding</span><span class='op'>::</span><span class='const'>UTF_8</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="unpack_graphemes-instance_method">
  <h3 class='signature '>
    #<strong>unpack_graphemes</strong>(string)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Unpack the string at grapheme boundaries. Returns a list of character
lists.</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Unicode</span><span class='period'>.</span><span class='id identifier rubyid_unpack_graphemes'>unpack_graphemes</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>क्षि</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='comment'># =&gt; [[2325, 2381], [2359], [2367]]
</span><span class='const'>Unicode</span><span class='period'>.</span><span class='id identifier rubyid_unpack_graphemes'>unpack_graphemes</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Café</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='comment'># =&gt; [[67], [97], [102], [233]]</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/multibyte/unicode.rb#L49-L112'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/multibyte/unicode.rb', line 49</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_unpack_graphemes'>unpack_graphemes</span><span class='lparen'>(</span><span class='id identifier rubyid_string'>string</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_codepoints'>codepoints</span> <span class='op'>=</span> <span class='id identifier rubyid_string'>string</span><span class='period'>.</span><span class='id identifier rubyid_codepoints'>codepoints</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span>
  <span class='id identifier rubyid_unpacked'>unpacked</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_pos'>pos</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='id identifier rubyid_marker'>marker</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='id identifier rubyid_eoc'>eoc</span> <span class='op'>=</span> <span class='id identifier rubyid_codepoints'>codepoints</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span>
  <span class='kw'>while</span> <span class='lparen'>(</span><span class='id identifier rubyid_pos'>pos</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_eoc'>eoc</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_pos'>pos</span> <span class='op'>+=</span> <span class='int'>1</span>
    <span class='id identifier rubyid_previous'>previous</span> <span class='op'>=</span> <span class='id identifier rubyid_codepoints'>codepoints</span><span class='lbracket'>[</span><span class='id identifier rubyid_pos'>pos</span> <span class='op'>-</span> <span class='int'>1</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_current'>current</span> <span class='op'>=</span> <span class='id identifier rubyid_codepoints'>codepoints</span><span class='lbracket'>[</span><span class='id identifier rubyid_pos'>pos</span><span class='rbracket'>]</span>

    <span class='comment'># See http://unicode.org/reports/tr29/#Grapheme_Cluster_Boundary_Rules
</span>    <span class='id identifier rubyid_should_break'>should_break</span> <span class='op'>=</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_pos'>pos</span> <span class='op'>==</span> <span class='id identifier rubyid_eoc'>eoc</span>
        <span class='kw'>true</span>
      <span class='comment'># GB3. CR X LF
</span>      <span class='kw'>elsif</span> <span class='id identifier rubyid_previous'>previous</span> <span class='op'>==</span> <span class='id identifier rubyid_database'>database</span><span class='period'>.</span><span class='id identifier rubyid_boundary'>boundary</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_cr'>cr</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_current'>current</span> <span class='op'>==</span> <span class='id identifier rubyid_database'>database</span><span class='period'>.</span><span class='id identifier rubyid_boundary'>boundary</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_lf'>lf</span><span class='rbracket'>]</span>
        <span class='kw'>false</span>
      <span class='comment'># GB4. (Control|CR|LF) ÷
</span>      <span class='kw'>elsif</span> <span class='id identifier rubyid_previous'>previous</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_in_char_class?'>in_char_class?</span><span class='lparen'>(</span><span class='id identifier rubyid_previous'>previous</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_control'>control</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_cr'>cr</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_lf'>lf</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='kw'>true</span>
      <span class='comment'># GB5. ÷ (Control|CR|LF)
</span>      <span class='kw'>elsif</span> <span class='id identifier rubyid_in_char_class?'>in_char_class?</span><span class='lparen'>(</span><span class='id identifier rubyid_current'>current</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_control'>control</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_cr'>cr</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_lf'>lf</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='kw'>true</span>
      <span class='comment'># GB6. L X (L|V|LV|LVT)
</span>      <span class='kw'>elsif</span> <span class='id identifier rubyid_database'>database</span><span class='period'>.</span><span class='id identifier rubyid_boundary'>boundary</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_l'>l</span><span class='rbracket'>]</span> <span class='op'>===</span> <span class='id identifier rubyid_previous'>previous</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_in_char_class?'>in_char_class?</span><span class='lparen'>(</span><span class='id identifier rubyid_current'>current</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_l'>l</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_v'>v</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_lv'>lv</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_lvt'>lvt</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='kw'>false</span>
      <span class='comment'># GB7. (LV|V) X (V|T)
</span>      <span class='kw'>elsif</span> <span class='id identifier rubyid_in_char_class?'>in_char_class?</span><span class='lparen'>(</span><span class='id identifier rubyid_previous'>previous</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_lv'>lv</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_v'>v</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_in_char_class?'>in_char_class?</span><span class='lparen'>(</span><span class='id identifier rubyid_current'>current</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_v'>v</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_t'>t</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='kw'>false</span>
      <span class='comment'># GB8. (LVT|T) X (T)
</span>      <span class='kw'>elsif</span> <span class='id identifier rubyid_in_char_class?'>in_char_class?</span><span class='lparen'>(</span><span class='id identifier rubyid_previous'>previous</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_lvt'>lvt</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_t'>t</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_database'>database</span><span class='period'>.</span><span class='id identifier rubyid_boundary'>boundary</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_t'>t</span><span class='rbracket'>]</span> <span class='op'>===</span> <span class='id identifier rubyid_current'>current</span>
        <span class='kw'>false</span>
      <span class='comment'># GB9. X (Extend | ZWJ)
</span>      <span class='kw'>elsif</span> <span class='id identifier rubyid_in_char_class?'>in_char_class?</span><span class='lparen'>(</span><span class='id identifier rubyid_current'>current</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_extend'>extend</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_zwj'>zwj</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='kw'>false</span>
      <span class='comment'># GB9a. X SpacingMark
</span>      <span class='kw'>elsif</span> <span class='id identifier rubyid_database'>database</span><span class='period'>.</span><span class='id identifier rubyid_boundary'>boundary</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_spacingmark'>spacingmark</span><span class='rbracket'>]</span> <span class='op'>===</span> <span class='id identifier rubyid_current'>current</span>
        <span class='kw'>false</span>
      <span class='comment'># GB9b. Prepend X
</span>      <span class='kw'>elsif</span> <span class='id identifier rubyid_database'>database</span><span class='period'>.</span><span class='id identifier rubyid_boundary'>boundary</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_prepend'>prepend</span><span class='rbracket'>]</span> <span class='op'>===</span> <span class='id identifier rubyid_previous'>previous</span>
        <span class='kw'>false</span>
      <span class='comment'># GB10. (E_Base | EBG) Extend* X E_Modifier
</span>      <span class='kw'>elsif</span> <span class='lparen'>(</span><span class='id identifier rubyid_marker'>marker</span><span class='op'>...</span><span class='id identifier rubyid_pos'>pos</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span> <span class='id identifier rubyid_in_char_class?'>in_char_class?</span><span class='lparen'>(</span><span class='id identifier rubyid_codepoints'>codepoints</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_e_base'>e_base</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_e_base_gaz'>e_base_gaz</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_codepoints'>codepoints</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span> <span class='op'>+</span> <span class='int'>1</span><span class='op'>...</span><span class='id identifier rubyid_pos'>pos</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_all?'>all?</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span> <span class='id identifier rubyid_database'>database</span><span class='period'>.</span><span class='id identifier rubyid_boundary'>boundary</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_extend'>extend</span><span class='rbracket'>]</span> <span class='op'>===</span> <span class='id identifier rubyid_c'>c</span> <span class='rbrace'>}</span> <span class='rbrace'>}</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_database'>database</span><span class='period'>.</span><span class='id identifier rubyid_boundary'>boundary</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_e_modifier'>e_modifier</span><span class='rbracket'>]</span> <span class='op'>===</span> <span class='id identifier rubyid_current'>current</span>
        <span class='kw'>false</span>
      <span class='comment'># GB11. ZWJ X (Glue_After_Zwj | EBG)
</span>      <span class='kw'>elsif</span> <span class='id identifier rubyid_database'>database</span><span class='period'>.</span><span class='id identifier rubyid_boundary'>boundary</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_zwj'>zwj</span><span class='rbracket'>]</span> <span class='op'>===</span> <span class='id identifier rubyid_previous'>previous</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_in_char_class?'>in_char_class?</span><span class='lparen'>(</span><span class='id identifier rubyid_current'>current</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_glue_after_zwj'>glue_after_zwj</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_e_base_gaz'>e_base_gaz</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='kw'>false</span>
      <span class='comment'># GB12. ^ (RI RI)* RI X RI
</span>      <span class='comment'># GB13. [^RI] (RI RI)* RI X RI
</span>      <span class='kw'>elsif</span> <span class='id identifier rubyid_codepoints'>codepoints</span><span class='lbracket'>[</span><span class='id identifier rubyid_marker'>marker</span><span class='op'>..</span><span class='id identifier rubyid_pos'>pos</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_all?'>all?</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span> <span class='id identifier rubyid_database'>database</span><span class='period'>.</span><span class='id identifier rubyid_boundary'>boundary</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_regional_indicator'>regional_indicator</span><span class='rbracket'>]</span> <span class='op'>===</span> <span class='id identifier rubyid_c'>c</span> <span class='rbrace'>}</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_codepoints'>codepoints</span><span class='lbracket'>[</span><span class='id identifier rubyid_marker'>marker</span><span class='op'>..</span><span class='id identifier rubyid_pos'>pos</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span> <span class='id identifier rubyid_database'>database</span><span class='period'>.</span><span class='id identifier rubyid_boundary'>boundary</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_regional_indicator'>regional_indicator</span><span class='rbracket'>]</span> <span class='op'>===</span> <span class='id identifier rubyid_c'>c</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_even?'>even?</span>
        <span class='kw'>false</span>
      <span class='comment'># GB999. Any ÷ Any
</span>      <span class='kw'>else</span>
        <span class='kw'>true</span>
      <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_should_break'>should_break</span>
      <span class='id identifier rubyid_unpacked'>unpacked</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_codepoints'>codepoints</span><span class='lbracket'>[</span><span class='id identifier rubyid_marker'>marker</span><span class='op'>..</span><span class='id identifier rubyid_pos'>pos</span> <span class='op'>-</span> <span class='int'>1</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_marker'>marker</span> <span class='op'>=</span> <span class='id identifier rubyid_pos'>pos</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_unpacked'>unpacked</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="upcase-instance_method">
  <h3 class='signature '>
    #<strong>upcase</strong>(string)  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/multibyte/unicode.rb#L286-L288'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


286
287
288</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/multibyte/unicode.rb', line 286</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_upcase'>upcase</span><span class='lparen'>(</span><span class='id identifier rubyid_string'>string</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_apply_mapping'>apply_mapping</span> <span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_uppercase_mapping'>uppercase_mapping</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.9.8 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.9.0 (ruby-2.5.0p-1)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>