<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: ActiveSupport::Cache::Store &mdash; Rails-master</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/common.css' />

<script type='text/javascript'>
  var pathId = "ActiveSupport::Cache::Store",
    relpath = '../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
        <a href='../../../index.html'>Home</a> &raquo; 
        <a href='../../index.html'>Rails-master</a> &raquo; 
        <a href='../../_index.html#alpha_S'>Index (S)</a> &raquo; 
        <a href="../../ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a> &raquo; 
        <a href="../Cache.html" title="ActiveSupport::Cache (module)">Cache</a> &raquo; 
        <span class='title'><a id='t2_doc_top' href='#'>Store&nbsp;&#x25B2;</a></span>
      </div>

    <a id='list_href' href="../../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: ActiveSupport::Cache::Store</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Extension / Inclusion / Inheritance Descendants</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Subclasses:</div>
        <div class='box_22'>
          <a href="FileStore.html" title="ActiveSupport::Cache::FileStore (class)">FileStore</a>, <a href="MemCacheStore.html" title="ActiveSupport::Cache::MemCacheStore (class)">MemCacheStore</a>, <a href="MemoryStore.html" title="ActiveSupport::Cache::MemoryStore (class)">MemoryStore</a>, <a href="NullStore.html" title="ActiveSupport::Cache::NullStore (class)">NullStore</a>, <a href="Strategy/LocalCache/LocalStore.html" title="ActiveSupport::Cache::Strategy::LocalCache::LocalStore (class)">ActiveSupport::Cache::Strategy::LocalCache::LocalStore</a>
        </div>
      </td>
    </tr>
    <tr>
      <td id='t2_inherits' class='box_2'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'><a href="../../Object.html" title="Object (class)">Object</a></span>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/cache.rb#L152'>activesupport/lib/active_support/cache.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>An abstract cache store class. There are multiple cache store
implementations, each having its own additional features. See the classes
under the <a href="../Cache.html" title="ActiveSupport::Cache (module)">::ActiveSupport::Cache</a> module, e.g.
<a href="MemCacheStore.html" title="ActiveSupport::Cache::MemCacheStore (class)">MemCacheStore</a>.
<a href="MemCacheStore.html" title="ActiveSupport::Cache::MemCacheStore (class)">MemCacheStore</a> is currently the most popular cache
store for large production websites.</p>

<p>Some implementations may not support all methods beyond the basic cache
methods of <a href="#fetch-instance_method" title="ActiveSupport::Cache::Store#fetch (method)">#fetch</a>, <a href="#write-instance_method" title="ActiveSupport::Cache::Store#write (method)">#write</a>, <a href="#read-instance_method" title="ActiveSupport::Cache::Store#read (method)">#read</a>, <a href="#exist%3F-instance_method" title="ActiveSupport::Cache::Store#exist? (method)">#exist?</a>, and <a href="#delete-instance_method" title="ActiveSupport::Cache::Store#delete (method)">#delete</a>.</p>

<p><code>Store</code> can store any serializable Ruby object.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_cache'>cache</span> <span class='op'>=</span> <span class='const'><a href="../../ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="../Cache.html" title="ActiveSupport::Cache (module)">Cache</a></span><span class='op'>::</span><span class='const'><a href="MemoryStore.html" title="ActiveSupport::Cache::MemoryStore (class)">MemoryStore</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="MemoryStore.html#new-class_method" title="ActiveSupport::Cache::MemoryStore.new (method)">new</a></span>

<span class='id identifier rubyid_cache'>cache</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>city</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>   <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_cache'>cache</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>city</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Duckburgh</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_cache'>cache</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>city</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>   <span class='comment'># =&gt; &quot;Duckburgh&quot;</span></code></pre>

<p>Keys are always translated into Strings and are case sensitive. When an
object is specified as a key and has a <code>cache_key</code> method defined, this
method will be called to define the key.  Otherwise, the <code>to_param</code> method
will be called. Hashes and Arrays can also be used as keys. The elements
will be delimited by slashes, and the elements within a <a href="../../Hash.html" title="Hash (class)">::Hash</a> will be
sorted by key so they are consistent.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_cache'>cache</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>city</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>==</span> <span class='id identifier rubyid_cache'>cache</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='symbeg'>:</span><span class='id identifier rubyid_city'>city</span><span class='rparen'>)</span>   <span class='comment'># =&gt; true</span></code></pre>

<p>Nil values can be cached.</p>

<p>If your cache is on a shared infrastructure, you can define a namespace for
your cache entries. If a namespace is defined, it will be prefixed on to
every key. The namespace can be either a static value or a Proc. If it is a
Proc, it will be invoked when each key is evaluated so that you can use
application logic to invalidate keys.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_cache'>cache</span><span class='period'>.</span><span class='id identifier rubyid_namespace'>namespace</span> <span class='op'>=</span> <span class='tlambda'>-&gt;</span> <span class='tlambeg'>{</span> <span class='ivar'>@last_mod_time</span> <span class='rbrace'>}</span>  <span class='comment'># Set the namespace to a variable
</span><span class='ivar'>@last_mod_time</span> <span class='op'>=</span> <span class='const'><a href="../../Time.html" title="Time (class)">Time</a></span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span>  <span class='comment'># Invalidate the entire cache by changing namespace</span></code></pre>

<p>Caches can also store values in a compressed format to save space and
reduce time spent sending data. Since there is overhead, values must be
large enough to warrant compression. To turn on compression either pass
<code>compress: true</code> in the initializer or as an option to <a href="#fetch-instance_method" title="ActiveSupport::Cache::Store#fetch (method)">#fetch</a>
or <a href="#write-instance_method" title="ActiveSupport::Cache::Store#write (method)">#write</a>. To specify the threshold at which to compress values, set the
<code>:compress_threshold</code> option. The default threshold is 16K.</p>

  </div>
</div>
</div>        

<h2 class='h2_sum' id='class_Attribute_summary'>Class Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature rw'>
      <a href="#logger-class_method" title=".logger (class method)">.<strong>logger</strong>  </a>
      (also: #logger)
    </span>
    <span class='note title rw'>rw</span>
  </li>
</ul>
</div>
        

<h2 class='h2_sum' id='class_Method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(options = nil)  &#x21d2; Store </a>
    </span>
    <span class='note title constructor'>constructor</span>
    <div class='summary_desc'>
      <div class='inline'><p>Creates a new cache.</p></div>
    </div>
  </li>
</ul>
</div>
        

<h2 class='h2_sum' id='instance_Attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature rw'>
      <a href="#logger-instance_method" title="#logger (instance method)">#<strong>logger</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#options-instance_method" title="#options (instance method)">#<strong>options</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#silence%3F-instance_method" title="#silence? (instance method)">#<strong>silence?</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <div class='summary_desc'>
      <div class='inline'><p>Alias for <a href="#silence-instance_method" title="ActiveSupport::Cache::Store#silence (method)">#silence</a>.</p></div>
    </div>
  </li>
</ul>
</div>
        

<h2 class='h2_sum' id='instance_Method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#cleanup-instance_method" title="#cleanup (instance method)">#<strong>cleanup</strong>(options = nil)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Cleanups the cache by removing expired entries.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#clear-instance_method" title="#clear (instance method)">#<strong>clear</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Clears the entire cache.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#decrement-instance_method" title="#decrement (instance method)">#<strong>decrement</strong>(name, amount = 1, options = nil)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Decrements an integer value in the cache.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#delete-instance_method" title="#delete (instance method)">#<strong>delete</strong>(name, options = nil)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Deletes an entry in the cache.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#delete_matched-instance_method" title="#delete_matched (instance method)">#<strong>delete_matched</strong>(matcher, options = nil)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Deletes all entries with keys matching the pattern.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#exist%3F-instance_method" title="#exist? (instance method)">#<strong>exist?</strong>(name, options = nil)  &#x21d2; Boolean </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Returns <code>true</code> if the cache contains an entry for the given key.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#fetch-instance_method" title="#fetch (instance method)">#<strong>fetch</strong>(name, options = nil)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Fetches data from the cache, using the given key.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#fetch_multi-instance_method" title="#fetch_multi (instance method)">#<strong>fetch_multi</strong>(*names)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Fetches data from the cache, using the given keys.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#increment-instance_method" title="#increment (instance method)">#<strong>increment</strong>(name, amount = 1, options = nil)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Increments an integer value in the cache.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#mute-instance_method" title="#mute (instance method)">#<strong>mute</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Silences the logger within a block.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#read-instance_method" title="#read (instance method)">#<strong>read</strong>(name, options = nil)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Fetches data from the cache, using the given key.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#read_multi-instance_method" title="#read_multi (instance method)">#<strong>read_multi</strong>(*names)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Reads multiple values at once from the cache.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#silence-instance_method" title="#silence (instance method)">#<strong>silence</strong>  </a>
      (also: #silence?)
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#silence!-instance_method" title="#silence! (instance method)">#<strong>silence!</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Silences the logger.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#write-instance_method" title="#write (instance method)">#<strong>write</strong>(name, value, options = nil)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Writes the value to the cache, with the key.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#delete_entry-instance_method" title="#delete_entry (instance method)">#<strong>delete_entry</strong>(key, options)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Deletes an entry from the cache implementation.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#expanded_key-instance_method" title="#expanded_key (instance method)">#<strong>expanded_key</strong>(key)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Expands key to be a consistent string value.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#get_entry_value-instance_method" title="#get_entry_value (instance method)">#<strong>get_entry_value</strong>(entry, name, options)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#handle_expired_entry-instance_method" title="#handle_expired_entry (instance method)">#<strong>handle_expired_entry</strong>(entry, key, options)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#instrument-instance_method" title="#instrument (instance method)">#<strong>instrument</strong>(operation, key, options = nil)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#key_matcher-instance_method" title="#key_matcher (instance method)">#<strong>key_matcher</strong>(pattern, options)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Adds the namespace defined in the options to a pattern designed to match
keys.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#log-instance_method" title="#log (instance method)">#<strong>log</strong>  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#merged_options-instance_method" title="#merged_options (instance method)">#<strong>merged_options</strong>(call_options)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Merges the default options with ones specific to a method call.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#normalize_key-instance_method" title="#normalize_key (instance method)">#<strong>normalize_key</strong>(key, options)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Prefixes a key with the namespace.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#read_entry-instance_method" title="#read_entry (instance method)">#<strong>read_entry</strong>(key, options)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Reads an entry from the cache implementation.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#save_block_result_to_cache-instance_method" title="#save_block_result_to_cache (instance method)">#<strong>save_block_result_to_cache</strong>(name, options)  </a>
    </span>
    <span class='note title private'>private</span>
  </li>
  <li>
    <span class='summary_signature priv'>
      <a href="#write_entry-instance_method" title="#write_entry (instance method)">#<strong>write_entry</strong>(key, entry, options)  </a>
    </span>
    <span class='note title private'>private</span>
    <div class='summary_desc'>
      <div class='inline'><p>Writes an entry to the cache implementation.</p></div>
    </div>
  </li>
</ul>
</div>
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature  first'>
    .<strong>new</strong>(options = nil)  &#x21d2; <code>Store</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Creates a new cache. The options will be passed to any write method calls
except for <code>:namespace</code> which can be used to set the global
namespace for the cache.</p>

  </div>
</div>
<div class='tags'>
  
</div>  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/cache.rb#L161-L163'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


161
162
163</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 161</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='ivar'>@options</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>?</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span> <span class='op'>:</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Attribute Details</h2>
<section class='method_details first' id="logger-class_method">
  <h3 class='signature rw first'>
    .<strong>logger</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
    <span class='aliases'>Also known as: <span class='names'>#logger</span></span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/cache.rb#L153-L153'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


153</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 153</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_cattr_accessor'>cattr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_logger'>logger</span><span class='comma'>,</span> <span class='label'>instance_writer:</span> <span class='kw'>true</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="logger-instance_method">
  <h3 class='signature rw first'>
    #<strong>logger</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/cache.rb#L153-L153'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


153</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 153</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_cattr_accessor'>cattr_accessor</span> <span class='symbeg'>:</span><span class='id identifier rubyid_logger'>logger</span><span class='comma'>,</span> <span class='label'>instance_writer:</span> <span class='kw'>true</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="options-instance_method">
  <h3 class='signature ro'>
    #<strong>options</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/cache.rb#L155-L155'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


155</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 155</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_silence'>silence</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_options'>options</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="silence?-instance_method">
  <h3 class='signature ro'>
    #<strong>silence?</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Alias for <a href="#silence-instance_method" title="ActiveSupport::Cache::Store#silence (method)">#silence</a>.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/cache.rb#L156-L156'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


156</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 156</span></pre>
<pre class='code ruby'>

<span class='kw'>alias</span> <span class='symbeg'>:</span><span class='id identifier rubyid_silence?'>silence?</span> <span class='symbeg'>:</span><span class='id identifier rubyid_silence'>silence</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="cleanup-instance_method">
  <h3 class='signature  first'>
    #<strong>cleanup</strong>(options = nil)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Cleanups the cache by removing expired entries.</p>

<p>Options are passed to the underlying cache implementation.</p>

<p>All implementations may not support this method.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>NotImplementedError</code>)</span>
  </li>
</ul>

</div>  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/cache.rb#L459-L461'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


459
460
461</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 459</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_cleanup'>cleanup</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>NotImplementedError</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> does not support cleanup</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="clear-instance_method">
  <h3 class='signature '>
    #<strong>clear</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Clears the entire cache. Be careful with this method since it could affect
other processes if shared cache is being used.</p>

<p>The options hash is passed to the underlying cache implementation.</p>

<p>All implementations may not support this method.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>NotImplementedError</code>)</span>
  </li>
</ul>

</div>  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/cache.rb#L469-L471'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


469
470
471</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 469</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_clear'>clear</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>NotImplementedError</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> does not support clear</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="decrement-instance_method">
  <h3 class='signature '>
    #<strong>decrement</strong>(name, amount = 1, options = nil)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Decrements an integer value in the cache.</p>

<p>Options are passed to the underlying cache implementation.</p>

<p>All implementations may not support this method.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>NotImplementedError</code>)</span>
  </li>
</ul>

</div>  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/cache.rb#L450-L452'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


450
451
452</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 450</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_decrement'>decrement</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_amount'>amount</span> <span class='op'>=</span> <span class='int'>1</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>NotImplementedError</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> does not support decrement</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="delete-instance_method">
  <h3 class='signature '>
    #<strong>delete</strong>(name, options = nil)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Deletes an entry in the cache. Returns <code>true</code> if an entry is deleted.</p>

<p>Options are passed to the underlying cache implementation.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/cache.rb#L407-L413'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


407
408
409
410
411
412
413</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 407</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='id identifier rubyid_merged_options'>merged_options</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_instrument'>instrument</span><span class='lparen'>(</span><span class='symbeg'>:</span><span class='id identifier rubyid_delete'>delete</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_delete_entry'>delete_entry</span><span class='lparen'>(</span><span class='id identifier rubyid_normalize_key'>normalize_key</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="delete_entry-instance_method">
  <h3 class='signature priv'>
    #<strong>delete_entry</strong>(key, options)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Deletes an entry from the cache implementation. Subclasses must implement
this method.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>NotImplementedError</code>)</span>
  </li>
</ul>

</div>  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/cache.rb#L507-L509'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


507
508
509</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 507</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_delete_entry'>delete_entry</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>NotImplementedError</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="delete_matched-instance_method">
  <h3 class='signature '>
    #<strong>delete_matched</strong>(matcher, options = nil)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Deletes all entries with keys matching the pattern.</p>

<p>Options are passed to the underlying cache implementation.</p>

<p>All implementations may not support this method.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>NotImplementedError</code>)</span>
  </li>
</ul>

</div>  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/cache.rb#L432-L434'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


432
433
434</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 432</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_delete_matched'>delete_matched</span><span class='lparen'>(</span><span class='id identifier rubyid_matcher'>matcher</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>NotImplementedError</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> does not support delete_matched</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="exist?-instance_method">
  <h3 class='signature '>
    #<strong>exist?</strong>(name, options = nil)  &#x21d2; <code>Boolean</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Returns <code>true</code> if the cache contains an entry for the given key.</p>

<p>Options are passed to the underlying cache implementation.</p>

  </div>
</div>
<div class='tags'>
  
</div>  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/cache.rb#L418-L425'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


418
419
420
421
422
423
424
425</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 418</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='id identifier rubyid_merged_options'>merged_options</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_instrument'>instrument</span><span class='lparen'>(</span><span class='symbeg'>:</span><span class='id identifier rubyid_exist?'>exist?</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_entry'>entry</span> <span class='op'>=</span> <span class='id identifier rubyid_read_entry'>read_entry</span><span class='lparen'>(</span><span class='id identifier rubyid_normalize_key'>normalize_key</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
    <span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_entry'>entry</span><span class='period'>.</span><span class='id identifier rubyid_expired?'>expired?</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='kw'>false</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="expanded_key-instance_method">
  <h3 class='signature priv'>
    #<strong>expanded_key</strong>(key)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Expands key to be a consistent string value. Invokes <code>cache_key</code> if object
responds to <code>cache_key</code>. Otherwise, <code>to_param</code> method will be called. If
the key is a <a href="../../Hash.html" title="Hash (class)">::Hash</a>, then keys will be sorted alphabetically.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/cache.rb#L523-L538'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 523</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_expanded_key'>expanded_key</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_key'>key</span><span class='period'>.</span><span class='id identifier rubyid_cache_key'>cache_key</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_key'>key</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbeg'>:</span><span class='id identifier rubyid_cache_key'>cache_key</span><span class='rparen'>)</span>

  <span class='kw'>case</span> <span class='id identifier rubyid_key'>key</span>
  <span class='kw'>when</span> <span class='const'><a href="../../Array.html" title="Array (class)">Array</a></span>
    <span class='kw'>if</span> <span class='id identifier rubyid_key'>key</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>1</span>
      <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='id identifier rubyid_key'>key</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_element'>element</span><span class='op'>|</span> <span class='id identifier rubyid_expanded_key'>expanded_key</span><span class='lparen'>(</span><span class='id identifier rubyid_element'>element</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='id identifier rubyid_key'>key</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
    <span class='kw'>end</span>
  <span class='kw'>when</span> <span class='const'><a href="../../Hash.html" title="Hash (class)">Hash</a></span>
    <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='id identifier rubyid_key'>key</span><span class='period'>.</span><span class='id identifier rubyid_sort_by'>sort_by</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid__'>_</span><span class='op'>|</span> <span class='id identifier rubyid_k'>k</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_k'>k</span><span class='embexpr_end'>}</span><span class='tstring_content'>=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_v'>v</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_key'>key</span><span class='period'>.</span><span class='id identifier rubyid_to_param'>to_param</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="fetch-instance_method">
  <h3 class='signature '>
    #<strong>fetch</strong>(name, options = nil)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Fetches data from the cache, using the given key. If there is data in the
cache with the given key, then that data is returned.</p>

<p>If there is no such data in the cache (a cache miss), then <code>nil</code> will be
returned. However, if a block has been passed, that block will be passed
the key and executed in the event of a cache miss. The return value of the
block will be written to the cache under the given cache key, and that
return value will be returned.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_cache'>cache</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>today</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Monday</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_cache'>cache</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>today</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>  <span class='comment'># =&gt; &quot;Monday&quot;
</span>
<span class='id identifier rubyid_cache'>cache</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>city</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>   <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_cache'>cache</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>city</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Duckburgh</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span>
<span class='id identifier rubyid_cache'>cache</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>city</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>   <span class='comment'># =&gt; &quot;Duckburgh&quot;</span></code></pre>

<p>You may also specify additional options via the <a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">#options</a> argument. Setting
<code>force: true</code> forces a cache "miss," meaning we treat the cache
value as missing even if it&#39;s present. Passing a block is required when
<code>force</code> is true so this always results in a cache write.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_cache'>cache</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>today</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Monday</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_cache'>cache</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>today</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>force:</span> <span class='kw'>true</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Tuesday</span><span class='tstring_end'>&#39;</span></span> <span class='rbrace'>}</span> <span class='comment'># =&gt; &#39;Tuesday&#39;
</span><span class='id identifier rubyid_cache'>cache</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>today</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>force:</span> <span class='kw'>true</span><span class='rparen'>)</span> <span class='comment'># =&gt; ArgumentError</span></code></pre>

<p>The <code>:force</code> option is useful when you&#39;re calling some other
method to ask whether you should force a cache write. Otherwise, it&#39;s
clearer to just call <code>Cache#write</code>.</p>

<p>Setting <code>:compress</code> will store a large cache entry set by the
call in a compressed format.</p>

<p>Setting <code>:expires_in</code> will set an expiration time on the cache.
All caches support auto-expiring content after a specified number of
seconds. This value can be specified as an option to the constructor (in
which case all entries will be affected), or it can be supplied to the
<code>fetch</code> or <a href="#write-instance_method" title="ActiveSupport::Cache::Store#write (method)">#write</a> method to effect just one entry.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_cache'>cache</span> <span class='op'>=</span> <span class='const'><a href="../../ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="../Cache.html" title="ActiveSupport::Cache (module)">Cache</a></span><span class='op'>::</span><span class='const'><a href="MemoryStore.html" title="ActiveSupport::Cache::MemoryStore (class)">MemoryStore</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="MemoryStore.html#new-class_method" title="ActiveSupport::Cache::MemoryStore.new (method)">new</a></span><span class='lparen'>(</span><span class='label'>expires_in:</span> <span class='int'>5</span><span class='period'>.</span><span class='id identifier rubyid_minutes'>minutes</span><span class='rparen'>)</span>
<span class='id identifier rubyid_cache'>cache</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='label'>expires_in:</span> <span class='int'>1</span><span class='period'>.</span><span class='id identifier rubyid_minute'>minute</span><span class='rparen'>)</span> <span class='comment'># Set a lower value for one entry</span></code></pre>

<p>Setting <code>:race_condition_ttl</code> is very useful in situations where
a cache entry is used very frequently and is under heavy load. If a cache
expires and due to heavy load several different processes will try to read
data natively and then they all will try to write to cache. To avoid that
case the first process to find an expired cache entry will bump the cache
expiration time by the value set in <code>:race_condition_ttl</code>. Yes,
this process is extending the time for a stale value by another few
seconds. Because of extended life of the previous cache, other processes
will continue to use slightly stale data for a just a bit longer. In the
meantime that first process will go ahead and will write into cache the new
value. After that all the processes will start getting the new value. The
key is to keep <code>:race_condition_ttl</code> small.</p>

<p>If the process regenerating the entry errors out, the entry will be
regenerated after the specified number of seconds. Also note that the life
of stale cache is extended only if it expired recently. Otherwise a new
value is generated and <code>:race_condition_ttl</code> does not play any
role.</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Set all values to expire after one minute.
</span><span class='id identifier rubyid_cache'>cache</span> <span class='op'>=</span> <span class='const'><a href="../../ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="../Cache.html" title="ActiveSupport::Cache (module)">Cache</a></span><span class='op'>::</span><span class='const'><a href="MemoryStore.html" title="ActiveSupport::Cache::MemoryStore (class)">MemoryStore</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="MemoryStore.html#new-class_method" title="ActiveSupport::Cache::MemoryStore.new (method)">new</a></span><span class='lparen'>(</span><span class='label'>expires_in:</span> <span class='int'>1</span><span class='period'>.</span><span class='id identifier rubyid_minute'>minute</span><span class='rparen'>)</span>

<span class='id identifier rubyid_cache'>cache</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>original value</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_val_1'>val_1</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='id identifier rubyid_val_2'>val_2</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='id identifier rubyid_sleep'>sleep</span> <span class='int'>60</span>

<span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_val_1'>val_1</span> <span class='op'>=</span> <span class='id identifier rubyid_cache'>cache</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>race_condition_ttl:</span> <span class='int'>10</span><span class='period'>.</span><span class='id identifier rubyid_seconds'>seconds</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_sleep'>sleep</span> <span class='int'>1</span>
    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>new value 1</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_val_2'>val_2</span> <span class='op'>=</span> <span class='id identifier rubyid_cache'>cache</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>race_condition_ttl:</span> <span class='int'>10</span><span class='period'>.</span><span class='id identifier rubyid_seconds'>seconds</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>new value 2</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='id identifier rubyid_cache'>cache</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='comment'># =&gt; &quot;original value&quot;
</span><span class='id identifier rubyid_sleep'>sleep</span> <span class='int'>10</span> <span class='comment'># First thread extended the life of cache by another 10 seconds
</span><span class='id identifier rubyid_cache'>cache</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='comment'># =&gt; &quot;new value 1&quot;
</span><span class='id identifier rubyid_val_1'>val_1</span> <span class='comment'># =&gt; &quot;new value 1&quot;
</span><span class='id identifier rubyid_val_2'>val_2</span> <span class='comment'># =&gt; &quot;original value&quot;</span></code></pre>

<p>Other options will be handled by the specific cache store implementation.
Internally, <code>#fetch</code> calls <a href="#read_entry-instance_method" title="ActiveSupport::Cache::Store#read_entry (method)">#read_entry</a>, and calls <a href="#write_entry-instance_method" title="ActiveSupport::Cache::Store#write_entry (method)">#write_entry</a> on a
cache miss. <a href="#options-instance_method" title="ActiveSupport::Cache::Store#options (method)">#options</a> will be passed to the <a href="#read-instance_method" title="ActiveSupport::Cache::Store#read (method)">#read</a> and <a href="#write-instance_method" title="ActiveSupport::Cache::Store#write (method)">#write</a> calls.</p>

<p>For example, MemCacheStore&#39;s <a href="#write-instance_method" title="ActiveSupport::Cache::Store#write (method)">#write</a> method supports the
<code>:raw</code> option, which tells the memcached server to store all
values as strings. We can use this option with <code>#fetch</code> too:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_cache'>cache</span> <span class='op'>=</span> <span class='const'><a href="../../ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="../Cache.html" title="ActiveSupport::Cache (module)">Cache</a></span><span class='op'>::</span><span class='const'><a href="MemCacheStore.html" title="ActiveSupport::Cache::MemCacheStore (class)">MemCacheStore</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="MemCacheStore.html#new-class_method" title="ActiveSupport::Cache::MemCacheStore.new (method)">new</a></span>
<span class='id identifier rubyid_cache'>cache</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>force:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>raw:</span> <span class='kw'>true</span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='symbeg'>:</span><span class='id identifier rubyid_bar'>bar</span>
<span class='kw'>end</span>
<span class='id identifier rubyid_cache'>cache</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='comment'># =&gt; &quot;bar&quot;</span></code></pre>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/cache.rb#L281-L304'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 281</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
    <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='id identifier rubyid_merged_options'>merged_options</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='id identifier rubyid_normalize_key'>normalize_key</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_entry'>entry</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='id identifier rubyid_instrument'>instrument</span><span class='lparen'>(</span><span class='symbeg'>:</span><span class='id identifier rubyid_read'>read</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_payload'>payload</span><span class='op'>|</span>
      <span class='id identifier rubyid_cached_entry'>cached_entry</span> <span class='op'>=</span> <span class='id identifier rubyid_read_entry'>read_entry</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_force'>force</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_entry'>entry</span> <span class='op'>=</span> <span class='id identifier rubyid_handle_expired_entry'>handle_expired_entry</span><span class='lparen'>(</span><span class='id identifier rubyid_cached_entry'>cached_entry</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_payload'>payload</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_super_operation'>super_operation</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='symbeg'>:</span><span class='id identifier rubyid_fetch'>fetch</span> <span class='kw'>if</span> <span class='id identifier rubyid_payload'>payload</span>
      <span class='id identifier rubyid_payload'>payload</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_hit'>hit</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='op'>!</span><span class='op'>!</span><span class='id identifier rubyid_entry'>entry</span> <span class='kw'>if</span> <span class='id identifier rubyid_payload'>payload</span>
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_entry'>entry</span>
      <span class='id identifier rubyid_get_entry_value'>get_entry_value</span><span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_save_block_result_to_cache'>save_block_result_to_cache</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid__name'>_name</span><span class='op'>|</span> <span class='kw'>yield</span> <span class='id identifier rubyid__name'>_name</span> <span class='rbrace'>}</span>
    <span class='kw'>end</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_force'>force</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Missing block: Calling `Cache#fetch` with `force: true` requires a block.</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="fetch_multi-instance_method">
  <h3 class='signature '>
    #<strong>fetch_multi</strong>(*names)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Fetches data from the cache, using the given keys. If there is data in the
cache with the given keys, then that data is returned. Otherwise, the
supplied block is called for each key for which there was no data, and the
result will be written to the cache and returned. Therefore, you need to
pass a block that returns the data to be written to the cache. If you do
not want to write the cache when the cache is not found, use <a href="#read_multi-instance_method" title="ActiveSupport::Cache::Store#read_multi (method)">#read_multi</a>.</p>

<p>Options are passed to the underlying cache implementation.</p>

<p>Returns a hash with the data for each of the names. For example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_cache'>cache</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bim</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bam</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_cache'>cache</span><span class='period'>.</span><span class='id identifier rubyid_fetch_multi'>fetch_multi</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bim</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>unknown_key</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='op'>|</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Fallback value for key: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_key'>key</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>
<span class='comment'># =&gt; { &quot;bim&quot; =&gt; &quot;bam&quot;,
</span><span class='comment'>#      &quot;unknown_key&quot; =&gt; &quot;Fallback value for key: unknown_key&quot; }</span></code></pre>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>ArgumentError</code>)</span>
  </li>
</ul>

</div>  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/cache.rb#L376-L390'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


376
377
378
379
380
381
382
383
384
385
386
387
388
389
390</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 376</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_fetch_multi'>fetch_multi</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_names'>names</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Missing block: `Cache#fetch_multi` requires a block.</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_block_given?'>block_given?</span>

  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='id identifier rubyid_names'>names</span><span class='period'>.</span><span class='id identifier rubyid_extract_options!'>extract_options!</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='id identifier rubyid_merged_options'>merged_options</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='id identifier rubyid_read_multi'>read_multi</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_names'>names</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_names'>names</span><span class='period'>.</span><span class='id identifier rubyid_each_with_object'>each_with_object</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_memo'>memo</span><span class='op'>|</span>
    <span class='id identifier rubyid_memo'>memo</span><span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_results'>results</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='kw'>yield</span> <span class='id identifier rubyid_name'>name</span>
      <span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_value'>value</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="get_entry_value-instance_method">
  <h3 class='signature priv'>
    #<strong>get_entry_value</strong>(entry, name, options)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/cache.rb#L579-L582'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


579
580
581
582</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 579</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_get_entry_value'>get_entry_value</span><span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_instrument'>instrument</span><span class='lparen'>(</span><span class='symbeg'>:</span><span class='id identifier rubyid_fetch_hit'>fetch_hit</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_entry'>entry</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="handle_expired_entry-instance_method">
  <h3 class='signature priv'>
    #<strong>handle_expired_entry</strong>(entry, key, options)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/cache.rb#L563-L577'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


563
564
565
566
567
568
569
570
571
572
573
574
575
576
577</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 563</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_handle_expired_entry'>handle_expired_entry</span><span class='lparen'>(</span><span class='id identifier rubyid_entry'>entry</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_entry'>entry</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_entry'>entry</span><span class='period'>.</span><span class='id identifier rubyid_expired?'>expired?</span>
    <span class='id identifier rubyid_race_ttl'>race_ttl</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_race_condition_ttl'>race_condition_ttl</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
    <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_race_ttl'>race_ttl</span> <span class='op'>&gt;</span> <span class='int'>0</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='const'><a href="../../Time.html" title="Time (class)">Time</a></span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>-</span> <span class='id identifier rubyid_entry'>entry</span><span class='period'>.</span><span class='id identifier rubyid_expires_at'>expires_at</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_race_ttl'>race_ttl</span><span class='rparen'>)</span>
      <span class='comment'># When an entry has a positive :race_condition_ttl defined, put the stale entry back into the cache
</span>      <span class='comment'># for a brief period while the entry is being recalculated.
</span>      <span class='id identifier rubyid_entry'>entry</span><span class='period'>.</span><span class='id identifier rubyid_expires_at'>expires_at</span> <span class='op'>=</span> <span class='const'><a href="../../Time.html" title="Time (class)">Time</a></span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span> <span class='op'>+</span> <span class='id identifier rubyid_race_ttl'>race_ttl</span>
      <span class='id identifier rubyid_write_entry'>write_entry</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_entry'>entry</span><span class='comma'>,</span> <span class='label'>expires_in:</span> <span class='id identifier rubyid_race_ttl'>race_ttl</span> <span class='op'>*</span> <span class='int'>2</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_delete_entry'>delete_entry</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_entry'>entry</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_entry'>entry</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="increment-instance_method">
  <h3 class='signature '>
    #<strong>increment</strong>(name, amount = 1, options = nil)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Increments an integer value in the cache.</p>

<p>Options are passed to the underlying cache implementation.</p>

<p>All implementations may not support this method.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>NotImplementedError</code>)</span>
  </li>
</ul>

</div>  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/cache.rb#L441-L443'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


441
442
443</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 441</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_increment'>increment</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_amount'>amount</span> <span class='op'>=</span> <span class='int'>1</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>NotImplementedError</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> does not support increment</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="instrument-instance_method">
  <h3 class='signature priv'>
    #<strong>instrument</strong>(operation, key, options = nil)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/cache.rb#L550-L556'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


550
551
552
553
554
555
556</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 550</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_instrument'>instrument</span><span class='lparen'>(</span><span class='id identifier rubyid_operation'>operation</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_log'>log</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Cache </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_operation'>operation</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_normalize_key'>normalize_key</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>

  <span class='id identifier rubyid_payload'>payload</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='label'>key:</span> <span class='id identifier rubyid_key'>key</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_payload'>payload</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'><a href="../../Hash.html" title="Hash (class)">Hash</a></span><span class='rparen'>)</span>
  <span class='const'><a href="../../ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="../Notifications.html" title="ActiveSupport::Notifications (module)">Notifications</a></span><span class='period'>.</span><span class='id identifier rubyid_instrument'><a href="../Notifications.html#instrument-class_method" title="ActiveSupport::Notifications.instrument (method)">instrument</a></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cache_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_operation'>operation</span><span class='embexpr_end'>}</span><span class='tstring_content'>.active_support</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_payload'>payload</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='kw'>yield</span><span class='lparen'>(</span><span class='id identifier rubyid_payload'>payload</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="key_matcher-instance_method">
  <h3 class='signature priv'>
    #<strong>key_matcher</strong>(pattern, options)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Adds the namespace defined in the options to a pattern designed to match
keys. Implementations that support delete_matched should call this method
to translate a pattern that matches names into one that matches namespaced
keys.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/cache.rb#L478-L491'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


478
479
480
481
482
483
484
485
486
487
488
489
490
491</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 478</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_key_matcher'>key_matcher</span><span class='lparen'>(</span><span class='id identifier rubyid_pattern'>pattern</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span> <span class='comment'># :doc:
</span>  <span class='id identifier rubyid_prefix'>prefix</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_namespace'>namespace</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Proc</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_namespace'>namespace</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span> <span class='op'>:</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_namespace'>namespace</span><span class='rbracket'>]</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_prefix'>prefix</span>
    <span class='id identifier rubyid_source'>source</span> <span class='op'>=</span> <span class='id identifier rubyid_pattern'>pattern</span><span class='period'>.</span><span class='id identifier rubyid_source'>source</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_source'>source</span><span class='period'>.</span><span class='id identifier rubyid_start_with?'>start_with?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>^</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid_source'>source</span> <span class='op'>=</span> <span class='id identifier rubyid_source'>source</span><span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span> <span class='id identifier rubyid_source'>source</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span><span class='rbracket'>]</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_source'>source</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>.*</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_source'>source</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_source'>source</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
    <span class='const'><a href="../../Regexp.html" title="Regexp (class)">Regexp</a></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>^</span><span class='embexpr_beg'>#{</span><span class='const'><a href="../../Regexp.html" title="Regexp (class)">Regexp</a></span><span class='period'>.</span><span class='id identifier rubyid_escape'>escape</span><span class='lparen'>(</span><span class='id identifier rubyid_prefix'>prefix</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_source'>source</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_pattern'>pattern</span><span class='period'>.</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_pattern'>pattern</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="log-instance_method">
  <h3 class='signature priv'>
    #<strong>log</strong>   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/cache.rb#L558-L561'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


558
559
560
561</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 558</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_log'>log</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_logger'>logger</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_debug?'>debug?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_silence?'>silence?</span>
  <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span><span class='lparen'>(</span><span class='kw'>yield</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="merged_options-instance_method">
  <h3 class='signature priv'>
    #<strong>merged_options</strong>(call_options)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Merges the default options with ones specific to a method call.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/cache.rb#L512-L518'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


512
513
514
515
516
517
518</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 512</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_merged_options'>merged_options</span><span class='lparen'>(</span><span class='id identifier rubyid_call_options'>call_options</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_call_options'>call_options</span>
    <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_call_options'>call_options</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_options'>options</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="mute-instance_method">
  <h3 class='signature '>
    #<strong>mute</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Silences the logger within a block.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/cache.rb#L172-L177'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


172
173
174
175
176
177</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 172</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_mute'>mute</span>
  <span class='id identifier rubyid_previous_silence'>previous_silence</span><span class='comma'>,</span> <span class='ivar'>@silence</span> <span class='op'>=</span> <span class='kw'>defined?</span><span class='lparen'>(</span><span class='ivar'>@silence</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@silence</span><span class='comma'>,</span> <span class='kw'>true</span>
  <span class='kw'>yield</span>
<span class='kw'>ensure</span>
  <span class='ivar'>@silence</span> <span class='op'>=</span> <span class='id identifier rubyid_previous_silence'>previous_silence</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="normalize_key-instance_method">
  <h3 class='signature priv'>
    #<strong>normalize_key</strong>(key, options)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Prefixes a key with the namespace. Namespace and key will be delimited with
a colon.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/cache.rb#L542-L548'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


542
543
544
545
546
547
548</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 542</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_normalize_key'>normalize_key</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='id identifier rubyid_expanded_key'>expanded_key</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_namespace'>namespace</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_namespace'>namespace</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span>
  <span class='id identifier rubyid_prefix'>prefix</span> <span class='op'>=</span> <span class='id identifier rubyid_namespace'>namespace</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Proc</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_namespace'>namespace</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span> <span class='op'>:</span> <span class='id identifier rubyid_namespace'>namespace</span>
  <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_prefix'>prefix</span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_key'>key</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_prefix'>prefix</span>
  <span class='id identifier rubyid_key'>key</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="read-instance_method">
  <h3 class='signature '>
    #<strong>read</strong>(name, options = nil)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Fetches data from the cache, using the given key. If there is data in the
cache with the given key, then that data is returned. Otherwise, <code>nil</code> is
returned.</p>

<p>Options are passed to the underlying cache implementation.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/cache.rb#L311-L330'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 311</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='id identifier rubyid_merged_options'>merged_options</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='id identifier rubyid_normalize_key'>normalize_key</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_instrument'>instrument</span><span class='lparen'>(</span><span class='symbeg'>:</span><span class='id identifier rubyid_read'>read</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_payload'>payload</span><span class='op'>|</span>
    <span class='id identifier rubyid_entry'>entry</span> <span class='op'>=</span> <span class='id identifier rubyid_read_entry'>read_entry</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_entry'>entry</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_entry'>entry</span><span class='period'>.</span><span class='id identifier rubyid_expired?'>expired?</span>
        <span class='id identifier rubyid_delete_entry'>delete_entry</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_payload'>payload</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_hit'>hit</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id identifier rubyid_payload'>payload</span>
        <span class='kw'>nil</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_payload'>payload</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_hit'>hit</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_payload'>payload</span>
        <span class='id identifier rubyid_entry'>entry</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_payload'>payload</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_hit'>hit</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id identifier rubyid_payload'>payload</span>
      <span class='kw'>nil</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="read_entry-instance_method">
  <h3 class='signature priv'>
    #<strong>read_entry</strong>(key, options)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Reads an entry from the cache implementation. Subclasses must implement
this method.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>NotImplementedError</code>)</span>
  </li>
</ul>

</div>  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/cache.rb#L495-L497'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


495
496
497</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 495</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_read_entry'>read_entry</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>NotImplementedError</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="read_multi-instance_method">
  <h3 class='signature '>
    #<strong>read_multi</strong>(*names)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Reads multiple values at once from the cache. Options can be passed in the
last argument.</p>

<p>Some cache implementation may optimize this method.</p>

<p>Returns a hash mapping the names provided to the values found.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/cache.rb#L338-L355'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 338</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_read_multi'>read_multi</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_names'>names</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='id identifier rubyid_names'>names</span><span class='period'>.</span><span class='id identifier rubyid_extract_options!'>extract_options!</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='id identifier rubyid_merged_options'>merged_options</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_names'>names</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_name'>name</span><span class='op'>|</span>
    <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='id identifier rubyid_normalize_key'>normalize_key</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_entry'>entry</span> <span class='op'>=</span> <span class='id identifier rubyid_read_entry'>read_entry</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_entry'>entry</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_entry'>entry</span><span class='period'>.</span><span class='id identifier rubyid_expired?'>expired?</span>
        <span class='id identifier rubyid_delete_entry'>delete_entry</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_entry'>entry</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_results'>results</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="save_block_result_to_cache-instance_method">
  <h3 class='signature priv'>
    #<strong>save_block_result_to_cache</strong>(name, options)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/cache.rb#L584-L591'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


584
585
586
587
588
589
590
591</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 584</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_save_block_result_to_cache'>save_block_result_to_cache</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_instrument'>instrument</span><span class='lparen'>(</span><span class='symbeg'>:</span><span class='id identifier rubyid_generate'>generate</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='kw'>yield</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_result'>result</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="silence-instance_method">
  <h3 class='signature ro'>
    #<strong>silence</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
    <span class='aliases'>Also known as: <span class='names'>#silence?</span></span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/cache.rb#L155-L155'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


155</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 155</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_silence'>silence</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_options'>options</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="silence!-instance_method">
  <h3 class='signature '>
    #<strong>silence!</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Silences the logger.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/cache.rb#L166-L169'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


166
167
168
169</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 166</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_silence!'>silence!</span>
  <span class='ivar'>@silence</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='kw'>self</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="write-instance_method">
  <h3 class='signature '>
    #<strong>write</strong>(name, value, options = nil)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Writes the value to the cache, with the key.</p>

<p>Options are passed to the underlying cache implementation.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/cache.rb#L395-L402'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


395
396
397
398
399
400
401
402</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 395</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='id identifier rubyid_merged_options'>merged_options</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_instrument'>instrument</span><span class='lparen'>(</span><span class='symbeg'>:</span><span class='id identifier rubyid_write'>write</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_entry'>entry</span> <span class='op'>=</span> <span class='const'><a href="Entry.html" title="ActiveSupport::Cache::Entry (class)">Entry</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="Entry.html#new-class_method" title="ActiveSupport::Cache::Entry.new (method)">new</a></span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_write_entry'>write_entry</span><span class='lparen'>(</span><span class='id identifier rubyid_normalize_key'>normalize_key</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_entry'>entry</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="write_entry-instance_method">
  <h3 class='signature priv'>
    #<strong>write_entry</strong>(key, entry, options)   <span class="extras">(<span class='priv'>private</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Writes an entry to the cache implementation. Subclasses must implement this
method.</p>

  </div>
</div>
<div class='tags'>
  <p class='tag_title'>Raises:</p>
<ul class='raise'>
  <li>
    <span class='type'>(<code>NotImplementedError</code>)</span>
  </li>
</ul>

</div>  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/master/activesupport/lib/active_support/cache.rb#L501-L503'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


501
502
503</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'activesupport/lib/active_support/cache.rb', line 501</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_write_entry'>write_entry</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_entry'>entry</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>NotImplementedError</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.9.8 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.9.0 (ruby-2.5.0p-1)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>