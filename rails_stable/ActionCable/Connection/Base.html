<!DOCTYPE html>
<html>
<head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>Class: ActionCable::Connection::Base &mdash; Rails-5-0-stable</title>

<link rel='stylesheet'  type='text/css' href='../../../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../../../css/common.css' />

<script type='text/javascript'>
  var pathId = "ActionCable::Connection::Base",
    relpath = '../../';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../../../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../../../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
        <a href='../../../index.html'>Home</a> &raquo; 
        <a href='../../index.html'>Rails-5-0-stable</a> &raquo; 
        <a href='../../_index.html#alpha_B'>Index (B)</a> &raquo; 
        <a href="../../ActionCable.html" title="ActionCable (module)">ActionCable</a> &raquo; 
        <a href="../Connection.html" title="ActionCable::Connection (module)">Connection</a> &raquo; 
        <span class='title'><a id='t2_doc_top' href='#'>Base&nbsp;&#x25B2;</a></span>
      </div>

    <a id='list_href' href="../../class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='class'>
<h1>Class: ActionCable::Connection::Base</h1>
<div id='t2_rel_sf_div'>
<table id='t2_rel_sf' class='y_box'>
  <thead>
    <tr><td id='t2_relations' colspan='2'>Relationships & Source Files</td></tr>
  </thead>
  <tbody>
    <tr><td class='box_h' colspan='2'>Super Chains via Extension / Inclusion / Inheritance</td></tr>
    <tr>
      <td colspan='2'>
        <div class='box_2'>Instance Chain:</div>
        <div class='box_22'>
          self,
          <a href="Authorization.html" title="ActionCable::Connection::Authorization (module)">Authorization</a>,
          <a href="InternalChannel.html" title="ActionCable::Connection::InternalChannel (module)">InternalChannel</a>,
          <a href="Identification.html" title="ActionCable::Connection::Identification (module)">Identification</a>
        </div>
      </td>
    </tr>
    <tr>
      <td id='t2_inherits' class='box_2'>Inherits:</td>
      <td class='box_rel'>
        <span class='inheritName'><a href="../../Object.html" title="Object (class)">Object</a></span>
      </td>
    </tr>
    <tr class='single'>
      <td id='t2_defined_in' class='box_2'>Defined in:</td>
      <td class='box_rel'><a class='repo' href='https://github.com/rails/rails/blob/5-0-stable/actioncable/lib/action_cable/connection/base.rb#L46'>actioncable/lib/action_cable/connection/base.rb</a>      </td>
    </tr>
  </tbody>
</table>
</div>
<h2 id='h2_overview'>Overview</h2>
<div id='overview_ds'>
<div class='docstring'>
  <div class='discussion'>
    
<p>For every <a href="WebSocket.html" title="ActionCable::Connection::WebSocket (class)">WebSocket</a> the Action Cable server
accepts, a <a href="../Connection.html" title="ActionCable::Connection (module)">::ActionCable::Connection</a> object will be instantiated. This
instance becomes the parent of all of the channel subscriptions that are
created from there on. Incoming messages are then routed to these channel
subscriptions based on an identifier sent by the Action Cable consumer. The
Connection itself does not deal with any specific application logic beyond
authentication and authorization.</p>

<p>Here&#39;s a basic example:</p>

<pre class="code ruby"><code class="ruby">module ApplicationCable
  class Connection &lt; ActionCable::Connection::Base
    identified_by :current_user

    def connect
      self.current_user = find_verified_user
      logger.add_tags current_user.name
    end

    def disconnect
      # Any cleanup work needed when the cable connection is cut.
    end

    protected
      def find_verified_user
        if current_user = User.find_by_identity cookies.signed[:identity_id]
          current_user
        else
          reject_unauthorized_connection
        end
      end
  end
end</code></pre>

<p>First, we declare that this connection can be identified by its
current_user. This allows us to later be able to find all connections
established for that current_user (and potentially disconnect them). You
can declare as many identification indexes as you like. Declaring an
identification means that an attr_accessor is automatically set for that
key.</p>

<p>Second, we rely on the fact that the <a href="WebSocket.html" title="ActionCable::Connection::WebSocket (class)">WebSocket</a>
connection is established with the cookies from the domain being sent
along. This makes it easy to use signed cookies that were set when logging
in via a web interface to authorize the
<a href="WebSocket.html" title="ActionCable::Connection::WebSocket (class)">WebSocket</a> connection.</p>

<p>Finally, we add a tag to the connection-specific logger with the name of
the current user to easily distinguish their messages in the log.</p>

<p>Pretty simple, eh?</p>

  </div>
</div>
</div>
<h2 class='h2_sum'><a href="Identification.html" title="ActionCable::Connection::Identification (module)">Identification</a> - Attributes &amp; Methods</h2>
<div>
<ul class='summary full'>
  <li>
    <span class='summary_signature rw'>
      <a href="#identifiers-class_method" title=".identifiers (class method)">.<strong>identifiers</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#identifiers-instance_method" title="#identifiers (instance method)">#<strong>identifiers</strong>  </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#identifiers%3F-class_method" title=".identifiers? (class method)">.<strong>identifiers?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
  <li>
    <span class='summary_signature rw'>
      <a href="#identifiers%3F-instance_method" title="#identifiers? (instance method)">#<strong>identifiers?</strong>  &#x21d2; Boolean </a>
    </span>
    <span class='note title rw'>rw</span>
  </li>
</ul>
</div>
        

<h2 class='h2_sum' id='class_Method_summary'>Class Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#new-class_method" title=".new (class method)">.<strong>new</strong>(server, env, coder: ActiveSupport::JSON)  &#x21d2; Base </a>
    </span>
    <span class='note title constructor'>constructor</span>
  </li>
</ul>
</div>
        

<h2 class='h2_sum' id='instance_Attribute_summary'>Instance Attribute Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature ro'>
      <a href="#env-instance_method" title="#env (instance method)">#<strong>env</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#event_loop-instance_method" title="#event_loop (instance method)">#<strong>event_loop</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#logger-instance_method" title="#logger (instance method)">#<strong>logger</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#protocol-instance_method" title="#protocol (instance method)">#<strong>protocol</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#pubsub-instance_method" title="#pubsub (instance method)">#<strong>pubsub</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#server-instance_method" title="#server (instance method)">#<strong>server</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#subscriptions-instance_method" title="#subscriptions (instance method)">#<strong>subscriptions</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro'>
      <a href="#worker_pool-instance_method" title="#worker_pool (instance method)">#<strong>worker_pool</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
  </li>
  <li>
    <span class='summary_signature ro prot'>
      <a href="#message_buffer-instance_method" title="#message_buffer (instance method)">#<strong>message_buffer</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='note title protected'>protected</span>
  </li>
  <li>
    <span class='summary_signature ro prot'>
      <a href="#websocket-instance_method" title="#websocket (instance method)">#<strong>websocket</strong>  </a>
    </span>
    <span class='note title readonly'>readonly</span>
    <span class='note title protected'>protected</span>
  </li>
</ul>
</div>
        

<h2 class='h2_sum' id='instance_Method_summary'>Instance Method Summary</h2>
<div class='div_sum'>
<ul class='summary full'>
  <li>
    <span class='summary_signature '>
      <a href="#beat-instance_method" title="#beat (instance method)">#<strong>beat</strong>  </a>
    </span>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#close-instance_method" title="#close (instance method)">#<strong>close</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Close the <a href="WebSocket.html" title="ActionCable::Connection::WebSocket (class)">WebSocket</a> connection.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#send_async-instance_method" title="#send_async (instance method)">#<strong>send_async</strong>(method, *arguments)  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Invoke a method on the connection asynchronously through the pool of thread
workers.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature '>
      <a href="#statistics-instance_method" title="#statistics (instance method)">#<strong>statistics</strong>  </a>
    </span>
    <div class='summary_desc'>
      <div class='inline'><p>Return a basic hash of statistics for the connection keyed with
`identifier`, `started_at`, and `subscriptions`.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature prot'>
      <a href="#cookies-instance_method" title="#cookies (instance method)">#<strong>cookies</strong>  </a>
    </span>
    <span class='note title protected'>protected</span>
    <div class='summary_desc'>
      <div class='inline'><p>The cookies of the request that initiated the
<a href="WebSocket.html" title="ActionCable::Connection::WebSocket (class)">WebSocket</a> connection.</p></div>
    </div>
  </li>
  <li>
    <span class='summary_signature prot'>
      <a href="#request-instance_method" title="#request (instance method)">#<strong>request</strong>  </a>
    </span>
    <span class='note title protected'>protected</span>
    <div class='summary_desc'>
      <div class='inline'><p>The request that initiated the <a href="WebSocket.html" title="ActionCable::Connection::WebSocket (class)">WebSocket</a>
connection is available here.</p></div>
    </div>
  </li>
</ul>

<h3 class='inherited'><a href="Identification.html" title="ActionCable::Connection::Identification (module)">Identification</a> - Included</h3>
<div class='inherited'><table class='inherited'>
  <tbody>
    <tr class='i_ds'>
      <td><a class='i_m ' href="Identification.html#connection_identifier-instance_method" title="ActionCable::Connection::Identification#connection_identifier (method)">#connection_identifier</a></td>
      <td><div class='inline'><p>Return a single connection identifier that combines the value of all the
registered identifiers into a single gid.</p></div></td>
    </tr>
  </tbody>
</table></div>
</div>
<h2 id='Constructor_Details' class='y_details'>Constructor Details</h2>

  <section class='method_details first' id="new-class_method">
  <h3 class='signature  first'>
    .<strong>new</strong>(server, env, coder: ActiveSupport::JSON)  &#x21d2; <code>Base</code> 
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
  </div>
</div>
<div class='tags'>
  
</div>  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/5-0-stable/actioncable/lib/action_cable/connection/base.rb#L54-L66'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


54
55
56
57
58
59
60
61
62
63
64
65
66</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actioncable/lib/action_cable/connection/base.rb', line 54</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_server'>server</span><span class='comma'>,</span> <span class='id identifier rubyid_env'>env</span><span class='comma'>,</span> <span class='label'>coder:</span> <span class='const'><a href="../../ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span><span class='op'>::</span><span class='const'><a href="../../ActiveSupport/JSON.html" title="ActiveSupport::JSON (module)">JSON</a></span><span class='rparen'>)</span>
  <span class='ivar'>@server</span><span class='comma'>,</span> <span class='ivar'>@env</span><span class='comma'>,</span> <span class='ivar'>@coder</span> <span class='op'>=</span> <span class='id identifier rubyid_server'>server</span><span class='comma'>,</span> <span class='id identifier rubyid_env'>env</span><span class='comma'>,</span> <span class='id identifier rubyid_coder'>coder</span>

  <span class='ivar'>@worker_pool</span> <span class='op'>=</span> <span class='id identifier rubyid_server'>server</span><span class='period'>.</span><span class='id identifier rubyid_worker_pool'>worker_pool</span>
  <span class='ivar'>@logger</span> <span class='op'>=</span> <span class='id identifier rubyid_new_tagged_logger'>new_tagged_logger</span>

  <span class='ivar'>@websocket</span>      <span class='op'>=</span> <span class='const'><a href="../../ActionCable.html" title="ActionCable (module)">ActionCable</a></span><span class='op'>::</span><span class='const'><a href="../Connection.html" title="ActionCable::Connection (module)">Connection</a></span><span class='op'>::</span><span class='const'><a href="WebSocket.html" title="ActionCable::Connection::WebSocket (class)">WebSocket</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="WebSocket.html#new-class_method" title="ActionCable::Connection::WebSocket.new (method)">new</a></span><span class='lparen'>(</span><span class='id identifier rubyid_env'>env</span><span class='comma'>,</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_event_loop'>event_loop</span><span class='comma'>,</span> <span class='id identifier rubyid_server'>server</span><span class='period'>.</span><span class='id identifier rubyid_config'>config</span><span class='period'>.</span><span class='id identifier rubyid_client_socket_class'>client_socket_class</span><span class='rparen'>)</span>
  <span class='ivar'>@subscriptions</span>  <span class='op'>=</span> <span class='const'><a href="../../ActionCable.html" title="ActionCable (module)">ActionCable</a></span><span class='op'>::</span><span class='const'><a href="../Connection.html" title="ActionCable::Connection (module)">Connection</a></span><span class='op'>::</span><span class='const'><a href="Subscriptions.html" title="ActionCable::Connection::Subscriptions (class)">Subscriptions</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="Subscriptions.html#new-class_method" title="ActionCable::Connection::Subscriptions.new (method)">new</a></span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
  <span class='ivar'>@message_buffer</span> <span class='op'>=</span> <span class='const'><a href="../../ActionCable.html" title="ActionCable (module)">ActionCable</a></span><span class='op'>::</span><span class='const'><a href="../Connection.html" title="ActionCable::Connection (module)">Connection</a></span><span class='op'>::</span><span class='const'><a href="MessageBuffer.html" title="ActionCable::Connection::MessageBuffer (class)">MessageBuffer</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="MessageBuffer.html#new-class_method" title="ActionCable::Connection::MessageBuffer.new (method)">new</a></span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>

  <span class='ivar'>@_internal_subscriptions</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@started_at</span> <span class='op'>=</span> <span class='const'><a href="../../Time.html" title="Time (class)">Time</a></span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Class Attribute Details</h2>
<section class='method_details first' id="identifiers-class_method">
  <h3 class='signature rw first'>
    .<strong>identifiers</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/5-0-stable/actioncable/lib/action_cable/connection/identification.rb#L9-L9'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


9</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actioncable/lib/action_cable/connection/identification.rb', line 9</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_class_attribute'>class_attribute</span> <span class='symbeg'>:</span><span class='id identifier rubyid_identifiers'>identifiers</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="identifiers?-class_method">
  <h3 class='signature rw'>
    .<strong>identifiers?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/5-0-stable/actioncable/lib/action_cable/connection/identification.rb#L9-L9'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


9</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actioncable/lib/action_cable/connection/identification.rb', line 9</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_class_attribute'>class_attribute</span> <span class='symbeg'>:</span><span class='id identifier rubyid_identifiers'>identifiers</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Attribute Details</h2>
<section class='method_details first' id="env-instance_method">
  <h3 class='signature ro first'>
    #<strong>env</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/5-0-stable/actioncable/lib/action_cable/connection/base.rb#L51-L51'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


51</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actioncable/lib/action_cable/connection/base.rb', line 51</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_server'>server</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_env'>env</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_subscriptions'>subscriptions</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_logger'>logger</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_worker_pool'>worker_pool</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_protocol'>protocol</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="event_loop-instance_method">
  <h3 class='signature ro'>
    #<strong>event_loop</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/5-0-stable/actioncable/lib/action_cable/connection/base.rb#L52-L52'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


52</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actioncable/lib/action_cable/connection/base.rb', line 52</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_delegate'>delegate</span> <span class='symbeg'>:</span><span class='id identifier rubyid_event_loop'>event_loop</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pubsub'>pubsub</span><span class='comma'>,</span> <span class='label'>to:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_server'>server</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="identifiers-instance_method">
  <h3 class='signature rw'>
    #<strong>identifiers</strong>   <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/5-0-stable/actioncable/lib/action_cable/connection/identification.rb#L9-L9'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


9</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actioncable/lib/action_cable/connection/identification.rb', line 9</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_class_attribute'>class_attribute</span> <span class='symbeg'>:</span><span class='id identifier rubyid_identifiers'>identifiers</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="identifiers?-instance_method">
  <h3 class='signature rw'>
    #<strong>identifiers?</strong>  &#x21d2; <code>Boolean</code>  <span class="extras">(<span class='rw'>rw</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/5-0-stable/actioncable/lib/action_cable/connection/identification.rb#L9-L9'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


9</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actioncable/lib/action_cable/connection/identification.rb', line 9</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_class_attribute'>class_attribute</span> <span class='symbeg'>:</span><span class='id identifier rubyid_identifiers'>identifiers</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="logger-instance_method">
  <h3 class='signature ro'>
    #<strong>logger</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/5-0-stable/actioncable/lib/action_cable/connection/base.rb#L51-L51'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


51</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actioncable/lib/action_cable/connection/base.rb', line 51</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_server'>server</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_env'>env</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_subscriptions'>subscriptions</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_logger'>logger</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_worker_pool'>worker_pool</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_protocol'>protocol</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="message_buffer-instance_method">
  <h3 class='signature ro prot'>
    #<strong>message_buffer</strong>   <span class="extras">(<span class='readonly'>readonly</span>, <span class='prot'>protected</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/5-0-stable/actioncable/lib/action_cable/connection/base.rb#L154-L154'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


154</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actioncable/lib/action_cable/connection/base.rb', line 154</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_message_buffer'>message_buffer</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="protocol-instance_method">
  <h3 class='signature ro'>
    #<strong>protocol</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/5-0-stable/actioncable/lib/action_cable/connection/base.rb#L51-L51'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


51</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actioncable/lib/action_cable/connection/base.rb', line 51</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_server'>server</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_env'>env</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_subscriptions'>subscriptions</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_logger'>logger</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_worker_pool'>worker_pool</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_protocol'>protocol</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="pubsub-instance_method">
  <h3 class='signature ro'>
    #<strong>pubsub</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/5-0-stable/actioncable/lib/action_cable/connection/base.rb#L52-L52'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


52</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actioncable/lib/action_cable/connection/base.rb', line 52</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_delegate'>delegate</span> <span class='symbeg'>:</span><span class='id identifier rubyid_event_loop'>event_loop</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_pubsub'>pubsub</span><span class='comma'>,</span> <span class='label'>to:</span> <span class='symbeg'>:</span><span class='id identifier rubyid_server'>server</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="server-instance_method">
  <h3 class='signature ro'>
    #<strong>server</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/5-0-stable/actioncable/lib/action_cable/connection/base.rb#L51-L51'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


51</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actioncable/lib/action_cable/connection/base.rb', line 51</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_server'>server</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_env'>env</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_subscriptions'>subscriptions</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_logger'>logger</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_worker_pool'>worker_pool</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_protocol'>protocol</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="subscriptions-instance_method">
  <h3 class='signature ro'>
    #<strong>subscriptions</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/5-0-stable/actioncable/lib/action_cable/connection/base.rb#L51-L51'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


51</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actioncable/lib/action_cable/connection/base.rb', line 51</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_server'>server</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_env'>env</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_subscriptions'>subscriptions</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_logger'>logger</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_worker_pool'>worker_pool</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_protocol'>protocol</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="websocket-instance_method">
  <h3 class='signature ro prot'>
    #<strong>websocket</strong>   <span class="extras">(<span class='readonly'>readonly</span>, <span class='prot'>protected</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/5-0-stable/actioncable/lib/action_cable/connection/base.rb#L153-L153'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


153</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actioncable/lib/action_cable/connection/base.rb', line 153</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_websocket'>websocket</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="worker_pool-instance_method">
  <h3 class='signature ro'>
    #<strong>worker_pool</strong>   <span class="extras">(<span class='readonly'>readonly</span>)</span>
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/5-0-stable/actioncable/lib/action_cable/connection/base.rb#L51-L51'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


51</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actioncable/lib/action_cable/connection/base.rb', line 51</span></pre>
<pre class='code ruby'>

<span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbeg'>:</span><span class='id identifier rubyid_server'>server</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_env'>env</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_subscriptions'>subscriptions</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_logger'>logger</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_worker_pool'>worker_pool</span><span class='comma'>,</span> <span class='symbeg'>:</span><span class='id identifier rubyid_protocol'>protocol</span>
</pre>
  </div>
</div>
</section>

<h2 class='y_details'>Instance Method Details</h2>
<section class='method_details first' id="beat-instance_method">
  <h3 class='signature  first'>
    #<strong>beat</strong>  
  </h3>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/5-0-stable/actioncable/lib/action_cable/connection/base.rb#L119-L121'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


119
120
121</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actioncable/lib/action_cable/connection/base.rb', line 119</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_beat'>beat</span>
  <span class='id identifier rubyid_transmit'>transmit</span> <span class='label'>type:</span> <span class='const'><a href="../../ActionCable.html" title="ActionCable (module)">ActionCable</a></span><span class='op'>::</span><span class='const'><a href="../../ActionCable.html#INTERNAL-constant" title="ActionCable::INTERNAL (constant)">INTERNAL</a></span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_message_types'>message_types</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbeg'>:</span><span class='id identifier rubyid_ping'>ping</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>message:</span> <span class='const'><a href="../../Time.html" title="Time (class)">Time</a></span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="close-instance_method">
  <h3 class='signature '>
    #<strong>close</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Close the <a href="WebSocket.html" title="ActionCable::Connection::WebSocket (class)">WebSocket</a> connection.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/5-0-stable/actioncable/lib/action_cable/connection/base.rb#L99-L101'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


99
100
101</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actioncable/lib/action_cable/connection/base.rb', line 99</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_close'>close</span>
  <span class='id identifier rubyid_websocket'>websocket</span><span class='period'>.</span><span class='id identifier rubyid_close'>close</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="cookies-instance_method">
  <h3 class='signature prot'>
    #<strong>cookies</strong>   <span class="extras">(<span class='prot'>protected</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The cookies of the request that initiated the
<a href="WebSocket.html" title="ActionCable::Connection::WebSocket (class)">WebSocket</a> connection. Useful for performing
authorization checks.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/5-0-stable/actioncable/lib/action_cable/connection/base.rb#L149-L151'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


149
150
151</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actioncable/lib/action_cable/connection/base.rb', line 149</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_cookies'>cookies</span>
  <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_cookie_jar'>cookie_jar</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="request-instance_method">
  <h3 class='signature prot'>
    #<strong>request</strong>   <span class="extras">(<span class='prot'>protected</span>)</span>
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>The request that initiated the <a href="WebSocket.html" title="ActionCable::Connection::WebSocket (class)">WebSocket</a>
connection is available here. This gives access to the environment,
cookies, etc.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/5-0-stable/actioncable/lib/action_cable/connection/base.rb#L141-L146'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


141
142
143
144
145
146</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actioncable/lib/action_cable/connection/base.rb', line 141</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_request'>request</span>
  <span class='ivar'>@request</span> <span class='op'>||=</span> <span class='kw'>begin</span>
    <span class='id identifier rubyid_environment'>environment</span> <span class='op'>=</span> <span class='const'><a href="../../Rails.html" title="Rails (module)">Rails</a></span><span class='period'>.</span><span class='id identifier rubyid_application'><a href="../../Rails.html#application-class_method" title="Rails.application (method)">application</a></span><span class='period'>.</span><span class='id identifier rubyid_env_config'>env_config</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_env'>env</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='kw'>defined?</span><span class='lparen'>(</span><span class='const'><a href="../../Rails.html" title="Rails (module)">Rails</a></span><span class='period'>.</span><span class='id identifier rubyid_application'><a href="../../Rails.html#application-class_method" title="Rails.application (method)">application</a></span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='const'><a href="../../Rails.html" title="Rails (module)">Rails</a></span><span class='period'>.</span><span class='id identifier rubyid_application'><a href="../../Rails.html#application-class_method" title="Rails.application (method)">application</a></span>
    <span class='const'><a href="../../ActionDispatch.html" title="ActionDispatch (module)">ActionDispatch</a></span><span class='op'>::</span><span class='const'><a href="../../ActionDispatch/Request.html" title="ActionDispatch::Request (class)">Request</a></span><span class='period'>.</span><span class='id identifier rubyid_new'><a href="../../ActionDispatch/Request.html#new-class_method" title="ActionDispatch::Request.new (method)">new</a></span><span class='lparen'>(</span><span class='id identifier rubyid_environment'>environment</span> <span class='op'>||</span> <span class='id identifier rubyid_env'>env</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="send_async-instance_method">
  <h3 class='signature '>
    #<strong>send_async</strong>(method, *arguments)  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Invoke a method on the connection asynchronously through the pool of thread
workers.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/5-0-stable/actioncable/lib/action_cable/connection/base.rb#L104-L106'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


104
105
106</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actioncable/lib/action_cable/connection/base.rb', line 104</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_send_async'>send_async</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_arguments'>arguments</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_worker_pool'>worker_pool</span><span class='period'>.</span><span class='id identifier rubyid_async_invoke'>async_invoke</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_arguments'>arguments</span><span class='rparen'>)</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>

<section class='method_details' id="statistics-instance_method">
  <h3 class='signature '>
    #<strong>statistics</strong>  
  </h3>
<div class='docstring'>
  <div class='discussion'>
    
<p>Return a basic hash of statistics for the connection keyed with
`identifier`, `started_at`, and `subscriptions`. This can be returned by a
health check against the connection.</p>

  </div>
</div>
  <span class='link_repo'>[&#8202;<a class='repo' href='https://github.com/rails/rails/blob/5-0-stable/actioncable/lib/action_cable/connection/base.rb#L110-L117'>GitHub</a>&#8202;]</span>
<div class='source_code h'>
  <pre class='lines_num'>


110
111
112
113
114
115
116
117</pre>
  <div class='lines_code'>
<pre><span class='info file'># File 'actioncable/lib/action_cable/connection/base.rb', line 110</span></pre>
<pre class='code ruby'>

<span class='kw'>def</span> <span class='id identifier rubyid_statistics'>statistics</span>
  <span class='lbrace'>{</span>
    <span class='label'>identifier:</span> <span class='id identifier rubyid_connection_identifier'>connection_identifier</span><span class='comma'>,</span>
    <span class='label'>started_at:</span> <span class='ivar'>@started_at</span><span class='comma'>,</span>
    <span class='label'>subscriptions:</span> <span class='id identifier rubyid_subscriptions'>subscriptions</span><span class='period'>.</span><span class='id identifier rubyid_identifiers'>identifiers</span><span class='comma'>,</span>
    <span class='label'>request_id:</span> <span class='ivar'>@env</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>action_dispatch.request_id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span>
</pre>
  </div>
</div>
</section>


<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.9.8 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.9.0 (ruby-2.5.0p-1)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>