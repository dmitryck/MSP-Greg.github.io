<!DOCTYPE html>
<html>
<head>

<meta charset='UTF-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no'>
<meta name='apple-touch-fullscreen'       content='yes'>
<meta name='apple-mobile-web-app-capable' content='yes'>
<meta name='apple-mobile-web-app-status-bar-style' content='rgba(228,228,228,1.0)'>

<title>File: Action View Changelog &mdash; Rails-5-0-stable</title>

<link rel='stylesheet'  type='text/css' href='../css/y_fonts.css' />
<link rel='stylesheet'  type='text/css' href='../css/highlight.github.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_style.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_list.css' />
<link rel='stylesheet'  type='text/css' href='../css/y_color.css' />
<link rel='stylesheet'  type='text/css' href='../css/custom.css' />
<link rel='stylesheet'  type='text/css' href='../css/common.css' />

<script type='text/javascript'>
  var pathId = "action_view_changelog",
    relpath = '';

  var t2Info = {
    CSEP: '.',
    ISEP: '#',
    NSEP: '::'
  };
</script>

<script type='text/javascript' charset='utf-8' src='../js/highlight.pack.js'></script>
<script type='text/javascript' charset='utf-8' src='../js/y_app.js'></script>

</head>
<body>
<svg id='y_wait' class viewBox='0 0 90 90'></svg>
<div id='settings' class='hidden'></div>
<div id='y_list' class='d h'>
  <header id='list_header'></header>
  <nav id= 'list_nav' class='y_nav l_nav'>
    <ul id='list_items'></ul>
  </nav>
</div>
<div id='y_toc' class='f h'>
  <header id='toc_header'></header>
  <nav id= 'toc_nav' class='y_nav t_nav'>
  <ol id='toc_items'></ol>
  </nav>
</div>
<div id='y_main' tabindex='-1'>
  <header id='y_header'>
    <div id='y_menu'>
        <a href='../index.html'>Home</a> &raquo; 
        <a href='index.html'>Rails-5-0-stable</a> &raquo; 
        <a href='_index.html'>Index</a> &raquo; 
        <span class='title'><a id='t2_doc_top' href='#'>File: Action View Changelog&nbsp;&#x25B2;</a></span>
            </div>

    <a id='list_href' href="class_list.html"></a>
    <div id='y_measure_em' class='y_measure'></div>
    <div id='y_measure_vh' class='y_measure'></div>
    <span id='y_measure_50pre' class='y_measure'><code>123456789_123456789_123456789_123456789_123456789_</code></span>
  </header>
<div id='content' class='file'>
<h2>Rails 5.0.2 (March 01, 2017)</h2>

<ul>
<li><p>Allow render locals to be assigned to instance variables in a view.</p>

<p>Fixes #27480.</p>

<p><em>Andrew White</em></p></li>
<li><p>Return correct object name in form helper method after <code>fields_for</code>.</p>

<p>Fixes #26931.</p>

<p><em>Yuji Yaginuma</em></p></li>
</ul>

<h2>Rails 5.0.1 (December 21, 2016)</h2>

<ul>
<li>  No changes.</li>
</ul>

<h2>Rails 5.0.1.rc2 (December 10, 2016)</h2>

<ul>
<li><p>Restore support for locals named <code>_</code>, <code>arg</code>, <code>args</code>, and <code>block</code>.</p>

<p>Fixes #27302.</p>

<p><em>Toshimaru</em></p></li>
</ul>

<h2>Rails 5.0.1.rc1 (December 01, 2016)</h2>

<ul>
<li><p>Fix support to <a href="ActionController/Parameters.html" title="ActionController::Parameters (class)">::ActionController::Parameters</a> in <code>button_to</code>.</p>

<p><em>Jon Moss</em></p></li>
<li><p>Render now accepts any keys for locals, including reserved words</p>

<p>Only locals with valid variable names get set directly. Others
will still be available in local_assigns.</p>

<p>Example of render with reserved words:</p>

<pre class="code erb"><code class="erb">&lt;%= render &quot;example&quot;, class: &quot;text-center&quot;, message: &quot;Hello world!&quot; %&gt;

&lt;!-- _example.html.erb: --&gt;
&lt;%= tag.div class: local_assigns[:class] do %&gt;
  &lt;p&gt;&lt;%= message %&gt;&lt;/p&gt;
&lt;% end %&gt;
</code></pre>

<p><em>Peter Schilling</em>, <em>Matthew Draper</em></p></li>
<li><p>Changed partial rendering with a collection to allow collections which
implement <code>to_a</code>.</p>

<p>Extracting the collection option had an optimization to avoid unnecessary
queries of ActiveRecord Relations by calling <code>#to_ary</code> on the given
collection. Instances of <code>Enumerator</code> or <a href="Enumerable.html" title="Enumerable (module)">Enumerable</a> are valid
collections, but they do not implement <code>#to_ary</code>. By changing this to
<code>#to_a</code>, they will now be extracted and rendered as expected.</p>

<p><em>Steven Harman</em></p></li>
<li><p>Fix <code>ActionView::Helpers#current_page?</code> to work properly even with
a trailing slash.</p>

<p>Fixes #19472.</p>

<p><em>Stan Lo</em></p></li>
</ul>

<h2>Rails 5.0.0 (June 30, 2016)</h2>

<ul>
<li><p>Changed partial rendering with a collection to allow collections which
implement <code>to_a</code>.</p>

<p>Extracting the collection option had an optimization to avoid unnecessary
queries of ActiveRecord Relations by calling <code>#to_ary</code> on the given
collection. Instances of <code>Enumerator</code> or <a href="Enumerable.html" title="Enumerable (module)">Enumerable</a> are valid
collections, but they do not implement <code>#to_ary</code>. By changing this to
<code>#to_a</code>, they will now be extracted and rendered as expected.</p>

<p><em>Steven Harman</em></p></li>
<li><p>Change <code>datetime_field</code> and <code>datetime_field_tag</code> to generate <code>datetime-local</code> fields.</p>

<p>As a new specification of the HTML 5 the text field type <code>datetime</code> will no longer exist
and it is recomended to use <code>datetime-local</code>.
Ref: <a href="https://html.spec.whatwg.org/multipage/forms.html#local-date-and-time-state-(type=datetime-local)">https://html.spec.whatwg.org/multipage/forms.html#local-date-and-time-state-(type=datetime-local)</a></p>

<p><em>Herminio Torres</em></p></li>
<li><p>Raw template handler (which is also the default template handler in Rails 5) now outputs
HTML-safe strings.</p>

<p>In Rails 5 the default template handler was changed to the raw template handler. Because
the ERB template handler escaped strings by default this broke some applications that
expected plain JS or HTML files to be rendered unescaped. This fixes the issue caused
by changing the default handler by changing the Raw template handler to output HTML-safe
strings.</p>

<p><em>Eileen M. Uchitelle</em></p></li>
<li><p><code>select_tag</code>&#39;s <code>include_blank</code> option for generation for blank option tag, now adds an empty space label,
 when the value as well as content for option tag are empty, so that we confirm with html specification.
 Ref: <a href="https://www.w3.org/TR/html5/forms.html#the-option-element">https://www.w3.org/TR/html5/forms.html#the-option-element</a>.</p>

<p>Generation of option before:</p>

<pre class="code html"><code class="html">&lt;option value=&quot;&quot;&gt;&lt;/option&gt;
</code></pre>

<p>Generation of option after:</p>

<pre class="code html"><code class="html">&lt;option value=&quot;&quot; label=&quot; &quot;&gt;&lt;/option&gt;
</code></pre>

<p>*Vipul A M *</p></li>
<li><p><code>date_select</code> helper <code>:with_css_classes</code> option now accepts a hash of strings
for <code>:year</code>, <code>:month</code>, <code>:day</code>, <code>:hour</code>, <code>:minute</code>, <code>:second</code> that will extend
the select type with the given css class value.</p>

<pre class="code erb"><code class="erb">&lt;%= f.date_select :birthday, with_css_classes: { month: &quot;my-month&quot;, year: &quot;my-year&quot; } %&gt;
</code></pre>

<pre class="code html"><code class="html">&lt;select id=&quot;user_birthday_3i&quot; name=&quot;user[birthday(3i)]&quot;&gt;…&lt;/select&gt;
&lt;select id=&quot;user_birthday_2i&quot; name=&quot;user[birthday(2i)]&quot; class=&quot;my-month&quot;&gt;…&lt;/select&gt;
&lt;select id=&quot;user_birthday_1i&quot; name=&quot;user[birthday(1i)]&quot; class=&quot;my-year&quot;&gt;…&lt;/select&gt;
</code></pre>

<p><em>Matthias Neumayr</em></p></li>
<li><p>Add <code>to_sentence</code> helper that is a HTML-safe aware version of <a href="Array.html#to_sentence-instance_method" title="Array#to_sentence (method)">Array#to_sentence</a>.</p>

<p><em>Neil Matatall</em></p></li>
<li><p>Added log &quot;Rendering ...&quot;, when starting to render a template to log that
we have started rendering something. This helps to easily identify the origin
of queries in the log whether they came from controller or views.</p>

<p><em>Vipul A M and Prem Sichanugrist</em></p></li>
<li><p>Collection rendering can cache and fetch multiple partials at once.</p>

<p>Collections rendered as:</p>

<pre class="code ruby"><code class="ruby">&lt;%= render partial: &#39;notifications/notification&#39;, collection: @notifications, as: :notification, cached: true %&gt;</code></pre>

<p>will read several partials from cache at once. The templates in the collection
that haven&#39;t been cached already will automatically be written to cache. Works
great alongside individual template fragment caching. For instance if the
template the collection renders is cached like:</p>

<pre class="code ruby"><code class="ruby"># notifications/_notification.html.erb
&lt;% cache notification do %&gt;
  &lt;%# ... %&gt;
&lt;% end %&gt;</code></pre>

<p>Then any collection renders shares that cache when attempting to read multiple
ones at once.</p>

<p><em>Kasper Timm Hansen</em></p></li>
<li><p>Add support for nested hashes/arrays to <code>:params</code> option of <code>button_to</code> helper.</p>

<p><em>James Coleman</em></p></li>
<li><p>Fix stripping the digest from the automatically generated img tag alt
attribute when assets are handled by Sprockets &gt;=3.0.</p>

<p><em>Bart de Water</em></p></li>
<li><p>Create a new <a href="ActiveSupport/SafeBuffer.html" title="ActiveSupport::SafeBuffer (class)">::ActiveSupport::SafeBuffer</a> instance when <code>content_for</code> is flushed.</p>

<p>Fixes #19890.</p>

<p><em>Yoong Kang Lim</em></p></li>
<li><p>Fix <code>collection_radio_buttons</code> hidden_field name and make it appear
before the actual input radio tags to make the real value override
the hidden when passed.</p>

<p>Fixes #22773.</p>

<p><em>Santiago Pastorino</em></p></li>
<li><p><code>ActionView::TestCase::Controller#params</code> returns an instance of
<a href="ActionController/Parameters.html" title="ActionController::Parameters (class)">::ActionController::Parameters</a>.</p>

<p><em>Justin Coyne</em></p></li>
<li><p>Fix regression in <code>submit_tag</code> when a symbol is used as label argument.</p>

<p><em>Yuuji Yaginuma</em></p></li>
<li><p><code>I18n.translate</code> helper will wrap the missing translation keys
 in a <span> tag only if <code>debug_missing_translation</code> configuration
 be true. Default value is <code>true</code>. For example in <code>application.rb</code>:</p>

<p># in order to turn off missing key wrapping
   config.action_view.debug_missing_translation = false</p>

<p><em>Sameer Rahmani</em></p></li>
<li><p>Respect value of <code>:object</code> if <code>:object</code> is false when rendering.</p>

<p>Fixes #22260.</p>

<p><em>Yuichiro Kaneko</em></p></li>
<li><p>Generate <code>week_field</code> input values using a 1-based index and not a 0-based index
as per the W3 spec: <a href="http://www.w3.org/TR/html-markup/datatypes.html#form.data.week">http://www.w3.org/TR/html-markup/datatypes.html#form.data.week</a></p>

<p><em>Christoph Geschwind</em></p></li>
<li><p>Allow <code>host</code> option in <code>javascript_include_tag</code> and <code>stylesheet_link_tag</code> helpers</p>

<p><em>Grzegorz Witek</em></p></li>
<li><p>Restrict <code>url_for :back</code> to valid, non-JavaScript URLs. GH#14444</p>

<p><em>Damien Burke</em></p></li>
<li><p>Allow <code>date_select</code> helper selected option to accept hash like the default options.</p>

<p><em>Lecky Lao</em></p></li>
<li><p>Collection input propagates input&#39;s <code>id</code> to the label&#39;s <code>for</code> attribute when
using html options as the last element of collection.</p>

<p><em>Vasiliy Ermolovich</em></p></li>
<li><p>Add a <code>hidden_field</code> on the <code>collection_radio_buttons</code> to avoid raising an error
when the only input on the form is the <code>collection_radio_buttons</code>.</p>

<p><em>Mauro George</em></p></li>
<li><p><code>url_for</code> does not modify its arguments when generating polymorphic URLs.</p>

<p><em>Bernerd Schaefer</em></p></li>
<li><p><code>number_to_currency</code> and <code>number_with_delimiter</code> now accept a custom <code>delimiter_pattern</code> option
to handle placement of delimiter, to support currency formats like INR.</p>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_number_to_currency'>number_to_currency</span><span class='lparen'>(</span><span class='int'>1230000</span><span class='comma'>,</span> <span class='label'>delimiter_pattern:</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(\d?)(?=(\d\d)(\d)(?!\d))</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='label'>unit:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>₹</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>format:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%u %n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='comment'># =&gt; &#39;₹ 12,30,000.00&#39;</span></code></pre>

<p><em>Vipul A M</em></p></li>
<li><p>Make <code>disable_with</code> the default behavior for submit tags. Disables the
button on submit to prevent double submits.</p>

<p><em>Justin Schiff</em></p></li>
<li><p>Add a break_sequence option to word_wrap so you can specify a custom break.</p>

<p><em>Mauricio Gomez</em></p></li>
<li><p>Add wildcard matching to explicit dependencies.</p>

<p>Turns:</p>

<pre class="code erb"><code class="erb">&lt;% # Template Dependency: recordings/threads/events/subscribers_changed %&gt;
&lt;% # Template Dependency: recordings/threads/events/completed %&gt;
&lt;% # Template Dependency: recordings/threads/events/uncompleted %&gt;
</code></pre>

<p>Into:</p>

<pre class="code erb"><code class="erb">&lt;% # Template Dependency: recordings/threads/events/* %&gt;
</code></pre>

<p><em>Kasper Timm Hansen</em></p></li>
<li><p>Allow defining explicit collection caching using a <code># Template Collection: ...</code>
directive inside templates.</p>

<p><em>Dov Murik</em></p></li>
<li><p>Asset helpers raise <code>ArgumentError</code> when <code>nil</code> is passed as a source.</p>

<p><em>Anton Kolomiychuk</em></p></li>
<li><p>Always attach the template digest to the cache key for collection caching
even when <code>virtual_path</code> is not available from the view context.
Which could happen if the rendering was done directly in the controller
and not in a template.</p>

<p>Fixes #20535.</p>

<p><em>Roque Pinel</em></p></li>
<li><p>Improve detection of partial templates eligible for collection caching,
now allowing multi-line comments at the beginning of the template file.</p>

<p><em>Dov Murik</em></p></li>
<li><p>Raise an <code>ArgumentError</code> when a false value for <code>include_blank</code> is passed to a
required select field (to comply with the HTML5 spec).</p>

<p><em>Grey Baker</em></p></li>
<li><p>Do not put partial name to <code>local_assigns</code> when rendering without
an object or a collection.</p>

<p><em>Henrik Nygren</em></p></li>
<li><p>Remove <code>:rescue_format</code> option for <code>translate</code> helper since it&#39;s no longer
supported by I18n.</p>

<p><em>Bernard Potocki</em></p></li>
<li><p><code>translate</code> should handle <code>raise</code> flag correctly in case of both main and default
translation is missing.</p>

<p>Fixes #19967.</p>

<p><em>Bernard Potocki</em></p></li>
<li><p>Load the <code>default_form_builder</code> from the controller on initialization, which overrides
the global config if it is present.</p>

<p><em>Kevin McPhillips</em></p></li>
<li><p>Accept lambda as <code>child_index</code> option in <code>fields_for</code> method.</p>

<p><em>Karol Galanciak</em></p></li>
<li><p><code>translate</code> allows <code>default: [[]]</code> again for a default value of <code>[]</code>.</p>

<p>Fixes #19640.</p>

<p><em>Adam Prescott</em></p></li>
<li><p><code>translate</code> should accept nils as members of the <code>:default</code>
parameter without raising a translation missing error.</p>

<p>Fixes #19419.</p>

<p><em>Justin Coyne</em></p></li>
<li><p><code>number_to_percentage</code> does not crash with <code>Float::NAN</code> or <code>Float::INFINITY</code>
as input when <code>precision: 0</code> is used.</p>

<p>Fixes #19227.</p>

<p><em>Yves Senn</em></p></li>
<li><p>Fixed the translation helper method to accept different default values types
besides String.</p>

<p><em>Ulisses Almeida</em></p></li>
<li><p>Fixed a dependency tracker bug that caused template dependencies not
count layouts as dependencies for partials.</p>

<p><em>Juho Leinonen</em></p></li>
<li><p>Extracted <a href="ActionView/Helpers/RecordTagHelper.html" title="ActionView::Helpers::RecordTagHelper (module)">::ActionView::Helpers::RecordTagHelper</a> to external gem
(<code>record_tag_helper</code>) and added removal notices.</p>

<p><em>Todd Bealmear</em></p></li>
<li><p>Allow to pass an integer value to <code>size</code> option in <code>image_tag</code> and <code>video_tag</code>.</p>

<p>This makes the behavior more consistent with <code>width</code> or <code>height</code> options.</p>

<p><em>Mehdi Lahmam</em></p></li>
<li><p>Partial template name does no more have to be a valid Ruby identifier.</p>

<p>There used to be a naming rule that the partial name should start with
underscore, and should be followed by any combination of letters, numbers
and underscores.
But now we can give our partials any name starting with underscore, such as
_🍔.html.erb.</p>

<p><em>Akira Matsuda</em></p></li>
<li><p>Change the default template handler from <a href="ERB.html" title="ERB (class)">ERB</a> to <code>Raw</code>.</p>

<p>Files without a template handler in their extension will be rendered using the raw
handler instead of ERB.</p>

<p><em>Rafael Mendonça França</em></p></li>
<li><p>Remove deprecated <code>AbstractController::Base::parent_prefixes</code>.</p>

<p><em>Rafael Mendonça França</em></p></li>
<li><p>Default translations that have a lower precedence than a html safe default,
but are not themselves safe, should not be marked as html_safe.</p>

<p><em>Justin Coyne</em></p></li>
<li><p>Make possible to use blocks with short version of <code>render &quot;partial&quot;</code> helper.</p>

<p><em>Nikolay Shebanov</em></p></li>
<li><p>Add a <code>hidden_field</code> on the <code>file_field</code> to avoid raising an error when the only
input on the form is the <code>file_field</code>.</p>

<p><em>Mauro George</em></p></li>
<li><p>Add support for Reply-To field in <code>mail_to</code> helper.</p>

<p><em>Mark Dodwell</em></p></li>
<li><p>Add an explicit error message, in <a href="ActionView/PartialRenderer.html" title="ActionView::PartialRenderer (class)">::ActionView::PartialRenderer</a> for partial
<code>rendering</code>, when the value of option <code>as</code> has invalid characters.</p>

<p><em>Angelo Capilleri</em></p></li>
<li><p>Allow entries without a link tag in <code>AtomFeedHelper</code>.</p>

<p><em>Daniel Gomez de Souza</em></p></li>
</ul>

<p>Please check <a href="https://github.com/rails/rails/blob/4-2-stable/actionview/CHANGELOG.md">4-2-stable</a> for previous changes.</p>

<div id='footer'>
  Generated by
  <a href='http://yardoc.org' title='Yay! A Ruby Documentation Tool' target="_parent">yard</a>
  0.9.8 with <a href='https://msp-greg.github.io/yard-t2/' title='yard-t2' target="_parent">yard-t2</a> 0.9.0 (ruby-2.5.0p-1)
</div>
</div> <!-- content  -->
</div> <!-- y_main   -->
</body>
</html>